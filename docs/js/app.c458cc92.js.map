{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/menu/controls/ColorPicker.vue?b9d0","webpack:///./src/components/menu/PropertyPanel.vue?29b0","webpack:///./src/components/menu/controls/Tooltip.vue?53e4","webpack:///./src/components/menu/controls/InputVectorTooltip.vue?d273","webpack:///./src/components/menu/controls/InputVector.vue?81ef","webpack:///./src/store/modules/treeview.js","webpack:///./src/store/modules/properties.js","webpack:///./src/store/modules/canvas.js","webpack:///./src/store/modules/history.js","webpack:///./src/store/index.js","webpack:///./src/App.vue","webpack:///./src/components/menu/TopBar.vue","webpack:///./src/components/Modal.vue","webpack:///./src/components/ClickOutsideTriggerMixin.js","webpack:///./src/components/Modal.vue?d946","webpack:///./src/components/Creation.vue","webpack:///./src/components/menu/controls/InputVector.vue","webpack:///./src/components/menu/controls/InputVectorTooltip.vue","webpack:///./src/components/menu/controls/Tooltip.vue","webpack:///./src/components/menu/controls/Tooltip.vue?5371","webpack:///./src/components/menu/controls/InputVectorTooltip.vue?03a4","webpack:///./src/components/menu/controls/InputVector.vue?f726","webpack:///./src/components/menu/controls/ColorPicker.vue","webpack:///./src/components/menu/controls/ColorPicker.vue?925f","webpack:///./src/components/menu/controls/Backface.vue","webpack:///./src/components/menu/controls/Backface.vue?7e2a","webpack:///./src/components/menu/controls/InputLabel.vue","webpack:///./src/components/menu/controls/InputLabel.vue?c56b","webpack:///./src/components/Creation.vue?45ad","webpack:///./src/components/menu/Settings.vue","webpack:///./src/components/menu/Settings.vue?7a84","webpack:///./src/components/menu/TopBar.vue?e64b","webpack:///./src/components/menu/PropertyPanel.vue","webpack:///./src/components/menu/PropertyPanel.vue?093d","webpack:///./src/components/menu/TreeView.vue","webpack:///./src/components/menu/TreeItem.vue","webpack:///./src/components/menu/controls/ClickToEdit.vue","webpack:///./src/components/menu/controls/ClickToEdit.vue?589c","webpack:///./src/components/menu/TreeItem.vue?3ae9","webpack:///./src/components/menu/TreeView.vue?9399","webpack:///./src/components/Canvas.vue","webpack:///./src/components/Canvas.vue?4dee","webpack:///./src/App.vue?8ecf","webpack:///./src/main.js","webpack:///./src/components/Modal.vue?8979","webpack:///./src/components/menu/controls/InputLabel.vue?f410","webpack:///./src/zdogger/ztree.js","webpack:///./src/components/Creation.vue?5c9e","webpack:///./src/zdogger/scene.js","webpack:///./src/components/menu/TreeItem.vue?6a3e","webpack:///./src/components/Canvas.vue?782b","webpack:///./src/App.vue?8045","webpack:///./src/zdogger/index.js","webpack:///./src/testmodel.js","webpack:///./src/components/menu/TreeView.vue?77d5","webpack:///./src/components/menu/TopBar.vue?85b6"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","getDefaultState","list","blockIds","selectedListNode","embed","state","getters","actions","changeList","commit","ztree","trimmedView","sortItem","payload","dispatch","root","startDrag","stopDrag","saveSelected","treeNode","clearSelected","changeDisplayName","newName","createEmbed","e","generateEmbed","selector","mini","resetView","mutations","setList","setDragging","setSelectedList","setEmbed","resetState","assign","namespaced","VECTOR_PROPS","BOOL_PROPS","COLOR_PROPS","NUM_PROPS","keys","ZdogJSONSchema","optionValidator","filter","prop","type","CREATE_PROPS","anchor","ellipse","box","polygon","illustration","vector","rect","roundedrect","shape","hemisphere","group","cylinder","cone","invalidFields","incomingOptions","incorrectFields","k","v","values","index","field","validType","Array","isArray","toNum","Number","isInteger","isNaN","colors","propList","includes","vectors","bools","nums","getDisplay","rootGetters","selectedNode","arr","constructor","optionKeys","node","justProps","props","forEach","canvasAxes","defaultState","validationSuccess","tooltip","displayProps","validationFailed","changeDisplay","reset","updateProps","options","validateFields","invalids","validationReset","VALIDATION_FAIL","VALIDATION_SUCCESS","VALIDATION_RESET","setTooltip","setDisplayProps","editDisplayProps","selectedAxes","UnitAxes","scaleZoom","stroke","showNeg","undoRedoHistory","settings","backgroundColor","scene","panInverse","zoomSpeed","panSpeed","ghostQuery","changeSetting","showCanvasAxes","illo","updateRenderGraph","showSelectedAxes","rootState","selected","size","depth","width","height","radius","diameter","sfactor","scale","x","y","z","longest","Math","max","axes","a","addTo","clearSelectedAxes","remove","clearCanvasAxes","restoreDefaultSettings","setSetting","entries","setDefaultSettings","isCyclic","obj","seenObjects","detect","indexOf","console","log","UndoRedo","store","this","mstate","tree","toJSON","latestIndex","history","currentIndex","pop","rebuild","Zdogger","Reader","undoRedoPlugin","init","subscribe","mutation","addState","substring","newZdog","find","newO","deleteZdog","id","updateParent","updateSelectedName","Error","addNode","CanvasScene","setNodeProps","updateNode","removeNode","changeParent","newParentId","debug","process","Tree","newZtree","arg","initCanvasScene","destroy","Scene","canvas","handlers","keydown","ctrlKey","keyCode","shiftKey","redo","undo","keyup","registerEvents","h","addEventListener","unregisterEvents","removeEventListener","treeLoaded","paused","createZtree","newTree","rebuildZtree","unanimate","children","nodeMap","relationMap","ghostCanvas","pruneGhost","unitAxes","animate","newIllustration","on","detail","demoJSON","changeSelected","pause","bool","exportTree","download","importTree","load","setZtree","updateTree","setIllustration","setPause","setSelected","plugins","createLogger","createStore","treeview","properties","class","ref","_createElementBlock","onClick","$options","_createVNode","_component_TopBar","_createElementVNode","_component_TreeView","_component_Canvas","_component_PropertyPanel","aria-label","tabIndex","_ctx","_Fragment","_renderList","item","_toDisplayString","_hoisted_3","_createBlock","_Teleport","to","$data","_component_Modal","onClose","_component_Creation","itemtype","onClosePrompt","_hoisted_4","_component_Settings","onKeydown","_renderSlot","undefined","ClickOutsideTrigger","emits","isActive","methods","close","$emit","keydownHandler","mixins","mounted","$refs","figure","focus","$store","unmounted","__exports__","$props","_hoisted_1","_hoisted_2","f","$event","placeholder","_component_InputLabel","for","element","step","onInput","target","_component_ColorPicker","onUpdate","_component_InputVector","degrees","checked","default","_component_Backface","threeD","_component_InputVectorTooltip","label","onChangev","autocomplete","onChange","_component_Tooltip","min","components","Tooltip","String","editing","computed","changeV","open","InputVectorTooltip","euler","defaultVal","editx","edity","editz","JSON","parse","temp","map","coord","trun","toDeg","sendCoords","newVal","emitCoords","toRad","PI","radians","raw","round","editDegrees","stopEditDegrees","closeTooltip","inputChange","evt","tooltipChange","style","onBlur","color","colorPicker","wipColor","$nextTick","mountPicker","toggle","stopPropagation","preventDefault","colorEnter","set","rgbaString","cxt","iro","ColorPicker","picker","layout","component","ui","Box","Slider","sliderType","Boolean","bChecked","chooseColor","update","newColor","change","_resolveDynamicComponent","autocorrect","StringMixin","inheritAttrs","InputVector","Backface","InputLabel","wipOptions","wipAssignedName","appendTo","mapActions","newZdogObject","submit","createNew","optionDefault","updateColor","numProps","u","boolProps","vectorProps","colorProps","mapState","mapGetters","mainProps","miscProps","propsFor","validSchema","bWarning","isThreeD","watch","wipSettings","currentSettings","setWipSettings","newValue","saveSettings","defaultSettings","Modal","Creation","Settings","bImporting","creationItemType","bSettings","hasIllustration","creatables","ZCLASS","NAMES","promptCreate","event","ItemType","getAttribute","confirmNewIllustration","cancelPrompt","closeWarning","importing","onSendCoords","backface","READ_ONLY","wipTooltip","selectedName","selectedTypeName","hasColor","selectedAllProps","hasBackfaceColor","bf","saveProps","editProp","option","editOption","updateName","ne","deleteSelected","_hoisted_5","_hoisted_6","_component_TreeItem","_hoisted_8","_hoisted_9","onDragover","onDragleave","onDrop","draggable","onDragstart","onDragend","_component_ClickToEdit","dbl","autofocus","onEditFinish","child","parent-id","onSelectUncollapse","onDblclick","finish","edit","inp","ClickToEdit","parentId","dragOverIndicate","editingName","collapsed","isSelected","hasChildren","validDropzone","nid","truncName","text","substr","changeSelectedName","dragStart","childId","dataTransfer","setData","stringify","dragEnd","dragOver","dropEffect","drop","getData","finishEditAssignedName","highlight","toggleCollapse","uncollapseBubble","TreeItem","ghost","rerender","draggingObject","dragId","bEmbed","treeView","nVal","getPanelWidth","$parent","clientWidth","embedGen","embedCopy","embedText","select","setSelectionRange","document","execCommand","demo","testmodel","require","hideGhost","windowWidth","innerWidth","windowHeight","innerHeight","canvasStyle","oVal","clickHandler","getMousePos","camera","zoom","clientX","clientY","TopBar","PropertyPanel","TreeView","Canvas","setup","gutter1","gutter2","onMounted","split","Split","columnGutters","track","isClickInsideEvent","getRef","refName","deselect","isClickInside","contains","logSelected","app","createApp","App","use","Vuex","mount","ZDOG_CLASS_TYPE","Zdog","Anchor","Shape","Cone","Cylinder","Dragger","Ellipse","Group","Hemisphere","Illustration","Polygon","Rect","RoundedRect","Vector","ZDOG_CLASS","ZDOG_CLASS_NAME","CYCLIC_PROPS","nocyclic","seed","Date","now","generateUid","xorShift","floor","random","toString","make","int","construct","assignUID","assignName","assignType","itemName","ZdogItem","writable","configurable","isClass","zdog","toLowerCase","assignExisting","importExisting","copy","copyGraph","deep","reviveZdog","plainObject","ZdogO","toObject","canvasQuery","classType","recordProps","strin","validProps","ZtreeReader","Ztree","reviveTree","JSONstring","objecT","revivePlain","nodes","plain","maP","Map","relations","parent","Set","addChild","content","Download","Promise","resolve","reject","import","then","fileList","fileReader","FileReader","onloadend","ev","readAsText","catch","fileName","contentType","createElement","file","Blob","href","URL","createObjectURL","click","input","setAttribute","files","optionsDefault","Z","is","flatten","mainID","_nodeID","pID","add","visible","trimNode","entry","valset","from","StringUtils","childIds","newSet","childs","_addRelation","delete","childSet","childnode","oldParentNode","pnode","removeChild","some","ID","relation","cid","anchors","bgColor","combined","canvasTagGenerate","scriptTagGenerate","findRoot","attribute","omitSelector","str","replace","nl","getFlat","properNames","capitalize","order","declaration","dragRotate","defaults","jjj","json_beautifier","dropQuotesOnKeys","minify","string","charAt","toUpperCase","TYPES","ENUMS","revive","CLASS","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","cancelAnimationFrame","mozCancelAnimationFrame","getPixel","context","imageData","getImageData","colorKey","rgbString","GhostCanvas","ghostIllo","syncWithCanvas","ctx","setTransform","transformMatrix","rotate","translate","updateGraph","onPrerender","clone","ghostNodes","colorMap","nodeColors","isCanvas","getRandomRgb","setUniformColor","_setMaps","toDelete","has","parentid","parentGhost","toRem","original","nodeProps","gn","screenX","screenY","renderGraph","pr","pixelRatio","colorData","previous","dependents","_flatGraph","eventDeselect","Event","animReq","setSize","eye","worldPosition","phi","theta","rho","defaultRho","events","wheel","down","up","move","dragger","startElement","onDragStart","pointer","cursordown","onDragMove","dX","dY","cursormove","onDragEnd","cursorup","onwheel","_dispatch","zooming","cos","sin","canvasHeight","x0","pageX","y0","pageY","totaldelta","isMouseDown","buttons","button","canPan","dragPan","_screendelta","dx","dy","speed","y2","x2","radRatio","abs","selection","deltaX","deltaY","z0","innerText","pickSelectShape","offsetX","offsetY","selectActive","selectShape","CustomEvent","dispatchEvent","isHidden","classList","eventName","callback","fn","delta","canvasWidth","listeners","opts","form","front","makeAxis","opacity","flag","Axis","num","g","b","TAU","gold","garnet","eggplant","hipX","hips","path","leg","foot","cornerRadius","fill","standLeg","spine","chest","head","quarters","closed","armSize","upperArm","forearm"],"mappings":"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","file":"js/app.c458cc92.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/zdog-scope/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./ColorPicker.vue?vue&type=style&index=0&id=5f665e48&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./PropertyPanel.vue?vue&type=style&index=0&id=4de71eaf&lang=scss\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Tooltip.vue?vue&type=style&index=0&id=658c95b6&lang=css\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./InputVectorTooltip.vue?vue&type=style&index=0&id=926bbd34&lang=css\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./InputVector.vue?vue&type=style&index=0&id=26e33402&lang=css\"","import {ztree} from '../index'\n\n/* Module1.store.js */\n// State object\nconst getDefaultState = () => ({\n  list: [],\n  blockIds:[],\n  selectedListNode:null,\n  embed:null\n})\n\nconst state = getDefaultState();\n// Getter functions\nconst getters = {\n}\n// Actions \nconst actions = {\n\n  changeList({commit}){\n    commit('setList', ztree.trimmedView())\n  },\n\n  sortItem({dispatch}, payload){\n    dispatch('history/updateParent', payload, {root: true})\n    dispatch('changeList')\n  },\n\n  startDrag({commit}, {blockIds}){\n    commit('setDragging', blockIds);\n  },\n\n  stopDrag({commit}){\n    commit('setDragging', [])\n  },\n\n  saveSelected({commit}, treeNode){\n    commit('setSelectedList', treeNode)\n  },\n\n  clearSelected({commit}){\n    commit('setSelectedList', null)\n  },\n\n  changeDisplayName({state}, newName){\n    state.selectedListNode.name = newName\n  },\n\n  createEmbed({commit}){\n    let e = ztree.generateEmbed({selector:'.zdog-canvas', mini:true});\n    commit('setEmbed', e)\n  },\n\n  resetView({commit}){\n    commit('resetState')\n  }\n  \n}\n\n// Mutations  \nconst mutations = {\n  setList(state, payload){\n    state.list = payload;\n  },\n\n  setDragging(state, blockIds){\n    state.blockIds = blockIds;\n  },\n\n  setSelectedList(state, payload){\n    state.selectedListNode = payload\n  },\n\n  setEmbed(state, payload){\n    state.embed = payload\n  },\n\n  resetState(state) {\n    Object.assign(state, getDefaultState())\n  }\n\n}\n\nexport default {\n  namespaced: true,\n  state,\n  getters,\n  actions,\n  mutations\n}","//import {ztree} from '../index'\nimport {justProps} from '../../zdogger/ztree'\n\nimport ZdogJSONSchema from '../../zdogobjects.json'\n\n\nconst VECTOR_PROPS = [\n  'rotate','translate','scale','front'\n]\nconst BOOL_PROPS = [\n  'fill','visible','closed','updateSort','dragRotate', 'centered', 'resize', 'backface'\n]\n\nconst COLOR_PROPS = [\n  'color', 'rearFace', 'frontFace', 'leftFace', 'rightFace', 'topFace', 'bottomFace', 'backface'\n]\n\nconst NUM_PROPS = Object.keys(ZdogJSONSchema.optionValidator)\n  .filter(prop=>{\n    return ZdogJSONSchema.optionValidator[prop].type == 'number'\n  })\n\n/**\n * User settable props for when calling 'new Zdog.Item', taken from documentation @ https://zzz.dog/api\n */\nconst CREATE_PROPS = {\n  anchor:[\n    'rotate',\n    'translate',\n    'scale',\n  ],\n  ellipse: [\n    \"diameter\",\n    \"width\",\"height\",\"quarters\"\n  ],\n  box:[\n    'depth',\n    'frontFace',\n    'rearFace',\n    'leftFace',\n    'rightFace',\n    'topFace',\n    'bottomFace',\n  ],\n  polygon:[\n    \"sides\",\n    \"radius\"\n  ],\n  illustration:[\n  \"centered\",\"zoom\",\"dragRotate\",\"resize\"\n    // onPrerender: noop,\n    // onDragStart: noop,\n    // onDragMove: noop,\n    // onDragEnd: noop,\n    // onResize: noop,\n  ],\n  vector:[\n    \"x\",\"y\",\"z\"\n  ],\n  rect:[\n    \"width\",\"height\"\n  ],\n  roundedrect:[\n    \"width\",\"height\",\"cornerRadius\"\n  ],\n  shape:[\n    \"path\",\"stroke\",\"fill\",\"color\",\"closed\",\"visible\",\"path\",\"front\",\"backface\"\n  ],\n  hemisphere:[\"diameter\",\"backface\"],\n  group:[\"updateSort\",\"visible\"],\n  cylinder:[\"diameter\",\"length\",\"backface\",\"frontFace\"],\n  cone:[\"diameter\",\"length\",\"backface\"]\n}\n\n/**\n * Checks the proposed options and returns an array of invalid fields (empty if fields are valid)\n * @param {Object} incomingOptions \n */\nfunction invalidFields(incomingOptions){\n  let incorrectFields = [];\n  let k = Object.keys(incomingOptions);\n  let v = Object.values(incomingOptions);\n  for (let index = 0; index < k.length; index++){\n    let field = k[index];\n    let value = v[index];\n    let validType = ZdogJSONSchema.optionValidator[field].type;\n\n    //backface can be a string\n    if (field == 'backface' && typeof value == 'string'){\n      continue;\n    }\n    if (typeof value != validType){\n      if (validType == 'Array') { // needs to be array\n        if (Array.isArray(value)){\n          continue;\n        }\n      } else if (validType == 'integer') {\n        let toNum = Number(value);\n        if (Number.isInteger(toNum)){\n          continue;\n        }\n      } else if (validType == 'number'){\n        let toNum = Number(value);\n        if (!isNaN(toNum)){\n          continue;\n        }\n      }\n    incorrectFields.push(field);\n    }\n  }\n  return incorrectFields;\n}\n\n\nlet list = {\n  colors(propList){\n    return propList.filter((prop)=>{\n      return COLOR_PROPS.includes(prop);\n    })\n  },\n  vectors(propList){\n    return propList.filter((prop)=>{\n      return VECTOR_PROPS.includes(prop);\n    })\n  },\n  bools(propList){\n    return propList.filter(prop=>{\n      return BOOL_PROPS.includes(prop) && prop != 'backface'\n    })\n  },\n  nums(propList){\n    return propList.filter(prop=>{\n      return NUM_PROPS.includes(prop);\n    })\n  },\n}\n\n/**\n * This is not a Vuex getter because the getter seems to cache it? Resulting in inaccurrate display\n * @param {*} rootState \n */\nfunction getDisplay(rootGetters){\n  // if (!rootState.selected) return\n  // let n = ztree.find(rootState.selected)\n  let n = rootGetters.selectedNode\n  let arr = n.constructor.optionKeys\n  let node = justProps(n)\n  let p = ['colors', 'vectors', 'bools', 'nums']\n  let props = {};\n  p.forEach(type=>{\n    props[type] = list[type](arr)\n  })\n  return {node, props}\n}\n\n/* Module1.store.js */\n// State object\nconst defaultState = () => ({\n  invalidFields:null,\n  validationSuccess:false,\n  tooltip:null,\n  displayProps:{\n    node:null,\n    props:null\n  }\n})\n\nconst state = defaultState();\n// Getter functions\nconst getters = {\n  validationFailed(state){\n    return (state.validationSuccess == false && state.invalidFields);\n  },\n  BOOL_PROPS(){\n    return BOOL_PROPS\n  },\n  VECTOR_PROPS(){\n    return VECTOR_PROPS\n  },\n  COLOR_PROPS(){\n    return COLOR_PROPS\n  },\n  CREATE_PROPS(){\n    return CREATE_PROPS\n  },\n  NUM_PROPS(){\n    return NUM_PROPS\n  },\n}\n// Actions \nconst actions = {\n\n  changeDisplay({commit, rootGetters}){\n    commit('setDisplayProps', getDisplay(rootGetters))\n  },\n\n  reset({commit}){\n    commit('resetState')\n  },\n\n\n  updateProps({dispatch, rootGetters}, incomingOptions){\n    \n    let node = rootGetters.selectedNode, options = Object.assign({}, incomingOptions)\n    \n    delete options['type']\n    delete options['id']\n\n    let props = Object.keys(options)\n    for(let prop of props) {\n      if (NUM_PROPS.includes(prop)){\n        options[prop] = Number(options[prop]);\n      }\n    }\n    dispatch('history/updateProps', {node,options}, {root: true})\n  },\n\n  validateFields({commit}, incomingOptions){\n    let invalids = invalidFields(incomingOptions);\n    if (invalids.length > 0) {\n      commit('VALIDATION_FAIL', invalids);\n    } else {\n      commit('VALIDATION_SUCCESS');\n     // TODO? warning system?\n    }\n  },\n\n  validationReset({commit}){\n    commit('VALIDATION_RESET')\n\n  },\n  \n}\n\nconst mutations = {\n\n  VALIDATION_FAIL(state, invalids){\n    state.validationSuccess = false;\n    state.invalidFields = invalids;\n  },\n\n  VALIDATION_SUCCESS(state){\n    state.validationSuccess = true;\n    state.invalidFields = null;\n  },\n\n  VALIDATION_RESET(state){\n    state.validationSuccess = false;\n    state.invalidFields = null;\n  },\n\n  setTooltip(state, payload){\n    state.tooltip = payload;\n  },\n\n  setDisplayProps(state, payload){\n    if (!payload){\n      state.displayProps = {node:null, props:null}\n      return\n    }\n    state.displayProps = payload\n  },\n\n  editDisplayProps(state, options){\n    Object.assign(state.displayProps.node, options)\n  },\n\n  resetState(state){\n    Object.assign(state, defaultState())\n  }\n\n}\n\nexport{COLOR_PROPS}\n\nexport default {\n  namespaced: true,\n  state,\n  getters,\n  actions,\n  mutations\n}","/* eslint-disable no-unused-vars */\nimport {ztree} from '../index'\nimport {UnitAxes} from '../../zdogger/scene'\n\nvar selectedAxes = new UnitAxes({t:100,scaleZoom: true, stroke:0.1}), canvasAxes\nselectedAxes.showNeg(false)\n\nconst getDefaultState = () => ({\n  settings:{\n    backgroundColor: \"#808080\",\n    scene:{\n      panInverse:false,\n      zoomSpeed:3,\n      panSpeed:30,\n      ghostQuery:'#ghost'\n    }\n  },\n})\n\nconst state = getDefaultState()\n\n// Getter functions\nconst getters = {\n}\n// Actions \nconst actions = {\n\n  changeSetting({commit}, payload){\n    commit('setSetting', payload)\n  },\n\n  async showCanvasAxes({dispatch, state}){\n    await dispatch('clearCanvasAxes')\n    let illo = ztree.illustration;\n   // let size = illo.canvasHeight / 2;\n   // canvasAxes = axesHelper({addTo: illo, size:size, stroke:1, head:10})\n    illo.updateRenderGraph()\n  },\n\n  showSelectedAxes({rootState, rootGetters}){\n    let n = rootGetters.selectedNode;\n    if (rootState.selected == rootState.illustration) return;\n\n    let size = [n.stroke, n.length, n.depth, n.width, n.height, n.radius, n.diameter].filter(e=>e)\n    let sfactor = n.scale.x * n.scale.y * n.scale.z;\n    let longest = Math.max(...size)\n\n    longest = Math.max(15, (longest * sfactor) * + 3);\n    \n    selectedAxes.axes.forEach(a=>{\n      a.t = longest;\n    })\n    selectedAxes.addTo(n);\n  },\n\n  clearSelectedAxes(){\n    selectedAxes.remove();\n  },\n\n  clearCanvasAxes(){\n    if (canvasAxes){\n      canvasAxes.remove();\n      // document.querySelector('#zoom-control').removeChild(scene.label)\n      // scene.destroy();\n    }\n    canvasAxes = null;\n  },\n\n  reset({commit,dispatch}){\n    dispatch('clearSelectedAxes')\n    dispatch('clearCanvasAxes')\n    commit('resetState')\n  },\n\n  restoreDefaultSettings({commit}) {\n    commit('setDefaultSettings')\n  }\n}\n\n// Mutations  \nconst mutations = {\n  setSetting(state, payload){\n    for (let [name, value] of Object.entries(payload)) {\n      state.settings[name] = value;\n    }\n  },\n\n  setDefaultSettings(state){\n    Object.assign(state.settings, getDefaultState().settings)\n  }\n}\n\nexport default {\n  namespaced: true,\n  state,\n  getters,\n  actions,\n  mutations\n}","\nimport Zdogger from '../../zdogger'\nimport {ztree, CanvasScene} from '../index'\n\n//All history actions and mutations go here\n//https://stackoverflow.com/questions/42878329/going-back-to-states-like-undo-redo-on-vue-js-vuex/44865208#44865208\n\n/* eslint-disable no-unused-vars */\nvar undoRedoHistory\n\nfunction deepCopy(obj){\n  return JSON.parse(JSON.stringify(obj));\n}\n\n//https://stackoverflow.com/questions/14962018/detecting-and-fixing-circular-references-in-javascript\nfunction isCyclic(obj) {\n  var seenObjects = [];\n\n  function detect (obj) {\n    if (obj && typeof obj === 'object') {\n      if (seenObjects.indexOf(obj) !== -1) {\n        return true;\n      }\n      seenObjects.push(obj);\n      for (var key in obj) {\n        /* eslint-disable no-prototype-builtins */\n        if (obj.hasOwnProperty(key) && detect(obj[key])) { \n          console.log(obj, 'cycle at ' + key);\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  return detect(obj);\n}\n\nclass UndoRedo {\n  store\n  history = [];\n  currentIndex = -1;\n  limit = -1;\n\n  init(store){\n    this.store = store;\n  }\n\n  addState(mstate) {\n    let tree = ztree.toJSON();\n    let latestIndex = this.history.length - 1;\n    for (let i = this.currentIndex; i < latestIndex; i++) {\n      this.history.pop();\n    }\n    try{\n      this.history.push(tree);\n    } catch (e) {\n      console.log(e)\n      console.log(isCyclic(tree))\n    }\n\n    // if (this.limit > 0 && this.history.length >= this.limit){\n    //   this.history.shift();\n    // }\n    this.currentIndex = this.history.length - 1\n  }\n\n  undo() {\n    if (this.currentIndex <= 0) return;\n    this.currentIndex--;\n    this.rebuild();\n  }\n\n  redo() {\n    if (this.currentIndex >= this.history.length - 1) return;\n    //const nextState = this.history[this.currentIndex + 1];\n    this.currentIndex++;\n    this.rebuild();\n  }\n\n  rebuild(){\n    let tree = this.history[this.currentIndex]\n   // this.store.replaceState(state);\n    this.store.dispatch('rebuildZtree', new Zdogger.Reader(tree).tree)\n  }\n\n  reset(){\n    this.history = null\n    this.history = []\n    this.currentIndex = -1;\n  }\n}\n\nconst undoRedoPlugin = (store) => {\n  // initialize and save the starting stage\n  undoRedoHistory = new UndoRedo(store)\n  undoRedoHistory.init(store);\n\n  store.subscribe((mutation, mstate) => {\n    if (mutation.type == 'setIllustration'){\n      undoRedoHistory.reset()\n      undoRedoHistory.addState(mstate)\n      return;\n    }\n    let history = mutation.type.substring(0,7)\n    if (history == 'history') {\n      // is called AFTER every mutation\n      undoRedoHistory.addState(mstate);\n    }\n  });\n}\n\n// Actions \nconst actions = {\n\n  newZdog({commit, dispatch}, {type, options, name}){\n    if(options.addTo){\n      options.addTo = ztree.find(options.addTo);\n    } else {\n      options.addTo = ztree.illustration\n    }\n    let newO = Zdogger(type)(options);\n    if (name) {newO.name = name}\n    commit('addNode', newO);\n    dispatch('treeview/changeList', null, {root:true});\n  },\n\n  deleteZdog({commit, dispatch}, id){\n    commit('removeNode', id)\n    dispatch('changeSelected', null, {root:true})\n  },\n\n  updateProps({commit, dispatch}, payload){\n    commit('setNodeProps', payload)\n    dispatch('properties/changeDisplay', null, {root:true})\n  },\n\n  updateParent({commit}, payload){\n    commit('changeParent', payload)\n  },\n\n  updateSelectedName({ commit, rootState, rootGetters, dispatch}, newName){\n    if (!rootState.selected) throw new Error('Cannot assign name to null selected node');\n    commit('setNodeProps', {\n        node: rootGetters.selectedNode,\n        options: {\n          name: newName\n        }\n      })\n\n    dispatch('treeview/changeList', null, {root:true})\n    },\n}\n\nfunction render(node){\n  node.updateGraph();\n  ztree.illustration.renderGraph(node)\n}\n\n// Mutations  \nconst mutations = {\n\n  addNode(state, node){\n    if (!ztree) throw new Error('Cannot add node to nonexistent tree');\n    CanvasScene.addNode(node)\n  },\n\n  setNodeProps(state, {node, options}){\n    CanvasScene.updateNode({node, options})\n  },\n\n  removeNode(state, id){\n    CanvasScene.removeNode(id)\n  },\n\n  changeParent(state, {id, newParentId}){\n    CanvasScene.changeParent(id, newParentId)\n  }\n}\n\nexport {undoRedoPlugin, undoRedoHistory}\n\nexport default {\n  namespaced: true,\n  actions,\n  mutations\n}","/* eslint-disable no-unused-vars */\nimport { createStore, createLogger } from 'vuex'\nimport Zdogger from '../zdogger'\n\nconst debug = process.env.NODE_ENV !== 'production'\n\nvar ztree = new Zdogger.Tree();\nvar Reader = new Zdogger.Reader();\nvar CanvasScene = null;\n\nfunction newZtree(arg){\n  if (arg instanceof Zdogger.Tree) {\n    ztree = arg\n  } else if (arg.options) {\n    ztree = new Zdogger.Tree(arg.options)\n    if (arg.name) {\n      ztree.illustration.name = arg.name;\n    }\n  } else {\n    ztree = new Zdogger.Tree({});\n  }\n}\n\nfunction initCanvasScene(state){\n  if (CanvasScene || state == null) {\n    CanvasScene.destroy();\n    CanvasScene = null\n  }\n  CanvasScene = new Zdogger.Scene(ztree, state.canvas.settings.scene);\n}\n\nconst handlers = {\n  keydown: function(e){\n    if (e.ctrlKey){\n      if (e.keyCode == 90){ // ctrl+Z\n        e.shiftKey? undoRedoHistory.redo():undoRedoHistory.undo();\n      } else if (e.keyCode == 89){// ctrl+y\n        undoRedoHistory.redo();\n      }\n    }\n    if (CanvasScene) CanvasScene.keydown(e);\n    \n  },\n  keyup:function(e){\n    if (CanvasScene) CanvasScene.keyup(e);\n  }\n}\n\nfunction registerEvents(){\n  for (let h in handlers) {\n    window.addEventListener(h,  handlers[h])\n  }\n}\n\nfunction unregisterEvents(){\n  for (let h in handlers) {\n    window.removeEventListener(h,  handlers[h])\n  }\n}\n\n/**\n *  GLOBALS\n */\nconst getDefaultState = () => ({\n  selected:null,\n  illustration:null,\n  treeLoaded:false,\n  paused:false\n})\n\nconst state = getDefaultState()\n\n// getters\nconst getters = {\n  selectedNode(state){\n    if (!ztree) return\n    return ztree.find(state.selected)\n  }\n}\n\n// actions\nconst actions = {\n\n  createZtree({commit, dispatch}, newTree){\n    newZtree(newTree)\n    commit('setZtree', newTree);\n    dispatch('canvas/showCanvasAxes')\n  },\n\n  rebuildZtree({commit, dispatch}, newTree){\n    CanvasScene.unanimate()\n    ztree.illustration.children = newTree.illustration.children\n    ztree.nodeMap = newTree.nodeMap\n    ztree.relationMap = newTree.relationMap\n    ztree.illustration.updateRenderGraph();\n\n    CanvasScene.ghostCanvas.pruneGhost();\n    CanvasScene.unitAxes.addTo(CanvasScene.illustration);\n    CanvasScene.animate()\n\n    commit('setZtree', true);\n    //dispatch('canvas/showCanvasAxes')\n    dispatch('treeview/changeList')\n    dispatch('properties/changeDisplay')\n  },\n\n  newIllustration({dispatch, commit, state}, payload){\n    if (!payload) { payload = {}}\n    unregisterEvents()\n    dispatch('createZtree', payload)\n    commit('setIllustration', true)\n    initCanvasScene(state)\n    \n    CanvasScene.on('selectshape', (e)=>{\n      dispatch('changeSelected', e.detail.id)\n    })\n    CanvasScene.on('deselect', ()=>{\n      dispatch('changeSelected', null)\n    })\n    registerEvents()\n  },\n\n  demoJSON({dispatch}, payload){\n    let Reader = new Zdogger.Reader(payload);\n    dispatch('changeSelected', null)\n    dispatch('treeview/resetView')\n    dispatch('newIllustration', Reader.tree)\n  },\n\n  changeSelected({commit, dispatch, state}, id){\n    if (state.selected == id) return;\n    //click handler here?\n    commit('setSelected', id);\n    if (!id) {\n      dispatch('treeview/clearSelected')\n      dispatch('properties/reset')\n      return;\n    }\n\n    dispatch('properties/changeDisplay')\n  },\n\n  pause({commit}, bool){\n\n    if (CanvasScene) {\n      if (bool) {\n        CanvasScene.unanimate()\n      } else {\n        CanvasScene.animate()\n      }\n    }\n\n    commit('setPause', bool)\n  },\n\n  exportTree(){\n    //save current ztree TODO\n    new Zdogger.Reader(ztree).download();\n  },\n\n  async importTree({dispatch}){\n    //save current ztree TODO\n    let newTree = await new Zdogger.Reader().load();\n    dispatch('changeSelected', null)\n    dispatch('treeview/resetView')\n    //commit('resetState');\n\n    dispatch('newIllustration', newTree)\n  },\n}\n\n// mutations\nconst mutations = {\n\n  setZtree(state, arg){\n    if (!arg) {\n      state.treeLoaded = false;\n      initCanvasScene(null)\n      return}\n    state.updateTree = !state.updateTree;\n    state.treeLoaded = true;\n  },\n\n  setIllustration(state, arg){\n    if (!arg) state.illustration = null;\n    state.illustration = ztree.illustration.id\n  },\n\n  setPause(state, bool){\n    state.paused = bool;\n  },\n\n  setSelected(state, id){\n    state.selected = id;\n  },\n\n  resetState(state) {\n    // Merge rather than replace so we don't lose observers\n    // https://github.com/vuejs/vuex/issues/1118\n    Object.assign(state, getDefaultState())\n  }\n}\n\n//Export the ztree and import in other modules that will need to access its properties\nexport{ztree, CanvasScene}\n\nimport treeview from './modules/treeview'\nimport properties from './modules/properties'\nimport canvas from './modules/canvas'\nimport history, {undoRedoPlugin, undoRedoHistory} from './modules/history'\nimport { ifStatement } from '@babel/types';\n\nlet plugins = [undoRedoPlugin]\n\ndebug ? plugins.push(createLogger()) : null;\n\nexport default createStore({\n  modules: {\n    treeview,\n    properties,\n    canvas,\n    history,\n  },\n  state,\n  getters,\n  mutations,\n  actions,\n  //strict: debug,\n  plugins: plugins\n})","<template>\n  <main @click=\"deselect\">\n    <TopBar\n      ref=\"menuTopbar\"\n    />\n    <div\n      class=\"split-grid overlay\"\n    >\n      <div\n        ref=\"treeview\"\n        class=\"split-column tree-view\n          no-select\"\n      >\n        <TreeView/>\n      </div>\n      <div\n        ref=\"gutter1\"\n        class=\"gutter-column-1\"\n      />\n      <div class=\"split-column\" ref=\"canvasWrapper\">\n        <Canvas />\n      </div>\n      <div\n        ref=\"gutter2\"\n        class=\"gutter-column-2\"\n      />\n      <div class=\"split-column properties\">\n        <PropertyPanel ref=\"menuPropertyPanel\" />\n      </div>\n    </div>\n  </main>\n</template>\n\n<script>\nimport {ref, onMounted, } from 'vue' // onUpdated, onUnmounted\nimport { mapState, mapActions} from 'vuex'// mapActions \n\nimport TopBar from './components/menu/TopBar.vue'\nimport PropertyPanel from './components/menu/PropertyPanel.vue'\nimport TreeView from './components/menu/TreeView.vue'\nimport Canvas from './components/Canvas.vue'\n\nimport Split from 'split-grid'\n\nexport default {\n  name: 'App',\n  components: {\n    TopBar,\n    PropertyPanel,\n    TreeView,\n //   TreeTest,\n    Canvas,\n  },\n  setup(){\n    const gutter1 = ref(null);\n    const gutter2 = ref(null);\n\n    onMounted(()=>{\n        window.split = Split({\n        columnGutters: [{\n          track: 1,//index of element to resize\n          element: gutter1.value,\n        }, {\n          track: 3,\n          element: gutter2.value,\n        }],\n        // onDragEnd: (direction, track) => {\n        //   if (track == 1){\n        //     Treeview.value.clientWidth\n        //     //truncEllipse(text, max)\n        //   }\n        // }\n      /**Horizontal gutters */\n        // rowGutters: [{\n        //   track: 1,\n        //   element: this.$refs.menuPropertyPanel,\n        // }]\n      })\n\n    })\n\n    return {\n        gutter1,\n        gutter2,\n      }\n  },\n  data(){\n    return {\n      bWarning:false,\n      isClickInsideEvent:null,\n    }\n  },\n  computed:{\n    ...mapState([\n      'selected'\n    ]),\n  },\n  methods:{\n    ...mapActions([\n      'changeSelected'\n    ]),\n    getRef(refName){\n      return this.$refs[refName];\n    },\n    deselect(event){\n      if (!this.selected) return;\n        var isClickInside = this.$refs.treeview.contains(event.target);\n        \n        if (isClickInside) {\n          //the click inside the element\n          this.changeSelected(null);\n        }\n    },\n    logSelected(){\n      console.log(this.$store.getters['selectedNode'])\n    }\n  },\n}\n</script>\n\n<style>\n@import './assets/root.css';\n\nh1,h2,h3,h4,h5{\n  margin:0.5rem 0.5rem 0.7rem 0.5rem\n}\n\n#app {\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  overflow:hidden;\n}\n\n.split-grid{\n  display:grid;\n  grid-template-columns: 1fr 6px 2fr 6px 1fr; /*define column and gutter widths here*/\n  border-collapse:collapse;\n  z-index:var(--zCanvas);\n}.split-grid.overlay{\n  position:relative;\n  top:0;\n  width:100vw;\n  height:var(--canvasHeight);\n}\n\n.split-column {\n  overflow: auto;\n  width: 100%;\n}.split-column.tree-view, .split-column.properties{\n  background-color:rgb(255,255,255);\n  position:relative;\n  z-index:var(--zPanel)\n}\n\n[class^='gutter'] {\n  position:relative;\n  background-color:#616161;\n  background-repeat: no-repeat;\n  background-position: 50%;\n  cursor: col-resize;\n  z-index:var(--zPanel)\n}\n\n[class^='gutter']:before {\n  content:'...';\n  color:#ebebeb;\n  line-height:0;\n  font-size: 20px;\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  font-family:Arial, sans-serif;\n}\n\n[class^='gutter-column']:before{\n  top:0;\n  right:-2.5px;\n  width:3px;\n  height:calc(100% - 3ch);\n  writing-mode: vertical-rl;\n}\n\nul{\n  margin:0;\n  padding:0;\n  list-style-type:none;\n}\n\n.row{\n  display:flex;\n  flex-direction:row;\n  flex-wrap:wrap;\n  justify-content:center;\n}\n\n.col{\n  display:flex;\n  flex-direction:column;\n  flex-wrap:wrap;\n  justify-content:center;\n}\n\n[class*=\"between-\"]{\n  justify-content:space-between;\n}\n\n.text-display-type{\n  font-variant: small-caps;\n  color: var(--colorMain);\n  font-size: 0.9em;\n}\n\n.no-select{\n  user-select: none;\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  -ms-user-select: none;\n}\n\n.hidden{\n  visibility:hidden;\n  display:none;\n}\n</style>\n","<template>\n  <div class=\"toolbar row\">\n    <button @click=\"settings\">\n      Settings\n    </button>\n    <button v-if=\"hasIllustration\"\n      @click=\"exportTree\">\n      Export\n    </button>\n    <button @click=\"importing\">\n      Import\n    </button>\n    <div\n      :aria-label=\"`Create new`\"\n      tabIndex=\"0\"\n    >\n      <button\n        v-for=\"(item,index) in creatables\"\n        :key=\"`${item}_${index}`\"\n        :aria-label=\"item\"\n        :class=\"{\n          'hidden': (item != 'illustration' && !hasIllustration)\n        }\"\n        @click=\"promptCreate\"\n      >\n        +{{ item }}\n      </button>\n    </div>\n  </div>\n  <teleport to=\"body\">\n    <Modal\n      v-if=\"!bWarning && hasIllustration && creationItemType\"\n      @close=\"cancelPrompt\"\n    >\n      <Creation\n        :itemtype=\"creationItemType\"\n        @close-prompt=\"cancelPrompt\"\n      />\n    </Modal>\n    <Modal\n      v-if=\"bWarning && hasIllustration\"\n      @close=\"cancelPrompt\"\n    >\n      <p>WARNING: Are you sure you want to replace the current illustration?</p>\n      <button @click=\"closeWarning\">\n        Yes\n      </button>\n      <button @click=\"cancelPrompt\">\n        Cancel\n      </button>\n    </Modal>\n    <Modal\n      v-if=\"bSettings\"\n      @close=\"cancelPrompt\"\n    >\n    <Settings\n      @close-prompt=\"cancelPrompt\"\n    />\n    </Modal>\n  </teleport>\n</template>\n\n<script>\n//import Zdog from 'zdog'\nimport {mapActions} from 'vuex'// mapActions \nimport {ZCLASS} from '../../zdogger/ztree'\n\nimport Modal from '../Modal.vue'\nimport Creation from '../Creation.vue'\nimport Settings from './Settings.vue'\n\nexport default {\n  name: 'TopBar',\n  components:{\n  Modal,\n  Creation,\n  Settings\n  },\n  emits: ['create-new'],\n\n  data(){\n    return {\n      bImporting:false,\n      creationItemType: null,\n      bWarning:false,\n      bSettings:false\n    }\n  },\n  computed:{\n    illustration(){\n      return this.$store.state.illustration\n    },\n    hasIllustration() {\n      return (!!this.illustration)\n    },\n    creatables(){\n      let c = [...ZCLASS.NAMES];\n      return c.filter(name=>{\n        return (name != \"dragger\" && name != \"vector\")\n      })\n    },\n    currentSettings(){\n      return this.$store.state.canvas.settings\n    }\n  },\n  methods:{\n    ...mapActions([\n      'newIllustration',\n      'exportTree',\n      'importTree'\n    ]),\n    promptCreate(event){\n      let ItemType = event.target.getAttribute('aria-label');\n      if(!this.hasIllustration){\n        this.newIllustration();\n        return;\n      } else if (ItemType == \"illustration\") {\n        this.bWarning = true;\n      }\n      this.creationItemType = ItemType;\n    },\n    confirmNewIllustration(){\n      this.newIllustration();\n      this.bWarning = false;\n    },\n    cancelPrompt(){\n      this.creationItemType = null;\n      this.bWarning = false;\n      this.bSettings = false;\n    },\n    closeWarning(){\n      this.bWarning = false;\n      if (this.bImporting){\n        this.importTree();\n      }\n    },\n    importing(){\n      this.bImporting = true;\n      if (this.hasIllustration){\n        this.bWarning = true;\n      } else {\n        this.importTree();\n        this.bImporting = false;\n      }\n    },\n\n    settings(){\n      this.bSettings = true;\n    },\n    saveSettings(){\n      this.$store.state.canvas\n    },\n    defaultSettings(){\n\n    }\n  },\n}\n</script>\n\n<style>\n.toolbar{\n  position:relative;\n  border:1px solid black;\n  height:var(--menuTopBarHeight);\n  z-index:var(--zTopBar);\n}\n\n.toolbar button{\n  text-transform:capitalize;\n}\n</style>\n","<template>\n  <div class=\"modal\"\n    @keydown=\"keydownHandler\">\n    <div\n      class=\"dimmer\"\n      @click=\"close\"\n    />\n    <button\n      class=\"close\"\n      @click=\"close\"\n    >\n      X\n    </button>\n    <figure ref=\"figure\" tabIndex=\"0\">\n      <slot />\n    </figure>\n  </div>\n</template>\n\n<script>\nimport ClickOutsideTrigger from './ClickOutsideTriggerMixin'\n\nexport default {\n  name: 'Modal',\n  mixins:[ClickOutsideTrigger],\n\n  mounted(){\n    this.$refs.figure.focus();\n    this.$store.dispatch('pause', true)\n  },\n  unmounted(){\n    this.$store.dispatch('pause', false)\n  }\n}\n</script>\n\n<style scoped>\n.modal{\n  position:fixed;\n  top:0;\n  left:0;\n  width:100vw;\n  height:100vh;\n  justify-content:center;\n  align-items:center;\n  z-index:var(--zModal);\n  display:flex;\n}\n.modal.active{\n\n  visibility:visible;\n  opacity:1;\n}\n\n\n.dimmer{\n  position:absolute;\n  top:0;\n  left:0;\n  width:100%;\n  height:100%;\n  background-color:rgba(0,0,0,0.5);\n  transition:all 300ms linear;\n  z-index:1;\n}\n\n.close{\n  position:absolute;\n  top:0;\n  right:0rem;\n  background-color:rgba(255,255,255,0.7);\n  z-index:3;\n}\n\nfigure{\n  margin:0 auto;\n  position:relative;\n  min-height:50vh;\n  width:98vw;\n  max-width:var(--paragraph);\n  padding:1rem;\n  background-color:var(--modalBGColor);\n  border-radius:3px;\n  z-index:2;\n}\n</style>","const ClickOutsideTrigger = {\n\n  emits:['close'],\n  data(){\n    return{\n      isActive:false\n    }\n  },\n  methods:{\n    close(){\n      this.$emit('close')\n    },\n    keydownHandler(e){\n      if (e.key == \"Escape\"){\n        this.close();\n      }\n    }\n  }\n}\n\nexport default ClickOutsideTrigger","import { render } from \"./Modal.vue?vue&type=template&id=37953d71&scoped=true\"\nimport script from \"./Modal.vue?vue&type=script&lang=js\"\nexport * from \"./Modal.vue?vue&type=script&lang=js\"\n\nimport \"./Modal.vue?vue&type=style&index=0&id=37953d71&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/kibble/repos/experimental/zdog-scope/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-37953d71\"]])\n\nexport default __exports__","<template>\n  <div v-if=\"itemtype\">\n    <h2>Create new {{ itemtype }}</h2>\n    <div v-if=\"bWarning\">\n      Warning: fields that failed validation:\n      <p\n        v-for=\"f in invalidFields\"\n        :key=\"f\"\n      >\n        {{ f }} needs a\n        {{ validSchema[f].type }}\n      </p>\n      <p>Please fix them before proceeding.</p>\n    </div>\n    <form class=\"field-list\">\n      <div class=\"row\">\n        <label class=\"input-name\">\n          <input\n            v-model=\"wipAssignedName\"\n            type=\"text\"\n            placeholder=\"untitled\"\n          >\n        </label>\n      </div>\n      <div class=\"row between-\">\n        <!-- <div\n          v-if=\"!bBlank\"\n          class=\"field-list radio\"\n        >\n          Append to:\n          <label\n            v-if=\"selected.id\"\n            for=\"append_selected\"\n          >\n            <input\n              id=\"append_selected\"\n              v-model=\"appendTo\"\n              type=\"radio\"\n              name=\"appendto\"\n              value=\"selected\"\n              checked\n            >\n            Selected\n            <br>(id: {{ selected.id }})\n          </label>\n          <label for=\"append_choose\">\n            <input\n              id=\"append_choose\"\n              v-model=\"appendTo\"\n              type=\"radio\"\n              name=\"appendto\"\n              value=\"choose\"\n            >\n            Choose<br>\n            <select />\n          </label>\n          <label for=\"append_none\">\n            <input\n              id=\"append_none\"\n              v-model=\"appendTo\"\n              type=\"radio\"\n              name=\"appendto\"\n              value=\"nothing\"\n            >\n            None\n          </label>\n        </div> -->\n\n\n        <div class=\"field-list col\" v-if=\"numProps(mainProps).length > 0\">\n          <InputLabel v-for=\"(field) in numProps(mainProps)\"\n            :key=\"`${field}_creation`\"\n            :for=\"`${field}_creation`\"\n            :id=\"`${field}_creation`\"\n            element=\"input\"\n            v-model=\"wipOptions[field]\"\n            type=\"number\"\n            step=0.1\n            :placeholder=\"optionDefault(field)\"\n            :name=\"field\"\n            @input=\"wipOptions[field] = $event.target.value\"\n          >\n            {{ capitalize(field) }}:\n          </InputLabel>\n        </div>\n        <div class=\"col\" v-if=\"colorProps(mainProps).length > 0\">\n          <span v-for=\"field in colorProps(mainProps)\" :key=\"field\">\n            {{ capitalize(field) }}\n            <ColorPicker \n            @update=\"updateColor(field, $event)\"\n            />\n          </span>\n        </div>\n      <div class=\"row\" v-if=\"vectorProps(mainProps).length > 0\">\n        <InputVector\n          v-for=\"field in vectorProps(mainProps)\"\n          :id=\"`${field}_creation`\"\n          :key=\"`${field}_creation`\"\n          :value=\"optionDefault(field)\"\n          :degrees=\"(field == 'rotate')\"\n        >\n          {{ capitalize(field) }}\n        </InputVector>\n        <div class=\"field-list col\">\n          <label\n            v-for=\"(field) in boolProps(mainProps)\"\n            :key=\"`${field}_creation`\"\n            :for=\"`${field}_creation`\"\n          >\n            {{ capitalize(field) }}\n            <input\n              :id=\"`${field}_creation`\"\n              v-model=\"wipOptions[field]\"\n              type=\"checkbox\"\n              :checked=\"optionDefault(field)\"\n            >\n          </label>\n        </div>\n      </div>\n\n\n        <div class=\"field-list col\" v-if=\"numProps(miscProps).length > 0\">\n          <InputLabel v-for=\"(field) in numProps(miscProps)\"\n            :key=\"`${field}_creation`\"\n            :for=\"`${field}_creation`\"\n            :id=\"`${field}_creation`\"\n            element=\"input\"\n            v-model=\"wipOptions[field]\"\n            type=\"number\"\n            step=0.1\n            :placeholder=\"optionDefault(field)\"\n            :name=\"field\"\n            @input=\"wipOptions[field] = $event.target.value\"\n          >\n              {{ capitalize(field) }}:\n          </InputLabel>\n        </div>\n        <div class=\"col\" v-if=\"colorProps(miscProps).length > 0\">\n          <span v-for=\"field in colorProps(miscProps)\" :key=\"field\">\n            {{ capitalize(field) }}\n            <ColorPicker \n            @update=\"updateColor(field, $event)\"\n            />\n          </span>\n        </div>\n      <div class=\"row\" v-if=\"vectorProps(miscProps).length > 0\">\n        <InputVector\n          v-for=\"field in vectorProps(miscProps)\"\n          :id=\"`${field}_creation`\"\n          :key=\"`${field}_creation`\"\n          :default=\"optionDefault(field)\"\n          :degrees=\"(field == 'rotate')\"\n        >\n          {{ capitalize(field) }}\n        </InputVector>\n        <div class=\"field-list col\" v-if=\"boolProps(miscProps).length > 0\">\n          <label\n            v-for=\"(field) in boolProps(miscProps)\"\n            :key=\"`${field}_creation`\"\n            :for=\"`${field}_creation`\"\n          >\n            {{ capitalize(field) }}\n            <input\n              :id=\"`${field}_creation`\"\n              v-model=\"wipOptions[field]\"\n              type=\"checkbox\"\n              :checked=\"optionDefault(field)\"\n            >\n          </label>\n\n          <Backface\n            id=\"backface_create\"\n            :threeD=\"isThreeD\"\n            :checked=\"optionDefault('backface')\"\n            @update=\"updateColor('backface', $event)\"\n            />\n        </div>\n      </div>\n\n\n\n\n      </div>\n\n\n    </form>\n    <button @click=\"submit\">\n      Create\n    </button>\n  </div>\n</template>\n\n<script>\nimport {mapActions, mapState, mapGetters} from 'vuex'\nimport ZdogJSONSchema from '../zdogobjects.json'\n\nimport InputVector from './menu/controls/InputVector'\nimport ColorPicker from './menu/controls/ColorPicker'\nimport Backface from './menu/controls/Backface'\nimport InputLabel from './menu/controls/InputLabel'\n\nimport {StringMixin, propsFor} from '../zdogger'\n\nexport default {\n  name: 'Creation',\n  components:{\n    InputVector,\n    ColorPicker,\n    Backface,\n    InputLabel\n  },\n  mixins:[StringMixin],\n  props: {\n    itemtype:{\n      type:String,\n      default:null\n    }\n  },\n  emits:['close-prompt'],\n\n  data(){\n    return{\n      wipOptions:{},\n      wipAssignedName: null,\n      appendTo:'selected',\n    }\n  },\n  methods:{\n    ...mapActions({\n        newZdogObject:'history/newZdog', //argument should be in format {type:int, options:{}}\n        validateFields:'properties/validateFields',\n        newIllustration:'newIllustration',\n        validationReset:'properties/validationReset'\n    }),\n    async submit(){\n      await this.validateFields(this.wipOptions);\n      if (this.validationSuccess){\n        this.createNew();\n      }\n    },\n    createNew(){\n      let options = Object.assign({},this.wipOptions);\n      let temp = {\n        type: this.itemtype,\n        options:options,\n        name:this.wipAssignedName\n        }\n      if (this.itemtype == 'illustration') {\n        this.newIllustration(temp)\n      } else {\n        if (this.selected) {\n          temp.options.addTo = this.selected;\n        }\n        this.newZdogObject(temp)\n      }\n      this.$emit('close-prompt');\n    },\n    optionDefault(field){\n      return ZdogJSONSchema.optionValidator[field].default;\n    },\n    updateColor(field, newColor){\n      this.wipOptions[field] = newColor;\n    },\n    numProps(arr){\n      let u = arr.filter(prop=>{\n        return this.NUM_PROPS.includes(prop)\n      })\n      return u\n    },\n    boolProps(arr){\n      return arr.filter(prop=>{\n        return (this.BOOL_PROPS.includes(prop) && prop != 'backface')\n      })\n    },\n    vectorProps(arr){\n      return arr.filter(prop=>{\n        return this.VECTOR_PROPS.includes(prop)\n      })\n    },\n    colorProps(arr){\n      return arr.filter(prop=>{\n        return this.COLOR_PROPS.includes(prop)\n      })\n    },\n    log(e){\n      console.log(e.target.value)\n      console.log(this.wipOptions)\n    }\n  },\n  computed:{\n    ...mapState({\n        invalidFields: state => state.properties.invalidFields,\n        validationSuccess:state => state.properties.validationSuccess,\n        selected:state => state.selected,\n    }),\n    ...mapGetters('properties',[\n        'BOOL_PROPS',\n        'VECTOR_PROPS',\n        'COLOR_PROPS',\n        'NUM_PROPS',\n        'CREATE_PROPS',\n        'validationFailed'\n    ]),\n    mainProps(){\n      return this.CREATE_PROPS[this.itemtype];\n    },\n    miscProps(){\n      return propsFor(this.itemtype).filter(prop=>{\n        return !this.mainProps.includes(prop)\n      })\n    },\n    validSchema(){\n      return ZdogJSONSchema.optionValidator;\n    },\n    bWarning:{\n      get(){\n        return this.validationFailed;\n        },\n      set(newVal){\n        if (newVal == false) {\n          this.validationReset();\n        }\n      }\n    },\n    isThreeD(){\n      return this.itemtype == 'cylinder' || this.itemtype == 'hemisphere'\n      || this.itemtype == 'cone'\n    }\n  },\n  watch:{\n    itemtype(){\n      this.wipOptions = {};\n    }\n  },\n}\n</script>\n\n<style scoped>\n@import '../assets/fieldinput.css';\n\n.field-list .radio{\n  align-items:flex-start;\n  text-align:left;\n}\n</style>","<template>\n  <div\n    v-if=\"degrees\"\n    class=\"input-vector degrees\"\n  >\n    <div class=\"title\">\n      <slot />\n    </div>\n\n    <InputVectorTooltip\n      id=\"degrees\"\n      label=\"x\"\n      :value=\"toDeg(value.x)\"\n      :placeholder=\"defaultVal.x\"\n      @changev=\"tooltipChange('x', $event)\"\n      />\n\n    <InputVectorTooltip\n      id=\"degrees\"\n      label=\"y\"\n      :value=\"toDeg(value.y)\"\n      :placeholder=\"defaultVal.y\"\n      @changev=\"tooltipChange('y', $event)\"\n      />\n\n    <InputVectorTooltip\n      id=\"degrees\"\n      label=\"z\"\n      :value=\"toDeg(value.z)\"\n      :placeholder=\"defaultVal.z\"\n      @changev=\"tooltipChange('z', $event)\"\n      />\n  </div>\n  <div v-else\n    class=\"input-vector\"\n  >\n    <div class=\"title\">\n      <slot />\n    </div>\n    <label :for=\"`${id}x`\">\n      x:\n      <input\n        :id=\"`${id}z`\"\n        :value=\"value.x\"\n        type=\"number\"\n        name=\"x\"\n        autocomplete=\"off\"\n        :placeholder=\"defaultVal.x\"\n        :step=\"step\"\n        @change=\"inputChange('x', $event)\"\n      >\n    </label>\n\n    <label :for=\"`${id}y`\">\n      y:\n      <input\n        :id=\"`${id}y`\"\n        :value=\"value.y\"\n        type=\"number\"\n        name=\"y\"\n        autocomplete=\"off\"\n        :placeholder=\"defaultVal.y\"\n        :step=\"step\"\n        @change=\"inputChange('y', $event)\"\n      >\n    </label>\n    <label :for=\"`${id}z`\">\n      z:\n      <input\n        :id=\"`${id}z`\"\n        :value=\"value.z\"\n        type=\"number\"\n        name=\"z\"\n        autocomplete=\"off\"\n        :placeholder=\"defaultVal.z\"\n        :step=\"step\"\n        @change=\"inputChange('z', $event)\"\n      >\n    </label>\n  </div>\n</template>\n\n<script>\nimport InputVectorTooltip from './InputVectorTooltip'\n\nexport default {\n  name: 'InputVector',\n  components:{InputVectorTooltip},\n  props: {\n    id:{\n      type:String,\n      default:null\n    },\n    type:{\n      type:String,\n      default:'translate'\n    },\n    value:{\n      type:Object,\n      default:()=>({x:0,y:0,z:0})\n    },\n  },\n  emits:['send-coords', 'open-tooltip'],\n  mounted(){\n    this.euler = this.defaultVal;\n  },\n  data(){\n    return{\n      euler:{\n        x:null,\n        y:null,\n        z:null\n      },\n      editx:false,\n      edity:false,\n      editz:false\n    }\n  },\n  computed:{\n    defaultVal(){\n      let d = this.value\n      if (typeof d == 'string') {\n        d = JSON.parse(d)\n      }\n      if (this.degrees){\n        let temp = Object.assign({}, d);\n        Object.keys(temp).map(coord=>{\n          Math.trun\n          temp[coord] = this.toDeg(temp[coord]);\n          this.euler[coord] = temp[coord];\n        })\n        return temp\n      }\n      return d\n    },\n    degrees(){\n      return this.type == 'rotate'\n    },\n    step(){\n      if (this.type == 'scale') {\n        return 0.01\n      }\n      return 0.1\n    }\n  },\n\n  methods:{\n    sendCoords(e){\n      let newVal = e.target.value;\n      if (newVal == e.target.placeholder || newVal == \"\") return;\n\n      this.emitCoords();\n    },\n    toRad(degrees){\n      return (Math.PI * degrees) / 180;\n    },\n    toDeg(radians){\n      let raw = (180 * radians) / Math.PI;\n       // round to 3 decimal places\n       //let d = Math.round(raw * 1000) / 1000;\n      return Math.round(raw)\n    },\n    emitCoords(){\n      let temp = Object.assign({}, this.euler);\n      Object.keys(temp).forEach((key) => {\n        if (temp[key] == null) {\n           delete temp[key]\n        } else {\n          if(this.degrees) {\n            let d = Number(temp[key]) % 360;\n            temp[key] = this.toRad(d);\n          } else {\n            temp[key] = Number(temp[key]);\n          }\n        }\n      });\n     this.$emit('send-coords', temp);\n    },\n    editDegrees(coord){\n      this.stopEditDegrees();\n      this.$emit('open-tooltip');\n      if (coord == 'x'){\n        this.editx = true;\n      } else if (coord == 'y'){\n        this.edity = true;\n      } else if (coord == 'z'){\n        this.editz = true;\n      }\n    },\n    stopEditDegrees(){\n        this.editx = false;\n        this.edity = false;\n        this.editz = false;\n    },\n    closeTooltip(){\n      this.stopEditDegrees();\n    },\n    inputChange(p, evt){\n      this.euler[p] = evt.target.value;\n      this.emitCoords();\n    },\n    tooltipChange(p, e){\n      this.euler[p] = e;\n      this.emitCoords();\n    }\n  }\n}\n</script>\n\n<style>\n.input-vector{\n  position:relative;\n  display:flex;\n  flex-flow:column nowrap;\n  margin:0.4rem 0.5rem 0.6rem 0.5rem;\n  align-items:flex-end;\n  padding-bottom:0.5rem;\n}\n\n.input-vector .title{\n  width:100%;\n}\n\n.input-vector label{\n  position:relative;\n}\n\n.input-vector input{\n  max-width:7ch;\n}\n\n\n.input-coord:hover .degree-range, .degrees input[type=\"text\"]:focus + .degree-range,\n.degree-range.editing{\n  display:flex;\n}\n</style>","<template>\n  <div class=\"input-coord\">\n   <label\n      :for=\"`${id}${label}`\"\n      :class=\"{'z100':editing}\"\n    >\n      {{label}}:\n      <input\n        :id=\"`${id}${label}`\"\n        class=\"input-degrees\"\n        :value=\"value\"\n        type=\"number\"\n        :name=\"label\"\n        autocomplete=\"off\"\n        :placeholder=\"placeholder\"\n        @change=\"changeV\"\n        @click=\"open\"\n      >\n      &#176;\n      </label>\n      <Tooltip v-if=\"editing\"\n        @close=\"close\">\n        <div\n          class=\"degree-range\"\n        >\n          <label>{{ `${min}&#176;` }}</label>\n          <input\n            :value=\"value\"\n            type=\"range\"\n            :min=\"min\"\n            :max=\"max\"\n            @change=\"changeV\"\n          >\n          <label>{{ `${max}&#176;` }}</label>\n        </div>\n      </Tooltip>\n  </div>\n</template>\n\n<script>\nimport Tooltip from './Tooltip'\nimport ClickOutsideTrigger from '../../ClickOutsideTriggerMixin'\n\nexport default {\n  name: 'InputVectorTooltip',\n  components:{Tooltip},\n  mixins:[ClickOutsideTrigger],\n  emits:['changev'],\n  props:{\n    id:String,\n    label:String,\n    value:Number,\n    placeholder:Number\n  },\n\n  data(){\n    return{\n      editing:false\n    }\n  },\n  computed:{\n    min(){\n      return 0;\n    },\n    max(){\n      return 360;\n    }\n  },\n\n  methods:{\n    changeV(e){\n      this.$emit('changev', e.target.value)\n    },\n    close(){\n      this.editing = false;\n    },\n    open(){\n      this.editing = true;\n    }\n  }\n}\n</script>\n\n<style>\n.input-coord{\n  position:relative;\n}\n\n.z100{\n  z-index:100;\n}\n\n.degree-range{\n  display:flex;\n  flex-flow:row nowrap;\n  background-color:var(--colorPri);\n  padding:0.1rem;\n  font-size:0.5rem;\n  border-radius:var(--borderRadius);\n  bottom:-1.9rem;\n  left:0;\n}\n\n.input-degrees{\n  max-width:6ch;\n}\n\n.degree-range input[type=\"range\"]{\n  max-width:13ch;\n}\n</style>","<template>\n  <div class=\"tooltip-wrapper\">\n    <div class=\"closer\"\n      @click=\"close\" />\n    <div class=\"tooltip-popover\">\n      <slot/>\n    </div>\n  </div>\n</template>\n\n<script>\nimport ClickOutsideTrigger from '../../ClickOutsideTriggerMixin'\n\nexport default {\n  name: 'Tooltip',\n  mixins:[ClickOutsideTrigger],\n}\n</script>\n\n<style>\n.tooltip-wrapper{\n  position:absolute;\n}\n\n.tooltip-wrapper .closer{\n  position:fixed;\n  top:0;\n  left:0;\n  width:100%;\n  height:100%;\n  background-color:transparent;\n  transition:all 300ms linear;\n  z-index:1;\n}\n\n.tooltip-wrapper .tooltip-popover{\n  position:relative;\n  z-index:var(--zTooltip);\n  background-color:white;\n}\n\n</style>","import { render } from \"./Tooltip.vue?vue&type=template&id=658c95b6\"\nimport script from \"./Tooltip.vue?vue&type=script&lang=js\"\nexport * from \"./Tooltip.vue?vue&type=script&lang=js\"\n\nimport \"./Tooltip.vue?vue&type=style&index=0&id=658c95b6&lang=css\"\n\nimport exportComponent from \"/home/kibble/repos/experimental/zdog-scope/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./InputVectorTooltip.vue?vue&type=template&id=926bbd34\"\nimport script from \"./InputVectorTooltip.vue?vue&type=script&lang=js\"\nexport * from \"./InputVectorTooltip.vue?vue&type=script&lang=js\"\n\nimport \"./InputVectorTooltip.vue?vue&type=style&index=0&id=926bbd34&lang=css\"\n\nimport exportComponent from \"/home/kibble/repos/experimental/zdog-scope/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./InputVector.vue?vue&type=template&id=26e33402\"\nimport script from \"./InputVector.vue?vue&type=script&lang=js\"\nexport * from \"./InputVector.vue?vue&type=script&lang=js\"\n\nimport \"./InputVector.vue?vue&type=style&index=0&id=26e33402&lang=css\"\n\nimport exportComponent from \"/home/kibble/repos/experimental/zdog-scope/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div class=\"picker-wrapper\">\n    <a class=\"picker-button\"\n      @click=\"open\">\n      <div class=\"patch\" :style=\"{'backgroundColor': wipColor}\"\n        @click=\"toggle\">\n      </div>\n      <input type=\"text\"\n        aria-label=\"colorpicker\"\n        v-model=\"wipColor\"\n        @change=\"colorEnter\"\n        @blur=\"close\"/>\n    </a>\n    <figure v-if=\"isActive\" class=\"picker\" ref=\"picker\" />\n  </div>\n</template>\n\n<script>\n//import {ref, onMounted} from 'vue' // onUpdated, onUnmounted\nimport iro from '@jaames/iro';\n\n\nexport default {\n  name: 'ColorPicker',\n  props: {\n    color:{\n      type:String,\n      default:'#333'\n    }\n  },\n  emits:['close', 'update'],\n\n  data(){\n    return{\n      colorPicker:null,\n      isActive:false,\n      wipColor:this.color\n    }\n  },\n  methods:{\n    open(){\n      if (this.isActive) return;\n      this.isActive = true;\n      this.$nextTick(()=>{\n        this.wipColor = this.color;\n        this.mountPicker();\n      })\n    },\n    close(){\n      this.isActive = false;\n    },\n    toggle(e){\n      e.stopPropagation();\n      e.preventDefault()\n      if (!this.isActive) {\n        this.open()\n      } else {\n        this.close();\n      }\n    },\n    colorEnter(e){\n      this.colorPicker.color.set(e.target.value);\n      this.wipColor = this.colorPicker.color.rgbaString\n      this.$emit('update', this.wipColor);\n    },\n    mountPicker(){\n      let cxt = this;\n      cxt.colorPicker = new iro.ColorPicker(cxt.$refs.picker, {\n        color: cxt.color,\n        width:200,\n        layout: [\n            { \n              component: iro.ui.Box,\n            // options: {}\n            },\n            { \n              component: iro.ui.Slider,\n              options: {\n                // can also be 'saturation', 'value', 'red', 'green', 'blue', 'alpha' or 'kelvin'\n                sliderType: 'hue'\n              }\n            },\n            { \n              component: iro.ui.Slider,\n              options: {\n                // can also be 'saturation', 'value', 'red', 'green', 'blue', 'alpha' or 'kelvin'\n                sliderType: 'alpha'\n              }\n            },\n          ]\n      })\n      \n      cxt.colorPicker.on('color:change', function(color) {\n            cxt.wipColor = color.rgbaString\n        });\n\n      cxt.colorPicker.on('input:end', function(color){\n        cxt.$emit('update', color.rgbaString)\n      })\n    },\n  },\n}\n</script>\n\n<style>\n\n.picker-wrapper{\n  position:relative;\n}\n\n.picker{\n  position:absolute;\n  margin:0;\n  top:2rem;\n  left:50%;\n  transform:translateX(-50%);\n  background-color:rgba(255,255,255,0.9);\n  padding:0.5rem;\n  z-index:var(--zPanel)\n}\n\na.picker-button{\n  display:flex;\n  flex-flow:row nowrap;\n  line-height:1rem;\n  background-color:transparent;\n  border:none;\n  align-items:center;\n}\n\n.picker-wrapper input{\n  height:1.3rem;\n}\n\n.patch{\n  border-radius:50% 50%;\n  width:1.5rem;\n  height:1.5rem;\n  margin:0.1rem 0.3rem;\n}\n</style>","import { render } from \"./ColorPicker.vue?vue&type=template&id=5f665e48\"\nimport script from \"./ColorPicker.vue?vue&type=script&lang=js\"\nexport * from \"./ColorPicker.vue?vue&type=script&lang=js\"\n\nimport \"./ColorPicker.vue?vue&type=style&index=0&id=5f665e48&lang=css\"\n\nimport exportComponent from \"/home/kibble/repos/experimental/zdog-scope/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n<div class=\"col\">\n  <label\n    :for=\"id\"\n  >\n    Backface\n    <input\n      :id=\"id\"\n      type=\"checkbox\"\n      v-model=\"bChecked\"\n      @change=\"change\"\n    >\n    </label>\n    <ColorPicker v-if=\"bChecked && threeD\"\n    :color=\"color\"\n    @update=\"update\"\n    />\n</div>\n</template>\n\n<script>\nimport ColorPicker from './ColorPicker.vue'\n\nexport default {\n  name: 'Backface',\n  components:{ColorPicker},\n  props: {\n    id:{\n      type:String,\n      default:'backface'\n    },\n    color:{\n      type:String,\n      default:'#333'\n    },\n    threeD:{\n      type:Boolean,\n      default:false\n    },\n    checked:{\n      type:Boolean,\n      default:false\n    }\n  },\n  emits:['update'],\n\n  data(){\n    return{\n      bChecked:this.checked,\n      chooseColor:null\n    }\n  },\n\n  methods:{\n    update(newColor){\n      this.chooseColor = newColor;\n      this.$emit('update', newColor)\n    },\n    change(){\n      if (this.bChecked == false){\n        this.chooseColor = null\n        this.$emit('update', false)\n      } else if (this.bChecked == true && this.chooseColor == null){\n        this.$emit('update', true)\n      }\n    }\n  },\n}\n</script>","import { render } from \"./Backface.vue?vue&type=template&id=09e4c18d\"\nimport script from \"./Backface.vue?vue&type=script&lang=js\"\nexport * from \"./Backface.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/kibble/repos/experimental/zdog-scope/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n    <label\n      class=\"input\"\n      :for=\"name\"\n    >\n      <slot/>\n      <component\n        :is=\"element\"\n        v-bind=\"$attrs\"\n        autocomplete=\"off\"\n        autocorrect=\"off\"\n      />\n      <!-- <div v-if=\"$attrs.type == 'number'\"\n        class=\"numberarrows no-select\">\n        <div class=\"incr\">+</div>\n        <div class=\"decr\">-</div>\n      </div> -->\n    </label>\n</template>\n\n<script>\nimport StringMixin from '../../../zdogger'\n\n// import InputVector from './InputVector'\n import ColorPicker from './ColorPicker'\n// import Backface from './Backface'\n\n\nexport default {\n  name: 'InputLabel',\n  mixins:[StringMixin],\n  inheritAttrs: false,\n  components:{\n    ColorPicker\n  },\n  props: {\n    name:{\n      type:String,\n      default:null\n    },\n    element:{\n      type:String,\n      default:'input'\n    }\n  },\n  emits:['model-value'],\n  computed:{\n    // compType(){\n    //   if (this.type == 'color'){\n    //     return 'ColorPicker' \n    //   } else if (this.type == 'vector'){\n    //     return 'InputVector'\n    //   } else if (this.type =='backface'){\n    //     return 'Backface'\n    //   }\n    // }\n  },\n\n  methods:{\n  },\n}\n</script>\n\n<style>\n\n/* .input input[type=number]::-webkit-inner-spin-button,\n.input input[type=number]::-webkit-outer-spin-button\n{\n  -webkit-appearance: none;\n  margin: 0;\n}\n\n.input input[type=number]\n{\n  -moz-appearance: textfield;\n} */\n\n.input .numberarrows{\n  position:absolute;\n  top:0;\n  right:0;\n  height:100%;\n  display:flex;\n  flex-flow:column nowrap;\n  background-color:var(--colorPri);\n  z-index: 1;\n  cursor:pointer;\n}\n.input .numberarrows .incr{\n  height:50%;\n}\n\n.input .numberarrows .decr{\n  height:50%;\n}\n\n</style>","import { render } from \"./InputLabel.vue?vue&type=template&id=bffb4bdc\"\nimport script from \"./InputLabel.vue?vue&type=script&lang=js\"\nexport * from \"./InputLabel.vue?vue&type=script&lang=js\"\n\nimport \"./InputLabel.vue?vue&type=style&index=0&id=bffb4bdc&lang=css\"\n\nimport exportComponent from \"/home/kibble/repos/experimental/zdog-scope/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Creation.vue?vue&type=template&id=2ffd653c&scoped=true\"\nimport script from \"./Creation.vue?vue&type=script&lang=js\"\nexport * from \"./Creation.vue?vue&type=script&lang=js\"\n\nimport \"./Creation.vue?vue&type=style&index=0&id=2ffd653c&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/kibble/repos/experimental/zdog-scope/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2ffd653c\"]])\n\nexport default __exports__","<template>\n  <div>\n    <InputLabel\n      v-model=\"wipSettings['backgroundColor']\"\n      element=\"ColorPicker\"\n      :color=\"currentSettings.backgroundColor\"\n      @update=\"setWipSettings('backgroundColor', $event)\"\n    >\n    Background Color:\n    </InputLabel>\n    <button @click=\"saveSettings\">\n      Save\n    </button>\n    <button @click=\"defaultSettings\">\n      Default\n    </button>\n  </div>\n</template>\n\n<script>\nimport InputLabel from './controls/InputLabel'\n\nexport default {\n  name: 'Settings',\n  components:{\n    InputLabel,\n  },\n  emits:['close-prompt'],\n  \n  data(){\n    return{\n      wipSettings:{},\n    }\n  },\n  mounted(){\n    // copy current settings to wipSettings\n    Object.assign(this.wipSettings, this.currentSettings)\n  },\n  computed:{\n    currentSettings(){\n      return this.$store.state.canvas.settings\n    }\n  },\n  methods:{\n    setWipSettings(property, newValue){\n      this.wipSettings[property] = newValue;\n    },\n    saveSettings(){\n      this.$store.dispatch('canvas/changeSetting', this.wipSettings)\n    },\n    defaultSettings(){\n      this.$store.dispatch('canvas/restoreDefaultSettings')\n    }\n  }\n}\n</script>\n\n<style scoped>\n</style>","import { render } from \"./Settings.vue?vue&type=template&id=cf6495ac\"\nimport script from \"./Settings.vue?vue&type=script&lang=js\"\nexport * from \"./Settings.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/kibble/repos/experimental/zdog-scope/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./TopBar.vue?vue&type=template&id=71a9b933\"\nimport script from \"./TopBar.vue?vue&type=script&lang=js\"\nexport * from \"./TopBar.vue?vue&type=script&lang=js\"\n\nimport \"./TopBar.vue?vue&type=style&index=0&id=71a9b933&lang=css\"\n\nimport exportComponent from \"/home/kibble/repos/experimental/zdog-scope/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n    <h2>Properties</h2>\n  <div class=\"property-panel\"\n    @click=\"closeTooltip\"\n    v-if=\"selectedNode && treeLoaded\"\n    >\n      <div class=\"row info\" >\n        <div class=\"word-break\">\n          id: {{ selected }}\n        </div>\n        <div class=\"text-display-type\">\n          {{ selectedTypeName }}\n        </div>\n        <label class=\"input-name\">\n          <input\n            :value=\"selectedNode['name']\"\n            class=\"input-name\"\n            type=\"text\"\n            autocomplete=\"off\"\n            autocorrect=\"off\"\n            :placeholder=\"selectedName\"\n            @change=\"updateName\"\n          >\n        </label>\n      </div>\n\n    <form\n      v-if=\"selectedNode && treeLoaded\"\n      class=\"field-list\"\n    >\n      <div class=\"row\">\n        <InputVector\n          v-for=\"prop in propList('vectors')\"\n          :id=\"`v_${prop}`\"\n          :key=\"prop\"\n          :value=\"selectedNode[prop]\"\n          :type=\"prop\"\n          @send-coords=\"inputChange(prop, $event)\"\n        >\n          {{ capitalize(prop) }}\n        </InputVector>\n      </div>\n      <div class=\"row\">\n        <InputLabel v-for=\"prop in propList('nums')\"\n          :key=\"prop\"\n          class=\"field\"\n          :for=\"prop\"\n          element=\"input\"\n          :value=\"selectedNode[prop]\"\n          type=\"number\"\n          step=0.1\n          :placeholder=\"selectedNode[prop]\"\n          :name=\"prop\"\n          @change=\"inputChange(prop, $event.target.value)\"\n          >\n        {{ capitalize(prop) }}:\n        </InputLabel>\n        <label v-for=\"prop in propList('colors')\"\n          class=\"field\"\n          :for=\"prop\"\n          :key=\"prop\"\n        >\n          {{capitalize(prop)}}:\n          <ColorPicker\n          :color=\"selectedNode[prop]\"\n          @update=\"inputChange(prop, $event)\"\n          />\n        </label>\n      </div>\n      <div class=\"row\">\n        <InputLabel v-for=\"prop in propList('bools')\"\n          :key=\"prop\"\n          class=\"field\"\n          :for=\"prop\"\n          element=\"input\"\n          :value=\"selectedNode[prop]\"\n          type=\"checkbox\"\n          :checked=\"selectedNode[prop]\"\n          :name=\"prop\"\n          @change=\"inputChange(prop, $event.target.value)\"\n          >\n        {{ capitalize(prop) }}:\n        </InputLabel>\n\n        <Backface v-if=\"hasBackfaceColor\"\n            :color=\"selectedNode.backface\"\n            :threeD=\"isThreeD\"\n            :checked=\"true\"\n            @update=\"inputChange('backface', $event)\"\n            />\n        <Backface v-else\n            :threeD=\"isThreeD\"\n            :checked=\"selectedNode.backface\"\n            @update=\"inputChange('backface', $event)\"\n            />\n      </div>\n      <button @click=\"saveProps\">\n        Apply Changes\n      </button>\n    </form>\n\n    <button @click=\"bWarning = true\">Delete</button>\n</div>\n<teleport to=\"body\">\n  <Modal\n    v-if=\"bWarning\"\n    @close=\"bWarning = false\"\n  >\n  Are you sure you want to delete?\n    <button @click=\"deleteSelected\">\n      Yes\n    </button>\n    <button @click=\"bWarning = false\">\n      Cancel\n    </button>\n  </Modal>\n</teleport>\n</template>\n\n<script>\nimport { mapState, mapActions} from 'vuex'// mapActions  mapGetters,\nimport {ZCLASS} from '../../zdogger/ztree'\n\nimport {StringMixin} from '../../zdogger'\n\nimport Modal from '../Modal'\n\nimport InputVector from './controls/InputVector'\nimport ColorPicker from './controls/ColorPicker'\nimport Backface from './controls/Backface'\nimport InputLabel from './controls/InputLabel'\n\nexport default {\n  name: 'PropertyPanel',\n  components:{\n    InputVector,\n    ColorPicker,\n    Backface,\n    InputLabel,\n    Modal\n  },\n  mixins:[StringMixin],\n\n  data(){\n    return{\n      READ_ONLY: [\n        'type', 'id'\n      ],\n      wipTooltip:null,\n      bWarning:false\n    }\n  },\n  computed:{\n    ...mapState({\n      selected:state=>state.selected,\n      treeLoaded:state=>state.treeLoaded,\n      displayProps:state=>state.properties.displayProps,\n      selectedNode:state=>state.properties.displayProps.node\n    }),\n    selectedName(){\n      if (!this.$store.state.treeview.selectedListNode) return;\n      return this.$store.state.treeview.selectedListNode.name\n    },\n    selectedTypeName(){\n      return ZCLASS.NAMES[this.selectedNode.type];\n    },\n    hasColor(){\n      return this.selectedAllProps.includes('color');\n    },\n    hasBackfaceColor(){\n      let bf = this.selectedNode.backface;\n      return (typeof bf == 'string')\n    },\n    isThreeD(){\n      return this.selectedTypeName == 'cylinder' || this.selectedTypeName == 'hemisphere'\n      || this.selectedTypeName == 'cone'\n    }\n  },\n  methods:{\n    ...mapActions('properties',[\n      'changeDisplay',\n      'updateProps',\n      'editDisplay'\n    ]),\n    propList(type){\n      let t = this.displayProps.props[type];\n      if (type == 'colors') t = t.filter(prop=>prop != 'backface')\n      return t\n    },\n    saveProps(e){\n      e.preventDefault();\n    },\n    editProp(prop, value){\n      let p = {option: prop, value: value};\n      this.editOption(p)\n    },\n    inputChange(prop, newVal){\n      //this.editOption({option: prop, value: newVal})\n      let o = {};\n      o[prop] = newVal\n      this.updateProps(o)\n    },\n    updateName(e){\n      let ne = e.target.value;\n      let o = {name:ne}\n      this.updateProps(o)\n      this.$store.dispatch('history/updateSelectedName', ne);\n    },\n    closeTooltip(){\n      //this.$emit('close-tooltip');\n    },\n    deleteSelected(){\n      this.$store.dispatch('history/deleteZdog', this.selected)\n      this.bWarning = false;\n    }\n  },\n}\n</script>\n\n<style lang=\"scss\">\n@import '../../assets/fieldinput.css';\n\n.property-panel {\n  ::placeholder{\n    color:rgba(0,0,0,1);\n    opacity:1;\n  }\n\n  input{\n    &:placeholder-shown {\n      color:rgba(0,0,0,1);\n      opacity:1;\n    }\n    &.input-name{\n      max-width:100%;\n    }\n  }\n\n  .info{\n    justify-content:space-between;\n\n    div{\n      color:rgba(0,0,0,0.6);\n      font-size:0.9em;\n      padding:0 0.2rem;\n    }\n  }\n\n  .field{\n    font-size:1.05rem;\n    margin:3px 2px;\n    text-transform:capitalize;\n    user-select:none;\n  }\n\n}\n</style>\n","import { render } from \"./PropertyPanel.vue?vue&type=template&id=4de71eaf\"\nimport script from \"./PropertyPanel.vue?vue&type=script&lang=js\"\nexport * from \"./PropertyPanel.vue?vue&type=script&lang=js\"\n\nimport \"./PropertyPanel.vue?vue&type=style&index=0&id=4de71eaf&lang=scss\"\n\nimport exportComponent from \"/home/kibble/repos/experimental/zdog-scope/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <h2>Tree View</h2>\n    <button v-if=\"!treeLoaded\" @click=\"demo\">\n      Try Demo\n    </button>\n    <button v-if=\"treeLoaded\" @click=\"embedGen\">\n      Code Embed\n    </button>\n  <header \n    v-if=\"treeLoaded\"\n    class=\"row between text-display-type\"\n  >\n    <div class=\"col index\">\n      Index\n    </div>\n    <div class=\"col name\">\n      Name\n    </div>\n    <div class=\"col type\">\n      Type\n    </div>\n  </header>\n  <ul\n    v-if=\"treeView && treeLoaded\"\n    class=\"tree-bg\"\n  >\n    <TreeItem\n      v-for=\"(node) in treeView\"\n      :key=\"node.id\"\n      :node=\"node\"\n      :depth=\"0\"\n    />\n  </ul>\n<teleport to=\"body\">\n  <Modal\n    v-if=\"bEmbed\"\n    @close=\"bEmbed = false\"\n  >\n    <h2>HTML Code</h2>\n    <p>Copy and paste into an HTML file.</p>\n    <textarea class=\"embed\" ref=\"embedText\"\n      :value=\"embed\"/>\n    <button @click=\"embedCopy\">\n      Copy\n    </button>\n  </Modal>\n</teleport>\n</template>\n\n<script>\nimport { mapState, mapActions } from 'vuex'// mapActions mapGetters\n\nimport TreeItem from './TreeItem.vue'\nimport Modal from '../Modal'\n\n\nexport default {\n  name: 'TreeView',\n  components:{\n    TreeItem,\n    Modal\n    },\n\n  data(){\n    return{\n      ghost:false,\n      rerender:false,\n      draggingObject:null,\n      dragId:null,\n      bEmbed:false,\n    }\n  },\n  computed:{\n    ...mapState({\n      illustration: 'illustration',\n      treeLoaded: 'treeLoaded',\n      embed:state=>state.treeview.embed,\n      treeView:state=>state.treeview.list\n    }),\n  },\n  watch:{\n    illustration(nVal){\n      if (nVal){\n        this.$store.dispatch('treeview/changeList')\n      }\n    },\n  },\n  methods:{\n    ...mapActions([\n      'demoJSON',\n    ]),\n    getPanelWidth(){\n      return this.$parent.$refs.treeview.clientWidth\n    },\n    log(){\n      console.log(this.treeView)\n    },\n    embedGen(){\n      this.bEmbed = true;\n      this.$store.dispatch('treeview/createEmbed')\n    },\n    embedCopy(){\n      let r = this.$refs.embedText\n      r.select();\n      r.setSelectionRange(0, 99999);\n      document.execCommand(\"copy\");\n    },\n    demo(){\n      let testmodel = require('../../testmodel').default;\n      this.demoJSON(testmodel);\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\">\ntextarea.embed{\n  height:70ch;\n  max-height: 40vh;\n  width: 100%;\n}\n\n.tree-view {\n  ul.tree-bg{\n    background-image: linear-gradient(0deg,\n      var(--colorShade) 25%,\n      transparent 25%, transparent 50%,\n      var(--colorShade) 50%, var(--colorShade) 75%,\n      transparent 75%, transparent 100%)\n    ;\n    background-size: 5.2rem 5.2rem;\n  }\n  ul ul {\n    padding-left:1.1rem;\n  }\n  header{\n    margin-top:10px;\n    background-color:rgba(0,0,0,0.7);\n    color:rgba(255,255,255,1);\n  }\n  .row{\n    flex-wrap:nowrap;\n    \n    .index{\n      padding:0 0.2rem 0 0.2rem;\n      background-color:rgba(255,255,255,0.2);\n    }\n  }\n  .name{\n    flex-grow:4;\n    padding:0 0.2rem;\n  }  \n  .type{\n    padding:0 0.2rem 0 0.1rem;\n    width:6rem;\n    background-color:rgba(255,255,255,0.2);\n  }\n}\n</style>\n","<template>\n  <li\n    v-if=\"node\"\n    class=\"tree-item\"\n    @dragover=\"dragOver\"\n    @dragleave=\"dragOverIndicate = false\"\n    @drop=\"drop\"\n  >\n      <div\n        ref=\"selectitem\"\n        :class=\"{'data-set':true, 'row':true, 'highlight':(selected == node.id)}\"\n        draggable=\"true\"\n        @click.stop=\"highlight\"\n        @dragstart=\"dragStart\"\n        @dragend=\"dragEnd\"\n      >\n        <div class=\"index\">\n          <button\n            v-if=\"hasChildren\"\n            @click=\"toggleCollapse\"\n          >\n            {{ collapsed? '+' : '-' }}\n          </button>\n          <p>{{ node.index }}</p>\n        </div>\n\n        <div class=\"name\">\n          <ClickToEdit element=\"input\"\n            :dbl=\"true\"\n            autofocus\n            type=\"text\"\n            :placeholder=\"node.name\"\n            :label=\"node.name\"\n            @edit-finish=\"finishEditAssignedName\"\n            />\n        </div>\n\n\n        <div class=\"text-display-type type\">\n          {{ node.type }}\n        </div>\n      </div>\n      <div\n        v-if=\"dragOverIndicate\"\n        class=\"drag-over-ghost\"\n      />\n      <!--\n    <teleport to=\"[data-teleport]\">\n      <div v-if=\"editingName\" class=\"editing-blocker\"\n        @click=\"editBlocker\"\n        ></div>\n    </teleport>-->\n      <ul v-if=\"hasChildren\">\n        <TreeItem\n          v-for=\"(child) in node.children\"\n          :key=\"child.id\"\n          :class=\"{'collapsed':collapsed}\"\n          :node=\"child\"\n          :parent-id=\"node.id\"\n          @select-uncollapse=\"uncollapseBubble\"\n        />\n      </ul>\n  </li>\n</template>\n\n<script>\n//import {ref} from 'vue' // onUpdated, onUnmounted\nimport { mapState, mapActions} from 'vuex'// mapGetters\n\nimport ClickToEdit from './controls/ClickToEdit'\n\nexport default {\n  name: 'TreeItem',\n  components:{ClickToEdit},\n  props: {\n    node:{\n      type:Object,\n      default:null\n    },\n    parentId:{\n      type:String,\n      default:null\n    },\n  },\n  emits:['drag-started', 'drag-stop','select-uncollapse'],\n\n  data(){\n    return{\n      dragOverIndicate:false,\n      editingName:false,\n      collapsed:true,\n    }\n  },\n  computed:{\n    ...mapState({\n      selected:'selected',\n      updateTree:'updateTree'\n    }),\n    isSelected(){\n      return (this.selected == this.node.id)\n    },\n    hasChildren(){\n      return (this.node.children && this.node.children.length > 0)\n    },\n    validDropzone(){\n      let nid = this.node.id;\n      if (this.$store.state.treeview.blockIds.includes(nid)) return false \n      return true\n    },\n    truncName(){\n      let max = 20\n      let text = this.node.name\n      return text.substr(0,max-1)+(text.length>max?'&hellip;':''); \n    }\n  },\n  methods:{\n    ...mapActions({\n      changeSelectedName:'history/updateSelectedName', //newName\n      changeSelected:'changeSelected',\n      saveSelected:'treeview/saveSelected',\n      startDrag:'treeview/startDrag',\n      stopDrag:'treeview/stopDrag'\n    }),\n    dragStart(e){\n      let payload = {childId: this.node.id}\n      this.startDrag({blockIds:[this.node.id, this.parentId]})\n      e.dataTransfer.setData(\"text/plain\", JSON.stringify(payload));\n    },\n    dragEnd(){\n      this.dragOverIndicate = false;\n      this.stopDrag()\n    },\n    dragOver(e){\n      e.preventDefault();\n      e.stopPropagation();\n      if (!this.validDropzone) return;\n      this.dragOverIndicate = true;\n      e.dataTransfer.dropEffect = \"move\";\n    },\n    drop(e){\n      e.preventDefault();\n      e.stopPropagation();\n      if (!this.validDropzone) return;\n      let data = JSON.parse(e.dataTransfer.getData(\"text/plain\"));\n      let payload = {\n        id: data.childId,\n        newParentId: this.node.id,\n      }\n      this.$store.dispatch('treeview/sortItem', payload)\n      //this.$emit('sort-tree', payload)\n      this.dragEnd();\n    },\n    finishEditAssignedName(newVal){\n      if (!newVal || (newVal == this.node.name)) return\n      this.changeSelectedName(newVal)\n    },\n    highlight(){\n      if (this.selected == this.node.id) {return}\n      this.changeSelected(this.node.id)\n      this.saveSelected(this.node)\n    },\n    toggleCollapse(e){\n      e.preventDefault();\n      e.stopPropagation();\n      this.collapsed = !this.collapsed;\n    },\n    log(event) {\n      console.log(event)\n    },\n    uncollapseBubble(){\n      this.collapsed = false\n      this.$emit('select-uncollapse')\n    }\n  },\n  watch:{\n    isSelected(newVal){\n      if (this.collapsed && newVal == true){\n        this.$emit('select-uncollapse')\n      }\n    }\n  }\n}\n</script>\n\n<style lang='scss'>\n.tree-item{\n  display:flex;\n  justify-content:space-between;\n  flex-direction:column;\n  position:relative;\n  cursor:pointer;\n\n/*States*/\n  .highlight{\n    background-color:var(--colorLight);\n  }\n  .collapsed{\n    display:none;\n  }\n/*Dom Elements*/\n  ul{\n    position:relative;\n  }\n  button{\n    position:relative;\n    line-height:0.3rem;\n    padding:0.2rem 0.1rem;\n    width:2.5ch;\n  }\n  li:before{\n    position:absolute;\n    top:0;\n    left:0.6rem;\n    content:'';\n    width:1px;\n    background-color:var(--colorMain);\n    height:100%;\n  }\n/*inner Styling*/\n  .row{\n    border-bottom: 1px solid rgba(0,0,0,0.3);\n  }\n  .data-set{\n    width: 100%;\n    height:1.3rem;\n  }\n  .index{\n    text-align:right;\n    border-right:1px solid rgba(92, 85, 85, 0.2);\n    display:flex;\n    flex-flow:row nowrap;\n\n    p{\n      margin:0;\n      padding:0;\n      padding-left:1ch;\n      max-width:5ch;\n      font-size:0.9rem;\n      color:var(--colorMain);\n    }\n  }\n  .name{\n    width:99%;\n    text-align:left;\n    max-width:initial;\n\n    input{\n      width:100%;\n    }\n  }\n/*Drag N Drop*/\n  .empty-list-dropzone{\n    padding:0.5rem 0 0 0;\n  }\n  .drag-over-ghost{\n    border:1px dashed var(--colorPri);\n    background-color:var(--colorLight);\n    opacity:0.5;\n    height:1.3rem;\n    margin-left:1rem;\n    /*needs arrow to indicate child?*/\n  }\n}\n\n\n</style>\n","<template>\n  <component\n    :is=\"element\"\n    v-if=\"editing\"\n    v-bind=\"$attrs\"\n    ref=\"inp\"\n    @keydown=\"keydownHandler\"\n    @blur=\"finish\"\n    @change=\"finish\"\n  >\n    <slot />\n  </component>\n  <label\n    v-if=\"dbl && !editing\"\n    @dblclick=\"edit\"\n  >\n    {{ label }}\n  </label>\n  <label\n    v-if=\"!dbl && !editing\"\n    @click=\"edit\"\n  >\n    {{ label }}\n  </label>\n</template>\n\n<script>\nexport default {\n  name: 'ClickToEdit',\n  inheritAttrs: false,\n  props: {\n    dbl:{\n      type:Boolean,\n      default:false\n    },\n    label:{\n      type:String,\n      default:null     \n    },\n    element:{\n      type:String,\n      default:\"input\"  \n    }\n  },\n  emits:['edit-start','edit-change', 'edit-finish'],\n\n  data(){\n    return{\n      editing:false,\n    }\n  },\n\n  methods:{\n    keydownHandler(event){\n      if (event.keyCode == 13) { //'Enter' pressed\n        this.finish();\n      }\n    },\n    edit(){\n      this.editing = true;\n      this.$emit('edit-start')\n    },\n    finish(){\n      this.editing = false;\n      this.$emit('edit-finish', this.$refs.inp.value)\n    }\n  },\n}\n</script>","import { render } from \"./ClickToEdit.vue?vue&type=template&id=07364723\"\nimport script from \"./ClickToEdit.vue?vue&type=script&lang=js\"\nexport * from \"./ClickToEdit.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/kibble/repos/experimental/zdog-scope/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./TreeItem.vue?vue&type=template&id=3c4a7a78\"\nimport script from \"./TreeItem.vue?vue&type=script&lang=js\"\nexport * from \"./TreeItem.vue?vue&type=script&lang=js\"\n\nimport \"./TreeItem.vue?vue&type=style&index=0&id=3c4a7a78&lang=scss\"\n\nimport exportComponent from \"/home/kibble/repos/experimental/zdog-scope/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./TreeView.vue?vue&type=template&id=62466cb6\"\nimport script from \"./TreeView.vue?vue&type=script&lang=js\"\nexport * from \"./TreeView.vue?vue&type=script&lang=js\"\n\nimport \"./TreeView.vue?vue&type=style&index=0&id=62466cb6&lang=scss\"\n\nimport exportComponent from \"/home/kibble/repos/experimental/zdog-scope/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <canvas\n    id=\"canvas\"\n    ref=\"workingCanvas\"\n    class=\"zdog-canvas\"\n    :width=\"windowWidth\"\n    :height=\"windowHeight\"\n    :style=\"canvasStyle\"\n  />\n\n  <canvas\n    id=\"ghost\"\n    :class=\"{'hidden':hideGhost}\"\n    :width=\"windowWidth\"\n    :height=\"windowHeight\"\n  />\n\n  <div class=\"canvas developer\">\n    <button style=\"z-index:200\" @click=\"hideGhost = !hideGhost\">Toggle</button>\n  </div>\n  <div id=\"zoom-control\">\n\n  </div>\n</template>\n\n<script>\nimport {mapState, mapActions, mapGetters} from 'vuex'\n// import { useWindowSize } from 'vue-window-size';\n\n/**\n * NOTES\n * https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/globalCompositeOperation\n * I want the shape to glow when it's selected...? 'destination-out' option\n * Need to extend Zdog to have Path2D\n *\n */\n\nexport default {\n  name: 'Canvas',\n\n\n  data(){\n    return{\n      hideGhost:true\n    }\n  },\n  computed:{\n    ...mapState({\n      settings:state=>state.canvas.settings,\n      selected:state=>state.selected,\n      illustration:state=>state.illustration,\n    }),\n    ...mapGetters({\n        selectedNode: 'selectedNode',\n    }),\n    windowWidth(){\n      return window.innerWidth;\n    },\n    windowHeight(){\n      return window.innerHeight;\n    },\n    canvasStyle(){\n      return {\n        backgroundColor: this.settings.backgroundColor\n      }\n    }\n  },\n  watch:{\n    selectedNode(nVal, oVal){\n      if (nVal && nVal != oVal){\n        this.showSelectedAxes()\n      } else {\n        this.clearSelectedAxes()\n      }\n    },\n  },\n  methods:{\n    ...mapActions('canvas',[\n      'showSelectedAxes',\n      'clearSelectedAxes',\n      'clearCanvasAxes',\n    ]),\n    clickHandler(event){\n      console.log(this.getMousePos(event));\n    },\n    getMousePos(event){\n      console.log(this.camera.zoom);\n      return {\n        x: event.clientX,\n        y: event.clientY\n      };\n    },\n  }\n}\n</script>\n\n<style>\n\n#canvas, #ghost{\n  position:absolute;\n  top:0;\n  left:0;\n  width:100vw;\n  height:100vh;\n}\n#canvas{\n  z-index:var(--zCanvas);\n}\n\n#ghost{\n  /* z-index:var(--zGhost); */\n  z-index:1;\n}\n\ncanvas.developer{\n  z-index:3;\n  position:absolute;\n  bottom:0;\n}\n\n#zoom-control{\n  position:absolute;\n  bottom:0;\n  z-index:var(--zPanel)\n}\n\n#zoom-control figure{\n  padding:0.1rem 0.2rem;\n  margin:0;\n\n}\n</style>\n","import { render } from \"./Canvas.vue?vue&type=template&id=2d854e56\"\nimport script from \"./Canvas.vue?vue&type=script&lang=js\"\nexport * from \"./Canvas.vue?vue&type=script&lang=js\"\n\nimport \"./Canvas.vue?vue&type=style&index=0&id=2d854e56&lang=css\"\n\nimport exportComponent from \"/home/kibble/repos/experimental/zdog-scope/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=f93fb03c\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=f93fb03c&lang=css\"\n\nimport exportComponent from \"/home/kibble/repos/experimental/zdog-scope/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import {createApp } from 'vue'\nimport Vuex from './store'\nimport App from './App.vue'\n//import { VueResponsiveComponents } from 'vue-responsive-components'\n\n\nvar app = createApp(App)\napp.use(Vuex)\n//app.use(VueResponsiveComponents)\napp.mount('#app')","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Modal.vue?vue&type=style&index=0&id=37953d71&scoped=true&lang=css\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./InputLabel.vue?vue&type=style&index=0&id=bffb4bdc&lang=css\"","import Zdog from 'zdog'\n\nimport json_beautifier from 'csvjson-json_beautifier';\n\n/**\n * Zdog properties that are derived, or do esoteric things\n  const ADVANCED_PROPERTIES  = ['origin','sortValue','pixelRatio',\n  'renderOrigin','renderFront','renderNormal','pathCommands',\n  'canvasHeight','canvasWidth']   */\n\n/**\n * classType only accepts 0-13 (corresponding to ZDog types)\n */\n\nconst ZDOG_CLASS_TYPE = [\n  Zdog.Anchor,\n  Zdog.Shape,\n  Zdog.Cone,\n  Zdog.Cylinder,\n  Zdog.Dragger,\n  Zdog.Ellipse,\n  Zdog.Group,\n  Zdog.Hemisphere,\n  Zdog.Illustration,\n  Zdog.Polygon,\n  Zdog.Rect,\n  Zdog.RoundedRect,\n  Zdog.Box,\n  Zdog.Vector\n]\n  \n/**\n * Treated like an enum\n */\nconst ZDOG_CLASS = {\n  'anchor':0,\n  'shape':1,\n  'cone':2,\n  'cylinder':3,\n  'dragger':4,\n  'ellipse':5,\n  'group':6,\n  'hemisphere':7,\n  'illustration':8,\n  'polygon':9,\n  'rect':10,\n  'roundedrect':11,\n  'box':12,\n  'vector':13\n}\n\n/**\n * Treated like an enum, convert an integer to the Zdog class/type/object name\n */\nconst ZDOG_CLASS_NAME = Object.keys(ZDOG_CLASS);\n  \nconst CYCLIC_PROPS = [\n  'addTo', 'dragRotate', 'onPrerender', 'onDragStart', 'onDragMove',\n  'onDragEnd','onResize', 'element'\n]\n\nlet nocyclic = (options) => {return options.filter(option=>{\n  return !CYCLIC_PROPS.includes(option)\n})}\n\n/**\n * Generates a basic random ID\n * https://stackoverflow.com/questions/3231459/create-unique-id-with-javascript\n * https://svijaykoushik.github.io/blog/2019/10/04/three-awesome-ways-to-generate-random-number-in-javascript/\n */\nvar seed = Date.now();\nfunction generateUid() {\n  let xorShift = () =>{\n    seed ^= seed << 13;\n    seed ^= seed >> 17;\n    seed ^= seed << 5;\n    return seed;\n  }\n// always start with a letter -- base 36 makes for a nice shortcut\n  let r  = (Math.floor((Math.random() * 25)) + 10).toString(36)\n  let u = xorShift(seed);\n  r += (u < 0 ? -u : u).toString(36);\n  return r\n}\n\n/**\n * Creates Zdog objects with name, uid and type (see ZDOG_CLASS, an 'enum')\n * @param {Number} int \n */\nfunction make(int){\n  let construct = ZDOG_CLASS_TYPE[int];\n  return function(options){\n    let newZdog = new construct(options);\n    assignUID(newZdog);\n    assignName(newZdog);\n    assignType(newZdog, int);\n    return newZdog;\n  }\n}\n  \n/**\n * Instead of new Zdog.Anchor(options), can call\n * create('anchor') and defer object creation until you receive all options\n * \n * e.g.\n * let makeAnchor = (options) => create('anchor')(options)\n * \n * makeAnchor({translate:{x:0,y:0}}) returns new Zdog.Anchor\n * @param {String} itemName \n */\nconst create = (itemName) => {\n  return make(ZDOG_CLASS[itemName])\n}\n  \n/**\n * Adds an \"name\" property to the Zdog item for human covenience (and open up for search/filter options in the future?)\n * @param {*} ZdogItem \n */\nfunction assignName(ZdogItem, name){\n  if (!name) name = \"untitled\";\n  Object.defineProperty(ZdogItem, \"name\", {\n    enumerable: true,\n    writable: true,\n    configurable:false,\n    value: name\n  })\n}\n  \n/**\n * Adds a unique identifier \"id\" immutable property to the Zdog item.\n * @param {*} ZdogItem \n */\nfunction assignUID(ZdogItem){\n  ZdogItem.id = generateUid();\n  // freeze the id\n  Object.defineProperty(ZdogItem, \"id\", {enumerable:true, configurable: false, writable: false });\n}\n/**\n * Adds the property \"type\" as an integer for class checking\n * @param {*} ZdogItem \n */\nfunction assignType(ZdogItem, int){\n  Object.defineProperty(ZdogItem, \"type\", {\n    enumerable: true,\n    writable: false,\n    configurable:false,\n    value: int\n  })\n}\n  \n/**\n * Checks if the Zdog item is a certain type of instance ('Shape,' 'Vector,' etc.) Will return true for super classes (like Illustration is an Anchor)\n * @param {*} ZdogItem the Zdog item\n * @param {*} type can be String or Number (e.g. 'anchor' or 0 or '0')\n */\nfunction isClass(zdog, type){\n  //string argument\n  let int = 0;\n  if (typeof type == 'string') {\n    type = type.toLowerCase();\n    int = ZDOG_CLASS[type];\n  } else if (Number.isInteger(type)) {\n    int = type\n  } else {\n    return false\n  }\n  return (zdog instanceof ZDOG_CLASS_TYPE[int]);\n}\n  \n/**\n * Add properties to native Zdog objects that don't have ids or type assigned to them yet\n * @param {*} ZdogItem \n * @param {*} options {id,name, type}\n */\nfunction assignExisting(ZdogItem){\n  //start backwards because anchor is 0 and is the parent of almost all objects\n  let type = -1;\n  for(let n = ZDOG_CLASS_NAME.length - 1; n >= 0; n--){\n    if (isClass(ZdogItem, n)){\n      type = n;\n      break;\n    }\n  }\n  if (type < 0) return ZdogItem; // return the original because can only do certain objects\n\n  if (!ZdogItem.name) assignName(ZdogItem, 'untitled');\n  if (!ZdogItem.id) assignUID(ZdogItem);\n  if (!ZdogItem.type) assignType(ZdogItem, type);\n\n  for (let c of ZdogItem.children){\n    assignExisting(c);\n  }\n  return ZdogItem\n}\n  \n/**\n * Add 'id', 'type' and 'name' properties to an illustration and returns a copy\n * @param {Zdog.Illustration} illustration\n */\nfunction importExisting(illustration){\n  let copy = illustration.copyGraph();\n  assignExisting(copy);\n  return copy;\n}\n\n/**\n * Creates a copy of a Zdog object with different ids\n * @param {*} zdog A Zdog object\n * @param {Boolean} deep whether to copy the descendents\n */\nfunction copy(zdog, deep=false){\n  if (!deep){\n    return assignExisting(zdog.copy())\n  }\n  return assignExisting(zdog.copyGraph())\n}\n  \n/**\n * Revives the plain Object or a stringified JSON into a Zdog object\n * @param {*} plainObject \n */\nfunction reviveZdog(plainObject){\n  if (typeof plainObject === \"string\"){\n    plainObject = JSON.parse(plainObject);\n  }\n  let {id, name, type, ...options} = plainObject;\n\n  let ZdogO = new ZDOG_CLASS_TYPE[type](options);\n\n  assignName(ZdogO, name);\n  assignType(ZdogO, type)\n  ZdogO.id = id;\n  Object.defineProperty(ZdogO, \"id\", {enumerable:true, configurable: false, writable: false });\n  return ZdogO\n}\n  \n/**\n * Zerialises Zdog object and returns a JS object with bare minimum properties\n * @param {*} ZdogItem Zdog Item\n * @param {String} canvasQuery A query selector string if the node is an illustration\n */\nfunction toObject(ZdogItem, canvasQuery=\".zdog-canvas\"){\n  if(!ZdogItem || (isNaN(ZdogItem.type)) ) return;\n  let type = ZdogItem.type;\n  if (type == 4) return //we're not serializing dragger type\n  let classType = ZDOG_CLASS_TYPE[type];\n  let recordProps = classType.optionKeys.filter(option=>{\n    return !CYCLIC_PROPS.includes(option)\n  });\n  if (!recordProps) return\n\n  let result = {\n    type: type,\n    name: ZdogItem.name,\n    id: ZdogItem.id\n  }\n\n  let strin = (prop) =>{\n    if (prop == 'dragRotate') {\n      if (typeof ZdogItem[prop] != 'boolean'){\n        return true;\n      }\n    } else if(prop == 'element') {\n      return canvasQuery\n    }\n    return ZdogItem[prop]\n  }\n\n  //Assing props\n  recordProps.forEach(prop=>{\n    result[prop] = strin(prop);\n  })\n\n  if (type == 8){\n      //illustration element prop set to a selector\n      result.element = canvasQuery;\n  }\n  return result;\n}\n\n/**\n * Returns an {option:value} object of a Zdog pruned of cyclic values\n * @param {*} zdog Zdog object\n */\n// function getProps(node){\nfunction justProps(zdog){\n  let options;\n  options = zdog.constructor.optionKeys\n  let o = {}\n  for (let p of nocyclic(options)){\n    o[p] = zdog[p]\n  }\n  Object.assign(o, {\n    name: zdog.name,\n    type: zdog.type,\n    id: zdog.id\n  })\n  return o;\n}\n  \n/**\n * Gets the valid instantiation options of the Zdog Class\n * \n * validProps('Anchor') // returns [\"rotate\", \"translate\", \"scale\"]\n * @param {*} arg can be String or Integer\n */\nfunction validProps(arg){\n  let options;\n  try{\n    if (typeof arg == 'number'){\n      options = ZDOG_CLASS_TYPE[arg].optionKeys\n    } else if (typeof arg == 'string'){\n      options = ZDOG_CLASS_TYPE[ZDOG_CLASS[arg.toLowerCase()]].optionKeys\n    } else if (arg.optionKeys){\n      options = arg.optionKeys\n    } else {\n      options = arg.constructor.optionKeys\n    }\n    return nocyclic(options)\n  } catch(e){\n    throw new Error(e)\n  }\n}\n\n\n/**\n * JSON converter for Ztree\n */\nclass ZtreeReader{\n  /**\n   * Accepts a Ztree instance a JSON string. Can be null.\n   * @param {Ztree} arg \n   */\n  constructor(arg){\n    this.tree = null\n    if (!arg) {\n      return\n    } else if (arg instanceof Ztree) {\n      this.tree = arg\n    } else {\n      this.reviveTree(arg);\n    }\n  }\n\n  /**\n   * Zdog reviver function for JSON.parse second argument\n   */\n  static revivePlain(key, value){\n    if (key == 'nodes'){\n      let temp = value.map(plain=>{\n        return reviveZdog(plain);\n      })\n      return temp;\n    } else {\n      return value;\n    }\n  }\n\n  /**\n   * Revives a JSON file to a Ztree and returns a new Ztree\n   * @param {*} JSONstring \n   */\n  reviveTree(JSONstring){\n    //parse arg into a Ztree\n    let objecT = JSONstring\n\n    if (typeof JSONstring == 'string'){\n      objecT = JSON.parse(JSONstring, ZtreeReader.revivePlain);\n    } else {\n      objecT.nodes = objecT.nodes.map(plain=>{\n        return reviveZdog(plain)\n      })\n    }\n\n    let maP = new Map()\n    objecT.nodes.forEach(node=>{\n      maP.set(node.id, node);\n      if(node.id == objecT.illustration){\n        this.tree = new Ztree(node, objecT.canvasQuery);\n\n      }\n    })\n\n    this.tree.nodeMap = maP;\n    //set relations, each relation is {parent:'parentid', children:[array of childids]}\n    this.tree.relationMap = new Map();\n    for(var r of objecT.relations){\n      let parent = maP.get(r.parent);\n      let set = new Set(r.children.map(id=>{\n        let child = maP.get(id)\n        parent.addChild(child)\n        return id;\n      }));\n      this.tree.relationMap.set(r.parent, set);\n    }\n\n    return this.tree;\n  }\n\n  /**\n   * Sends a download prompt\n   */\n  static Download(content, fileName, contentType){\n    const a = document.createElement(\"a\");\n    var file = new Blob([content], {type: contentType});\n    a.href = URL.createObjectURL(file);\n    a.download = fileName;\n    a.click();\n    //window.URL.revokeObjectURL(file);\n  }\n\n  /**\n   * Method to download the Ztree as JSON\n   */\n  download(){\n    if (!this.tree) throw new Error('Cannot download if there is no tree')\n    let content = this.tree.toJSON();\n    ZtreeReader.Download(content, `${this.tree.illustration.name}.json`, 'text/json');\n  }\n\n  /**\n   * Opens the client's File Explorer to only accept .JSON, and returns a Promise that resolves to FileList, otherwise rejects\n   */\n  static async import(){\n    const input = document.createElement('input')\n    input.setAttribute('type','file');\n    input.setAttribute('accept','.json');\n    return new Promise((resolve, reject)=>{\n      input.addEventListener('change', (event) => {\n        let file = event.target.files;\n        if (file !== null && file !== undefined) {\n          resolve(event.target.files);\n        } else {\n          reject('No file chosen');\n        }\n      });\n      input.click()\n    })\n  }\n\n  /**\n   * Parses selected JSON file, returns Promise with the Ztree on success\n   */\n  async load(){\n    return new Promise((resolve, reject) => {\n      ZtreeReader.import().then(fileList=>{\n\n        var fileReader = new FileReader();\n\n        fileReader.onloadend = (ev) => {\n          this.reviveTree(ev.target.result);\n          resolve(this.tree);\n        }\n\n        for (let f of fileList){\n          fileReader.readAsText(f);\n        }\n\n      }).catch(e=>{\n        reject(e);\n      })\n    })\n  }\n}\n\n/**\n * Make easy tree viewing of Zdog objects\n * https://chrissmith.xyz/super-fast-tree-view-in-javascript/\n */\nclass Ztree{\n  /**\n   * Illustration can be null\n   * @param {Zdog.Illustration} illustration \n   */\n  constructor(illustration, canvasQuery=\".zdog-canvas\"){\n    let optionsDefault = {\n      element: canvasQuery,\n      width: window.innerWidth,\n      height: window.innerHeight,\n     // rotate: {x:-.5+Math.PI, z: 0, y:.5+Math.PI}, //default Zdog rotation is weird\n      //dragRotate:true\n      }\n\n    this.canvasQuery = canvasQuery;\n    this.nodeMap = new Map();\n    this.relationMap = new Map(); //{key: id, value: Set() of child ids}\n    if (!illustration){\n      this.illustration = null;\n      return;\n    }else if (!illustration.element || typeof illustration.element == 'string'){\n      // the illustration is just a plain object\n      if (illustration.element){\n        this.canvasQuery = illustration.element;\n      }\n      let options = Object.assign(optionsDefault, illustration)\n      this.illustration = create('illustration')(options);\n\n    } else if (Z.is(illustration, 'illustration')) {\n      if (illustration.id){\n\n        this.illustration = illustration\n\n      } else {\n        this.illustration = importExisting(illustration)\n        this.flatten(this.illustration)\n        this.illustration.name = 'root'\n      }\n    }\n    this.addNode(this.illustration);\n  }\n\n  //flatten existing zdog object into Map and Set to record relations\n  flatten(ZdogItem){\n    let mainID = Ztree._nodeID(ZdogItem)\n    if (!ZdogItem.id){\n      assignExisting(ZdogItem)\n    }\n    this.nodeMap.set(mainID, ZdogItem);\n    if (ZdogItem.addTo){\n      let pID = ZdogItem.addTo.id;\n      let set = this.relationMap.get(pID);\n      if (!set) {\n        this.relationMap.set(pID, new Set([mainID]))\n        return\n      }\n      set.add(mainID);\n    }\n    if (ZdogItem.children.length > 0) {\n      let set = this.relationMap.get(mainID);\n      if (!set) {\n        set = new Set();\n        this.relationMap.set(mainID, set);\n      }\n      for (let child of ZdogItem.children){\n        if (\n          !isNaN(child.type)\n          // (child.type !== undefined)\n          // && (child.type !== null)\n          // && child.id\n          ){ \n\n          set.add(child.id);\n          this.flatten(child);\n        }\n      }\n    }\n    return ZdogItem.id;\n  }\n\n  /**\n   * Returns an object with the bare minimum display properties of the Zdog item\n   * @param {*} node a Zdog object within the tree\n   */\n  trimNode(node){\n    let {id,name,type,visible,children} = node;\n    let o = Object.assign({}, {id,name,type,visible,children})\n    if (!id || isNaN(type)) return null;\n    o.index = this.indexOf(node);\n    o.type = ZDOG_CLASS_NAME[type];\n    if (visible === undefined) visible = true\n\n    if (children && children.length > 0) {\n      o.children = children.map(child=>{\n        return this.trimNode(child);\n      }).filter(x=>x);\n    } else {\n      children = null\n    }\n    return o\n  }\n\n  /**\n   * Returns a stripped down tree with nesting, for UI tree display\n   */\n  trimmedView(){\n    return [this.trimNode(this.illustration)]\n  }\n\n  /**\n   * Find root of composite objects\n   * @param {*} node \n   */\n  static findRoot(node){\n    if ((node.id && node.type) || !node.addTo) {\n      return node\n    }\n    return Ztree.findRoot(node.addTo);\n  }\n\n  /**\n   * Returns a plain of the tree object\n   */\n  plain(){\n    let {illustration, canvasQuery, nodeMap, relationMap} = this;\n\n    let result = {\n      illustration: illustration.id,\n      nodes: [...nodeMap.values()].map(node=>{\n        return toObject(node, canvasQuery)\n      }),\n      relations: [...relationMap.entries()].map(entry=>{\n        let key = entry[0]\n        let valset = entry[1]\n        return {parent: key, children: Array.from(valset)}\n      })\n    }\n\n    return result\n  }\n/**\n * Returns a clone of the Ztree\n */\n  clone(){\n    return new ZtreeReader(this.plain()).tree;\n  }\n\n  /**\n   * Returns a JSON string of the tree\n   */\n  toJSON(){\n    return StringUtils.toString(this.plain())\n  }\n\n  addNode(ZdogItem){\n    this.flatten(ZdogItem);\n  }\n\n  _addRelation(parentId, childIds){\n    let newSet = this.relationMap.get(parentId)\n    if (!newSet) {\n      newSet = new Set()\n    } \n    for (let id of childIds){\n      newSet.add(id);\n    }\n    this.relationMap.set(parentId, newSet);\n  }\n/**\n * Removes node from Ztree, returns the removed node\n * @param {String} id of Zdog node to remove\n */\n  removeNode(id){\n    if (id == this.illustration.id) throw new Error('Cannot delete root')\n    let node = this.nodeMap.get(id)\n\n    if (node.children){\n      //put children to parent node\n      let parent = node.addTo\n      node.children.map(child=>{\n        child.remove();\n        parent.addChild(child);\n      })\n      //update Map\n      let childs = this.relationMap.get(id);\n      if (childs){\n        childs = [...childs]\n        this._addRelation(this.relationMap.get(parent.id), childs)\n      }\n    }\n\n    //remove record of relations\n    this.relationMap.delete(id);\n    this.relationMap.forEach(childSet=>{\n      childSet.delete(id);\n    })\n    //update Map\n    this.nodeMap.delete(id);\n    node.remove()\n\n    return node;\n  }\n//id of the node to be adopted\n  changeParent(id, newParentId){\n    let childnode = this.nodeMap.get(id)\n    let oldParentNode = childnode.addTo\n    let pnode = this.nodeMap.get(newParentId);\n    //remove child from set record\n    this.relationMap.get(oldParentNode.id).delete(id)\n    this._addRelation(newParentId, [id])\n\n    if (oldParentNode){\n      oldParentNode.removeChild(childnode);\n    }\n\n    pnode.addChild(childnode);\n    return pnode;\n  }\n\n  /**\n   * Returns an array of all Zdog items in the tree\n   */\n  get nodes(){\n    return [...this.nodeMap.values()];\n  }\n\n  /**\n   * Returns insertion order index of the Zdog object (insertion order accoridng to Map API is not reliable)\n   * @param {*} node String id or Zdog object\n   */\n  indexOf(node){\n    let id = Ztree._nodeID(node);\n    return [...this.nodeMap.keys()].indexOf(id);\n  }\n\n  hasChildren(node){\n    let id = Ztree._nodeID(node);\n    let set = [...this.relationMap.get(id).values()];\n    return (set.children.some(child=>{\n      return !isNaN(child.type)\n    }));\n  }\n\n  hasParent(node){\n    let id = Ztree._nodeID(node);\n    let set = this.relationMap.get(id);\n    return (set && set.size() > 0);\n  }\n\n  find(id){\n    return this.nodeMap.get(id);\n  }\n\n  /**\n   * Internal helper function meant for retrieving the ID incase someone passes the Zdog object instead. Returns String\n   * @param {*} arg String id or Zdog object\n   */\n  static _nodeID(arg){\n    let ID = arg\n    if (typeof node === \"string\") {\n      ID = arg;\n    } else {\n      ID = arg.id;\n    }\n    // else {\n    //   throw new Error('Invalid argument, must be string or zdog Object')\n    // }\n    return ID\n  }\n\n  getChildNodes(node){\n    let ID = Ztree._nodeID(node);\n    let childIds = [];\n    this.relationMap.forEach((relation)=>{\n      if (relation.from == ID){\n        childIds.push(relation.to);\n      }\n    })\n    return childIds.map((cid)=>{\n      this.nodeMap.get(cid);\n    })\n  }\n\n  // get leaves(){\n  //   return this.nodes.filter((node)=>{\n  //     return node.children.length == 0\n  //   })\n  // }\n\n  get groups(){\n    return this.anchors.filter(node=>{\n      return isClass(node, 6)\n    })\n  }\n\n  get anchors(){\n    return this.nodes.filter(node=>{\n      return isClass(node, 0)\n    })\n  }\n\n  generateEmbed({selector, width, height, bgColor, mini}){\n    let combined = ''\n    combined += canvasTagGenerate(selector, width, height, bgColor) + '\\n'\n    combined += '<script src=\"https://unpkg.com/zdog@1/dist/zdog.dist.min.js\"></script>' + '\\n'\n    combined += scriptTagGenerate(this, selector, mini)\n    return combined\n  }\n}\n\n/** EMBED GENERATORS\n */\n\n function canvasTagGenerate(selector='.zdog-canvas', width=300, height=300, bgColor='transparent'){\n   let attribute = '';\n   let omitSelector = (str) => {\n    return str.substr(1, str.length - 1)\n   }\n   switch (selector[0]) {\n    case '.':\n      attribute = `class=\"${omitSelector(selector)}\"`\n      break;\n    case '#':\n      attribute = `id=\"${omitSelector(selector)}`\n      break;\n    case '[':\n      attribute = selector.replace(/\\[\\]\\^\\*\\$/g, '')\n      break;\n    default:\n      attribute = `class=\"${selector}\"`\n   }\n   return `<canvas ${attribute} width=\"${width}\" height=\"${height}\" style=\"background-color:${bgColor}\"></canvas>`\n }\n\n //https://javascript.info/string\n/**\n * Creates a JavaScript <script> string of the Ztree (for embed copy-paste)\n * @param {Ztree} ztree \n * @param {Boolean} mini \n */\n function scriptTagGenerate(ztree, selector=\".zdog-canvas\", mini=false){\n   let result = '<script>'\n   let nl = mini?'':'\\n'\n   let plain = ztree.trimmedView()\n   //return an array with [base, children, nestedChilds]\n   let getFlat = (node) => {\n     let arr = [node];\n     if (node.children && node.children.length > 0) {\n      node.children.forEach(child=>{\n        child.addTo = node.id\n        arr = [...arr, ...getFlat(child)]\n      })\n     }\n     return arr\n   }\n   let properNames = ZDOG_CLASS_NAME.map(name=>{\n    return capitalize(name)\n   })\n   properNames[11] = \"RoundedRect\"\n   let order = getFlat(plain[0])\n\n   for (let i = 0; i < order.length; i++){\n     let id = order[i].id\n     let type = properNames[ZDOG_CLASS[order[i].type]]\n     let node = ztree.find(id)\n     let options = justProps(node)\n\n     let declaration = `${nl}var ${id} = new Zdog.${type}(`\n     if (type == \"Illustration\"){\n       options.dragRotate = true\n       options.element = selector;\n      }\n\n     //prune options to save filesize\n     delete options.id\n     delete options.type\n     delete options.name\n\n     let defaults = node.constructor.defaults;\n     for (let d in defaults){\n      if (defaults[d] == options[d]){\n        delete options[d]\n      }\n     }\n\n     for (let d in options){\n      if (d == 'translate' || d == 'rotate'){\n        if (options[d].x == 0){\n          delete options[d].x\n        }\n        if (options[d].y == 0){\n          delete options[d].y\n        }\n        if (options[d].z == 0){\n          delete options[d].z\n        }\n        if (options[d] == {}){\n          delete options[d]\n        }\n      }\n      if (d == 'scale'){\n        if (options[d].x == 1){\n          delete options[d].x\n        }\n        if (options[d].y == 1){\n          delete options[d].y\n        }\n        if (options[d].z == 1){\n          delete options[d].z\n        }\n        if (options[d] == {}){\n          delete options[d]\n        }\n      }\n     }\n\n     //use plugin to avoid double quotes from JSON.stringify\n     let jjj = json_beautifier(options, {\n      dropQuotesOnKeys:true,\n      minify:mini\n     })\n\n     if (order[i].addTo){\n      declaration += jjj.slice(0, jjj.length-1)\n      declaration += `,${nl}addTo: ${order[i].addTo}${nl}}`\n     } else {\n      declaration += jjj\n     }\n     declaration += ');'+nl;\n     result += declaration\n   }\n\n   result += `${nl}function animate(){${ztree.illustration.id}.updateRenderGraph();${nl}requestAnimationFrame(animate);}${nl}animate();${nl}</script>`\n   return result\n }\n\nfunction capitalize(string){\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\n\nconst  ZCLASS = {\n  TYPES: ZDOG_CLASS_TYPE,\n  ENUMS: ZDOG_CLASS,\n  NAMES: ZDOG_CLASS_NAME\n}\n\nconst zCopy = copy;\n\n//** EXPORTS */\n\n /**\n * To create a Zdog object with id: Zdogger('anchor')\n * \n * To create a Ztree: new Z.Tree(illustration)\n * \n * To create a file reader: new Z.Reader(Ztree)\n * \n * To create a copy: Z.copy(ZdogItem, deep?)\n * \n  * @param {String} type \n  */\n const Z = {\n   make:(type) => {\n    if (typeof type == 'string') return create(type);\n    if (typeof type == 'number') return make(type);\n    if (type.id) return reviveZdog(type)\n    return null;\n  },\n  copy: copy,\n  is: isClass,\n  import: importExisting,\n  revive: reviveZdog,\n  toObject: toObject,\n  justProps: justProps,\n  propsFor: validProps,\n  CLASS: ZCLASS,\n  Tree: Ztree,\n  /**\n   * Reads a JSON import\n   */\n  Reader: ZtreeReader,\n }\n\n\nconst StringUtils = {\n  capitalize: capitalize,\n  toString: (o) => {return JSON.stringify(o)}\n}\n\n\nexport {Z, Ztree, ZtreeReader,\n  ZCLASS, zCopy, justProps, StringUtils }\n\n\nexport default Z;","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Creation.vue?vue&type=style&index=0&id=2ffd653c&scoped=true&lang=css\"","\n/* eslint-disable no-unused-vars */\n//import Zdog from 'zdog' // ../../zdog\nimport Zdog from 'zdog'\nimport {Z} from './ztree';\n\n//import versor from 'versor'\n\nvar requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame ||\n                            window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;\n\nvar cancelAnimationFrame = window.cancelAnimationFrame || window.mozCancelAnimationFrame;\n\n/**\n * Returns an array with [ r g b ] values\n * @param {*} context CanvasRendering2DContext\n * @param {*} x \n * @param {*} y \n */\nfunction getPixel(context, x, y) {\n  let imageData = context.getImageData( x, y, 1, 1 );\n  let data = imageData.data;\n  return [data[0],data[1],data[2]];\n}\n\nfunction colorKey(data){\n  return  `${data[0]}${data[1]}${data[2]}`\n}\n\nfunction rgbString(data){\n  return `rgb(${data[0]},${data[1]},${data[2]})`\n}\n\nclass GhostCanvas{\n  constructor(ztree, ghostIllo){\n    this.ztree = ztree;\n    this.illustration = ghostIllo\n    this.illustration.name = 'ghost'\n    this.init()\n\n    let syncWithCanvas = (ctx) => {\n      ctx.setTransform(...this.transformMatrix)\n      this.illustration.rotate = this.ztree.illustration.rotate;\n      this.illustration.translate = this.ztree.illustration.translate;\n      this.illustration.updateGraph();\n    }\n    this.illustration.onPrerender = syncWithCanvas\n  }\n\n\n  init(){\n    let clone = this.ztree.clone()\n    this.ghostNodes = clone.nodeMap;\n    this.illustration.children = clone.illustration.children\n\n    this.colorMap = new Map(); //<rgba:[3], id: string>\n    this.nodeColors = new Map(); //<id: string, rgba:[3]>\n    let nodes = this.ghostNodes.values();\n    for(let node of nodes){\n      if (node.isCanvas) {\n        continue\n      }\n        let color = getRandomRgb();\n        GhostCanvas.setUniformColor(node, color)\n        this._setMaps(node, color)\n    }\n\n  }\n\n  get nodeMap(){\n    return this.ztree.nodeMap;\n  }\n  get transformMatrix(){\n    return this.ztree.illustration.transformMatrix\n  }\n  /**\n   * Updates nodes and deletes those that are not present in the live canvas.\n   */\n  pruneGhost(){\n    let toDelete = {};\n    this.ghostNodes.forEach(node=>{\n      if (node.id && node.type && !node.isCanvas){\n        toDelete[node.id] = true;\n      }\n    })\n    this.nodeMap.forEach((node,id)=>{\n      //id still exists, update and do not delete\n      if (this.nodeColors.has(id)){\n        toDelete[id] = false;\n        this.updateNode(id)\n      } else if (!node.isCanvas){\n        // id not registered, add it\n        this.addNode(node)\n      }\n    })\n    for (let id in toDelete){\n      if(toDelete[id]){\n        this.removeNode(id)\n      }\n    }\n  }\n/**\n * Takes the live Zdog and creates a ghost copy\n * @param {*} zdog Zdog from live canvas\n */\n  addNode(zdog){\n    if (!zdog.id) throw new Error('Invalid zdog object (must have \"id\" property ')\n    let color = getRandomRgb()\n    let clone = zdog.copy();\n    Object.assign(clone, Z.justProps(zdog))\n    //\n    let parentid = zdog.addTo.id\n    if (this.ghostNodes.has(parentid)){\n      let parentGhost = this.ghostNodes.get(parentid)\n      parentGhost.addChild(clone)\n    }\n    \n    GhostCanvas.setUniformColor(clone, color)\n    this._setMaps(clone, color)\n\n\n    return clone\n  }\n/**\n * Removes the specified node from the ghost canvas\n * @param {String} id of Zdog object\n */\n  removeNode(id){\n    let toRem = this.ghostNodes.get(id)\n    toRem.remove()\n    let k = this.nodeColors.get(id)\n    this.colorMap.delete(k)\n    this.nodeColors.delete(id)\n    this.ghostNodes.delete(id)\n  }\n\n  _setMaps(node, color){\n    if (node.id && node.type !== undefined){\n      let str = colorKey(color)\n      this.colorMap.set(str, node.id)\n      this.nodeColors.set(node.id, str)\n      this.ghostNodes.set(node.id, node)\n    }\n  }\n\n/**\n * Sync the ghost node's noncolor properties with the live node\n * @param {String} id of Zdog node\n */\n  updateNode(id){\n     let original = this.nodeMap.get(id);\n    // if (!original) {\n    //   this.pruneGhost()\n    //   return\n    // }\n    let o = {}\n    let nodeProps = Z.propsFor(original).filter(prop=>{\n      return !COLOR_PROPS.includes(prop)\n    })\n    nodeProps.forEach(prop=>{\n      o[prop] = original[prop]\n    })\n    let gn = this.ghostNodes.get(id)\n    Object.assign(gn, o)\n  }\n\n  //id of the node to be adopted\n  changeParent(id, newParentId){\n    let childnode = this.ghostNodes.get(id)\n    childnode.remove();\n    this.ghostNodes.get(newParentId).addChild(childnode);\n  }\n\n/**\n * Returns the node id that is under the coordinates\n * @param {Number} screenX \n * @param {Number} screenY\n * @returns {String}\n */\n  pickSelectShape(screenX, screenY){\n    this.illustration.renderGraph()\n    let pr = this.illustration.pixelRatio;\n    let color = getPixel(\n      this.illustration.ctx,\n      screenX * pr,\n      screenY * pr\n      )\n    return this.colorMap.get(colorKey(color))\n  }\n\n    /**\n   * Sets a Zdog node to a single color and returns the original Zdog object\n   * @param {*} node the Zdog object\n   * @param {*} colorData the array of [ r g b]\n   */\n  static setUniformColor(zdog, colorData){\n    //Set all color props to same\n    let string = rgbString(colorData);\n    let previous = Z.justProps(zdog)\n\n    let f = (zdog) => {\n      COLOR_PROPS.forEach(prop=>\n      {if (zdog[prop]) zdog[prop] = string})}\n\n      f(zdog)\n\n    //same with cildren\n    zdog.children.forEach(child=>{\n      //make sure it is not a separate entity (has an id)\n      if (!child.id){\n        GhostCanvas.setUniformColor(child, colorData)\n        let dependents = child._flatGraph; //some composite shapes have flatgraph\n        if (dependents){\n          dependents.forEach(d=>{\n            GhostCanvas.setUniformColor(d, colorData)\n          })\n        }\n      }\n\n    })\n   return previous\n  }\n}\n\nconst eventDeselect = new Event('deselect')\n/**\n * Zdog Scene\n */\nclass Scene{\n  animReq = null\n  dragging = false\n  canPan = false;\n  isMouseDown = 0;\n  totaldelta = 0;\n/**\n * Creates a Scene object that allows panning/zooming.\n * @param {Ztree} ztree\n * @param {*} options \n */\n  constructor(ztree, options={ghostQuery:'.zdog-ghost', zoomSpeed:1, panInverse:false, panSpeed:30}){\n    for(let o in options){\n      this[o] = options[o]\n    }\n    //theta is azimuthal angle (along zx plane)\n    //phi is polar angle (along xy plane)\n    /**\n            | -y\n            |\n            | __________ +x\n           /|\n          / |\n      +z /  | +y\n        /\n     */\n\n    this.ztree = ztree\n    this.illustration = ztree.illustration;\n\n    this.ghostIllo = new Zdog.Illustration({\n      element: this.ghostQuery,\n      dragRotate:false,\n    })\n\n    this.ghostCanvas = new GhostCanvas(ztree, this.ghostIllo)\n\n    this.setSize(window.innerWidth, window.innerHeight);\n    this.unitAxes = new UnitAxes({addTo:ztree.illustration})\n\n    this.eye = {}\n    this.worldPosition = new Zdog.Vector();\n\n    this.phi = this.illustration.rotate.x\n    this.theta = this.illustration.rotate.y\n    this.rho = this.defaultRho\n\n    /**EVENTS***************/\n    this.events = {\n      wheel:[],\n      down:[],\n      up:[],\n      move:[],\n    }\n\n    let ctx = this;\n    this.dragger = new Zdog.Dragger({\n      startElement: ctx.illustration.element,\n      onDragStart: function(event, pointer) {\n        ctx.cursordown(event, pointer)\n      },\n      onDragMove: function( event, pointer, dX, dY ) {\n        ctx.cursormove( event, pointer, dX, dY)\n      },\n      onDragEnd: function(event) {\n        ctx.cursorup(event)\n      },\n    });\n\n    this.onwheel = (e) => this._dispatch('wheel', e)\n    ctx.illustration.element.addEventListener('wheel', this.onwheel)\n    this.on('wheel', this.zooming.bind(this))\n\n    this.label = document.createElement('span')\n    // this.label.innerText = `${Math.round(this.zoom * 100)}%`\n    this.animate();\n  }\n\n  static ORIGIN = {x:0,y:0,z:0}\n\n  get x(){\n    return this.rho * Math.cos(this.phi) * Math.sin(this.theta)\n  }\n  get y(){\n    return this.rho * Math.sin(this.phi)\n  }\n  get z(){\n    return this.rho * Math.cos(this.phi) * Math.cos(this.theta)\n  }\n  // starting ρ value (distance from origin)\n  get defaultRho(){\n    return (this.illustration.canvasHeight / 2)\n  }\n\n  /** Sync ghost and canvas */\n  setSize(width, height){\n    this.illustration.setSize(width, height);\n    this.ghostIllo.setSize(width, height);\n  }\n\n\n\n  /**\n   * Cursor events handle touch/mouse/pointer\n   */\n  cursordown(event, pointer) {\n    this.x0 = pointer.pageX;\n    this.y0 = pointer.pageY;\n    this.totaldelta = 0;\n\n    this.isMouseDown = event.buttons;\n    if (event.button == 1){    //MMB pressed\n      this.canPan = true;\n      }\n      this._dispatch('down', event)\n    }\n\n  cursormove(event, pointer, dX, dY ){\n    if (this.canPan){\n      this.dragPan(pointer)\n    } else {\n      this.dragRotate(pointer, dX,dY)\n    }\n    this._dispatch('move', event)\n  }\n\n  dragPan(pointer){\n    let [dx, dy] = this._screendelta(pointer)\n\n    if (!this.panInverse){\n      dx = dx * -1\n      dy = dy * -1\n    }\n\n    let speed = (this.panSpeed / 100)\n    let y2 = this.illustration.translate.y + (dy*speed)\n    let x2 = this.illustration.translate.x + (dx*speed)\n    let o = {x:x2, y:y2, z:this.z}\n    this.illustration.translate = o;\n  }\n\n  dragRotate(pointer) {\n    let [dx, dy] = this._screendelta(pointer)\n    this.theta = (this.theta + this.radRatio( dx));\n    this.phi = (this.phi + this.radRatio( dy ));\n    let o = {x:this.phi, y:this.theta, z:this.illustration.rotate.z}\n    this.illustration.rotate = o;\n  }\n\n  cursorup(event){\n    this.isMouseDown = event.buttons\n    if (event.button == 1){     //MMB released\n      this.canPan = false;\n    }\n    //detect if drag or click\n    if (Math.abs(this.totaldelta) < 5 ) {    //might need a threshold depending on mobile/web... maybe later\n      // it is a click\n      this.selection(event)\n    }\n    this._dispatch('up', event)\n      //console.log(`(ρ,θ,φ):(${ctx.rho},${ctx.theta},${ctx.phi})`)\n  }\n\n  _screendelta(pointer){\n    let deltaX = this.x0 - pointer.pageX;\n    let deltaY = this.y0 - pointer.pageY;\n    this.x0 = pointer.pageX;\n    this.y0 = pointer.pageY;\n    this.totaldelta += (deltaX + deltaY)\n    return [deltaX, deltaY]\n  }\n\n  zooming(event){\n    event.preventDefault();\n    let z0 = this.illustration.zoom, z = z0 + event.deltaY * this.zoomSpeed;\n\n    console.log(`(ρ,θ,φ):(${this.rho},${this.theta},${this.phi})`)\n\n    this.illustration.zoom -= z / this.defaultRho\n    if (this.illustration.zoom < 0) { this.illustration.zoom = 0.1 }\n    // z = vertical screen pixels scrolled (on a normal webpage)\n    this.rho -= this.rho + z\n    this.label.innerText = `${Math.round(this.illustration.zoom * 100)}%`\n  }\n\n  selection(event){\n    let id = this.ghostCanvas.pickSelectShape(event.offsetX, event.offsetY)\n\n    if (id && id != this.selectActive){\n      const selectShape = new CustomEvent('selectshape',{\n        detail:\n        {id: id}\n      });\n      this.illustration.element.dispatchEvent(selectShape)\n      this.selectActive = id;\n    } else if (this.selectActive && !id) {\n      this.illustration.element.dispatchEvent(eventDeselect)\n      this.selectActive = false;\n    }\n  }\n\n  keydown(e){\n    //Shift -> pan\n    if (e.keyCode == 16){\n      this.canPan = true;\n    }\n    // Tilde graves `\n    else if (e.keyCode == 192) {\n      let ghost = this.ghostCanvas.illustration.element;\n      let isHidden = ghost.classList.contains('hidden');\n      isHidden? ghost.classList.remove('hidden') : ghost.classList.add('hidden') ;\n    }\n  }\n\n  keyup(e){\n    //Shift -> pan\n    if (e.keyCode == 16 && this.isMouseDown < 4){\n      this.canPan = false;\n    }\n  }\n\n /**\n  * Attach events to the canvas element.\n  * \n  * 'selectshape' is a custom event. event.detail.id returns the shape's id if the user clicks on the screen and a shape is underneath the point.\n  * \n  *  new Scene().on('selectshape', (e)=>{console.log(e.detail.id)})\n  * \n  * Other event names include 'down','up','move', which trigger on mouse/touch/pointer, and 'wheel'\n  * \n  * @param {*} eventName \n  * @param {*} callback function(event){...}\n  */\n  on(eventName, callback){\n    let dispatch = this.events[eventName]\n    if (dispatch === null || dispatch === undefined){\n      this.events[eventName] = callback\n      this.illustration.element.addEventListener(eventName, callback)\n    } else if (dispatch.length !== undefined) {\n      this.events[eventName].push(callback)\n    }\n  }\n\n  _dispatch(eventName, event){\n    this.events[eventName].forEach(fn=>{\n      fn(event)\n    })\n  }\n\n  /**\n   * Returns a radian value to correlate rotation with screen pixel projection\n   * @param {Number} delta in screen pixels\n   */\n  radRatio(delta){\n    return delta * (Math.PI * 2) / this.illustration.canvasWidth;\n  }\n\n  animate = () => {\n    this.illustration.updateRenderGraph()\n    this.animReq = requestAnimationFrame(this.animate)\n  }\n\n  unanimate(){\n    cancelAnimationFrame(this.animReq)\n  }\n\n  addNode(node){\n    this.ztree.addNode(node)\n    this.ghostCanvas.addNode(node)\n  }\n\n  removeNode(id){\n    this.ztree.removeNode(id)\n    this.ghostCanvas.removeNode(id)\n  }\n\n  updateNode({node, options}){\n    //let node = this.ztree.find(id)\n    for (let o in options){\n      node[o] = options[o]\n    }\n    this.ghostCanvas.updateNode(node.id)\n  }\n\n  changeParent(id, newParentId){\n    this.ztree.changeParent(id, newParentId)\n    this.ghostCanvas.changeParent(id, newParentId)\n  }\n\n  destroy(){\n    cancelAnimationFrame(this.animReq)\n\n    let listeners = this.events;\n    for (let name in listeners){\n      if (name == 'wheel'){\n        this.illustration.element.removeEventListener(name, this.onwheel)\n      } else if (listeners[name].length == undefined || listeners[name].length == null ){\n        this.illustration.element.removeEventListener(name, listeners[name])\n        delete this.events[name]\n      } else {\n        this.events[name] = [];\n      }\n    }\n    this.dragger.destroy();\n    delete this.dragger\n  }\n\n}\n\n/**\n * A class to generate the 6 coordinate axes (XYZ and -XYZ)\n * Options:\n *  - addTo: Zdog object\n *  - scaleZoom: Set true to use stroke\n *  - t: Specify Length of axis, otherwise set to inner Window\n * \n * And you can pass standard Zdog shape options.\n */\nclass UnitAxes{\n  flag = 0b111111;\n  axes = [];\n  constructor(options={addTo:null,scaleZoom:false }){\n    this.root = new Zdog.Anchor();\n    let opts = options;\n    if (!options) {\n      opts = {addTo:null,scaleZoom:false}\n    }\n    opts.t = opts.t || window.innerWidth || 100;\n\n    let form = (front, color) => {\n      let o = {\n        front:front,\n        color:color,\n        visible:true,\n      }\n      Object.assign(o, opts)\n      let a = makeAxis(o);\n      this.root.addChild(a)\n      return a\n    }\n\n    let opacity = 0.6\n    this.axes = [\n      form({x:1}, 'x'),\n      form({y:1}, 'y'),\n      form({z:1}, 'z'),\n      form({x:-1}, `hsla(0,100%,30%,${opacity})`),\n      form({y:-1}, `hsla(120,100%,30%,${opacity})`),\n      form({z:-1}, `hsla(240,100%,30%,${opacity})`)\n    ]\n\n    if (options.addTo){\n      this.addTo(options.addTo)\n    }\n  }\n\n  addTo(zdog){\n    zdog.addChild(this.root)\n  }\n\n  remove(){\n    this.root.remove();\n  }\n\n  update(){\n    for (let i = 0; i < this.axes.length; i++) {\n      this.axes[i].visible = ((this.flag & (1 << i)) > 0)\n    }\n    this.root.updateGraph();\n  }\n\n  hideAll(){\n    this.flag = 0;\n    this.update();\n  }\n\n  showAll(){\n    this.flag = 63;\n    this.update();\n  }\n\n  //sets visible flag for the positive axes, pass true to show and false to hide\n  showPos(bool){\n    if (bool === false){\n      this.flag = (this.flag & (7 << 3))\n    } else {\n      this.flag = (this.flag | 7)\n    }\n    this.update();\n  }\n\n  //same for negative axes\n  showNeg(bool){\n    if (bool === false){\n      this.flag = (this.flag & 7)\n    } else {\n      this.flag = (this.flag | (7<<3))\n    }\n    this.update();\n   }\n}\n\n//Checks if a bit is set at the position\nfunction getBit(num, p){\n  return ((num & (1 << p)) > 0)\n}\n// Toggle bit at position and return new number\nfunction toggleBit(num, p){\n  return (num ^ (1<<p))\n}\n\n/** ZDOG HELPERS SAUCE by Mootari:\n * https://observablehq.com/@mootari/zdog-helpers\n */\n\n\n/**\n * Creates axes and returns an Anchor\n *\n * ---\n *\n * Options:\n *\n * {\n * size: Number, length of the axes; default 100\n *\n * head: Number, length of the arrow; default 10\n *\n * stroke: Number\n *\n * x: String, color of the x axis, null for insivible; default 'red'\n *\n * y: String, color of the y axis, null for insivible; default 'green'\n *\n * z: String, color of the z axis; default 'blue'\n *\n * }\n * @param {*} options\n */\nfunction axesHelper({size = 100, head = 10, stroke = 1, x = 'hsl(0, 100%, 50%)', y = 'hsl(120, 100%, 50%)', z = 'hsl(240, 100%, 50%)', ...options} = {}) {\n  const PIH = Math.PI / 2;\n  const line = (color, rotate) => {\n    const l = new Zdog.Shape({color, path: [{}, {x: size}], fill: false, stroke, rotate});\n    if(head) {\n      let colorHSL = parseHSL(color);\n      new Zdog.Cone({\n        addTo: l,\n        color, stroke: false, fill: true, length: head,\n        backface: `hsl(${colorHSL[0]},${colorHSL[1]}%,${colorHSL[2] - 15}%)`,\n        diameter: head * .66,\n        rotate: {y: -PIH},\n        translate: {x: size},\n      });\n    }\n    return l;\n  }\n\n  const a = new Zdog.Anchor(options);\n  if(x) a.addChild(line(x, {}));\n  if(y) a.addChild(line(y, {z: PIH}));\n  if(z) a.addChild(line(z, {y: PIH}));\n  return a;\n}\n\n\n\n/**\n * Creates a grid with even lines and returns an Anchor\n *\n * ---\n *\n * Options:{\n *\n * size: Number, default 100\n *\n * divisions: Number, default 10\n *\n * color: String, default '#888'\n *\n * stroke: Number, default 1\n *\n * front: Object, define the front plane, same as Zdog; default {z:1}\n * }\n * @param {Object} options\n */\nfunction gridHelper({size = 100, divisions = 10, color = '#888', stroke = 1, front = {z:1}, ...options} = {}) {\n  const sh = size/2;\n  const path = [];\n  for(let i = 0; i < divisions+1; i++) {\n    const o = size/divisions*i-sh;\n    path.push(\n      {move: {z: -sh, x: o}},\n      {line: {z: sh, x: o}},\n      {move: {x: -sh, z: o}},\n      {line: {x: sh, z: o}}\n    );\n  }\n  const a = new Zdog.Anchor(options);\n  new Zdog.Shape({path, front, stroke: stroke, fill: false, color, addTo: a});\n  return a;\n}\n\n/**\n * Returns a grid Anchor object\n *\n * ---\n *\n * Options:{\n *\n * size: Number, default 100\n *\n * divisions: default 10\n *\n * color: String, default '#888'\n *\n * stroke: Number, default 1\n *\n * ...native Zdog options as needed (front is default z)\n * }\n * @param {*} options\n */\nfunction gridRectHelper({size = 100, divisions = 10, color = '#888', stroke = 1, front = {z:1}, ...options} = {}) {\n  const sh = size/2, s = size/divisions;\n  const addTo = new Zdog.Anchor(options);\n\n  for(let z = 0; z < divisions; z++) {\n    const oz = s*z - sh;\n    for(let x = 0; x < divisions; x++) {\n       const ox = size/divisions * x - sh;\n        new Zdog.Shape({stroke, fill: false, color, closed: true, addTo, front, path: [\n          {move: {z: oz, x: ox}},\n          {line: {z: oz, x: ox + s}},\n          {line: {z: oz + s, x: ox + s}},\n          {line: {z: oz + s, x: ox}},\n        ]});\n    }\n  }\n\n  return addTo;\n}\n\n/**\n * Adds rotation guidemarks to an object's axes\n *\n * ---\n *\n * Options:\n *\n * {\n * size: Number, radius of the marker\n *\n * hole: Number from 0-1, radius of the inner hole as decimal percent, default: 0.5\n *\n * range: Number, ratio of trail tapering; 0 for no tapering. A number larger than 1 will go outside the original perimeter\n *\n * x: String, color of the x axis, null for insivible\n *\n * y: String, color of the y axis, null for insivible\n *\n * z: String, color of the z axis\n * }\n * @param {Object} options\n */\nfunction rotationHelper({size: r = 1, hole = .5, range = 1, x = 'red', y = 'green', z = 'blue', ...options} = {}) {\n  const mix = (a, b, t) => a + t * (b - a);\n  const root = new Zdog.Anchor(options), Q = Zdog.TAU*.25;\n  const r1 = r * hole, r2 = mix(r1, r, range);\n  const path = (r, r1, r2) => [\n    {move: {x: r, y: 0}},\n    {arc: [ {x: r, y: r}, {x: 0, y: r} ]},\n    {line: {x: 0, y: r1}},\n    {arc: [ {x: mix(r1,r2,.5), y: mix(r1,r2,.5)}, {x: r2, y: 0} ]},\n  ];\n\n // for(let {color, colorTop = color, rotate} of [\n  for(let {color, rotate} of [\n    x && {color: x, rotate: {y:Q}},\n    y && {color: y, rotate: {x:Q}},\n    z && {color: z, rotate: {z:Q}},\n  ].filter(v => v)) {\n    const ring = new Zdog.Anchor({addTo: root, rotate});\n    for(let i = 0; i < 4; i++) {\n      new Zdog.Shape({\n        addTo: ring,\n        path: path(r, mix(r1, r2, i/4), mix(r1, r2, (i+1)/4)),\n        rotate: {z: -Q*i},\n        closed: true,\n        fill: true,\n        stroke: false,\n        color,\n      });\n    }\n  }\n\n  return root;\n}\n\n// Fills the canvas with the specified color. Call in onPrerender.\nfunction clearColor(illo, color) {\n  const ctx = illo.ctx;\n  ctx.save();\n  ctx.resetTransform();\n  ctx.fillStyle = color;\n  ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n  ctx.restore();\n}\n\n/**\n * Attaches zoom event to the illustration, returns the illustration\n * @param {Zdog.Illustration} illo\n * @param {Object} options\n */\nfunction zoomable(illo, options = {}) {\n  Object.assign(illo, {\n    setZoomable(zoomable) {\n      zoomable\n        ? this.element.addEventListener('wheel', this)\n        : this.element.removeEventListener('wheel', this);\n    },\n    zoomSpeed: .001,\n    minZoom: .1,\n    onwheel(event) {\n      event.preventDefault();\n      const z0 = this.zoom, z = z0 - event.deltaY * this.zoomSpeed;\n      // Max boundary handled by Zdog.\n      this.zoom = z < this.minZoom ? this.minZoom : z;\n      if(this.onZoom) this.onZoom(this.zoom, this.zoom - z0);\n    }\n  }, options);\n  illo.setZoomable(illo.zoomSpeed != 0);\n  return illo;\n}\n\n/**\n * Creates an object that can add functionality to new Illustration instance\n *\n * e.g.\n *\n *  const perspective = perspectiveHelper({fov: 300});\n *\n *  const illo = new Zdog.Illustration({\n    element...\n*\n    onPrerender() {\n      perspective.onPrerender(this);\n    },\n  });\n *\n * ---\n * Options: {\n *\n * fov: Number, field of view, default 100\n *\n * zOffset: Number, height of camera, default 0,\n *\n * scaleStroke: Boolean; default true}\n *\n * @param {Object} options\n */\nfunction perspectiveHelper({fov = 100, zOffset = 0, scaleStroke = true} = {}) {\n\n  function walk(illo, callback) {\n    const top = new Set(illo.flatGraph);\n    for(const g of top) _walk(g);\n\n    function _walk(item) {\n      callback(item);\n      for(const c of item.children)\n        if(!top.has(c)) _walk(c);\n    }\n  }\n\n  return {\n    fov,\n    zOffset,\n    scaleStroke,\n\n    getScale(p) {\n      return this.fov / (this.fov - p.z + this.zOffset);\n    },\n\n    scalePoint(p) {\n      const s = this.getScale(p);\n      p.x *= s;\n      p.y *= s;\n    },\n\n    onPrerender(illo) {\n      walk(illo, e => {\n        this.scalePoint(e.renderOrigin);\n\n        if(e.pathCommands && e.pathCommands.length) {\n          if(this.scaleStroke && e.stroke) {\n            if(e._stroke == null) e._stroke = e.stroke;\n            e.stroke = e._stroke * this.getScale(e.pathCommands[0].endRenderPoint);\n          }\n\n          for(const c of e.pathCommands)\n            for(const p of c.renderPoints)\n              this.scalePoint(p);\n        }\n\n      });\n    },\n\n    resetStroke(illo) {\n      walk(illo, e => {\n        if(e._stroke !== undefined) {\n          e.stroke = e._stroke;\n          e._stroke = undefined;\n        }\n      });\n    }\n  };\n\n}\n\nfunction makeAxis(options){\n  return new Zdog.Axis(options)\n}\n\nconst COLOR_PROPS = [\n  'color', 'rearFace', 'frontFace', 'leftFace', 'rightFace', 'topFace', 'bottomFace', 'backface'\n]\n\n\n//https://stackoverflow.com/questions/23095637/how-do-you-get-random-rgb-in-javascript\nfunction getRandomRgb() {\n  var num = Math.round(0xffffff * Math.random());\n  var r = num >> 16;\n  var g = num >> 8 & 255;\n  var b = num & 255;\n  return [r,g,b]\n}\n\n/**\n * Takes an HSL string and returns an array of the HSL values.\n * https://stackoverflow.com/questions/19289537/javascript-match-and-parse-hsl-color-string-with-regex\n * @param {*} color hsl string in the format hsl(x, x%, x%)';\n */\nfunction parseHSL(color){\n  let regexp = /hsl\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%\\)/g;\n  return regexp.exec(color).slice(1).map(val=>{\n    return Number(val);\n  });\n  //array of [0]: Hue, [1]: Saturation, [2]:Lightness\n}\n\nfunction drawRaw(illo, draw) {\n  const ctx = illo.ctx;\n  ctx.save();\n  ctx.resetTransform();\n  draw(ctx);\n  ctx.restore();\n}\n\n\nconst Color = {\n  PROPS: COLOR_PROPS,\n  randomRgb: getRandomRgb,\n  parseHSL: parseHSL\n}\n\nexport {\n  Scene,\n  UnitAxes,\n  makeAxis,\n  Color,\n};\n\nexport default Scene;","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./TreeItem.vue?vue&type=style&index=0&id=3c4a7a78&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Canvas.vue?vue&type=style&index=0&id=2d854e56&lang=css\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./App.vue?vue&type=style&index=0&id=f93fb03c&lang=css\"","/* eslint-disable no-unused-vars */\n\nimport Scene from './scene'\nimport {Z, StringUtils} from './ztree'\n\n\nconst ZCLASS = Z.CLASS\n\nlet Zdogger = (type) =>{\n  return Z.make(type)\n} \n\nObject.assign(Zdogger, {\n  Tree: Z.Tree,\n  Reader: Z.Reader,\n  Scene: Scene,\n  CLASS: ZCLASS,\n  is: Z.is,\n})\n\nconst StringMixin = {\n  methods: StringUtils\n}\n\nconst propsFor = Z.propsFor\n\nexport {StringMixin, propsFor}\n\nexport default Zdogger","import Zdog from 'zdog'\nimport Zdogger from './zdogger'\n\n// Made with Zdog\n\nconst TAU = Zdog.TAU;\n//const offWhite = '#FED';\nconst gold = '#EA0';\nconst garnet = '#C25';\nconst eggplant = '#636';\n\n\nconst illo = new Zdog.Illustration({\n  element: '.zdog-canvas',\n  zoom: 5,\n // rotate: { y: -TAU/8 },\n  dragRotate: true,\n\n});\n\n// ----- model ----- //\n\nvar hipX = 3;\n// hips\nvar hips = new Zdog.Shape({\n  addTo: illo,\n  path: [ { x: -hipX }, { x: hipX } ],\n  translate: { y: 2 },\n  stroke: 4,\n  color: eggplant,\n});\n\n// ----- legs ----- //\n\nvar leg = new Zdog.Shape({\n  addTo: hips,\n  path: [ { y: 0 }, { y: 12 } ],\n  translate: { x: -hipX },\n  rotate: { x: TAU/4 },\n  color: eggplant,\n  stroke: 4,\n});\n\n// foot\nvar foot = new Zdog.RoundedRect({\n  addTo: leg,\n  width: 2,\n  height: 4,\n  cornerRadius: 1,\n  translate: { y: 14, z: 2 },\n  rotate: { x: TAU/4 },\n  color: garnet,\n  fill: true,\n  stroke: 4,\n});\n\nvar standLeg = leg.copy({\n  translate: { x: hipX },\n  rotate: { x: -TAU/8 },\n});\n\nfoot.copy({\n  addTo: standLeg,\n  rotate: { x: -TAU/8 },\n});\n\n// ----- upper body ----- //\n\nvar spine = new Zdog.Anchor({\n  addTo: hips,\n  rotate: { x: TAU/8 },\n});\n\nvar chest = new Zdog.Shape({\n  addTo: spine,\n  path: [ { x: -1.5 }, { x: 1.5 } ],\n  translate: { y: -6.5 },\n  stroke: 9,\n  color: garnet,\n});\n\nvar head = new Zdog.Shape({\n  addTo: chest,\n  stroke: 12,\n  translate: { y: -9.5 },\n  color: gold,\n});\n\nvar eye = new Zdog.Ellipse({\n  addTo: head,\n  diameter: 2,\n  quarters: 2,\n  translate: { x: -2, y: 1, z: 4.5 },\n  rotate: { z: -TAU/4 },\n  color: eggplant,\n  stroke: 0.5,\n  backface: false,\n});\neye.copy({\n  translate: { x: 2, y: 1, z: 4.5 },\n});\n// smile\nnew Zdog.Ellipse({\n  addTo: head,\n  diameter: 3,\n  quarters: 2,\n  translate: { y: 2.5, z: 4.5 },\n  rotate: { z: TAU/4 },\n  closed: true,\n  color: '#FED',\n  stroke: 0.5,\n  fill: true,\n  backface: false,\n});\n\n// ----- arms ----- //\n\nvar armSize = 6;\n\n// arm on left\nvar upperArm = new Zdog.Shape({\n  addTo: chest,\n  path: [ { y: 0 }, { y: armSize } ],\n  translate: { x: -5, y: -2 },\n  rotate: { x: -TAU/4 },\n  color: eggplant,\n  stroke: 4,\n});\n\nvar forearm = new Zdog.Shape({\n  addTo: upperArm,\n  path: [ { y: 0 }, { y: armSize } ],\n  translate: { y: armSize },\n  rotate: { x: TAU/8 },\n  color: gold,\n  stroke: 4,\n});\n\n// hand\nnew Zdog.Shape({\n  addTo: forearm,\n  translate: { z: 1, y: armSize },\n  stroke: 6,\n  color: gold,\n});\n\n// arm on right\nupperArm.copyGraph({\n  translate: { x: 5, y: -2 },\n  rotate: { x: TAU/4 },\n});\n\n// function animate() {\n//   illo.updateRenderGraph();\n//   requestAnimationFrame( animate );\n// }\n\n// animate();\n\nlet tree = new Zdogger.Tree(illo)\nlet testmodel = tree.toJSON();\n\nexport default testmodel;","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./TreeView.vue?vue&type=style&index=0&id=62466cb6&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./TopBar.vue?vue&type=style&index=0&id=71a9b933&lang=css\""],"sourceRoot":""}