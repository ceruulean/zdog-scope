{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/menu/controls/ColorPicker.vue?b9d0","webpack:///./src/components/menu/PropertyPanel.vue?29b0","webpack:///./src/components/menu/controls/Tooltip.vue?53e4","webpack:///./src/components/menu/controls/InputVectorTooltip.vue?d273","webpack:///./src/components/Canvas.vue?ab92","webpack:///./src/components/menu/controls/InputVector.vue?81ef","webpack:///./src/store/modules/treeview.js","webpack:///./src/store/modules/properties.js","webpack:///./src/store/modules/canvas.js","webpack:///./src/store/modules/history.js","webpack:///./src/store/index.js","webpack:///./src/App.vue","webpack:///./src/components/menu/TopBar.vue","webpack:///./src/components/Modal.vue","webpack:///./src/components/ClickOutsideTriggerMixin.js","webpack:///./src/components/Modal.vue?d946","webpack:///./src/components/Creation.vue","webpack:///./src/components/menu/controls/InputVector.vue","webpack:///./src/components/menu/controls/InputVectorTooltip.vue","webpack:///./src/components/menu/controls/Tooltip.vue","webpack:///./src/components/menu/controls/Tooltip.vue?5371","webpack:///./src/components/menu/controls/InputVectorTooltip.vue?03a4","webpack:///./src/components/menu/controls/InputVector.vue?f726","webpack:///./src/components/menu/controls/ColorPicker.vue","webpack:///./src/components/menu/controls/ColorPicker.vue?925f","webpack:///./src/components/menu/controls/Backface.vue","webpack:///./src/components/menu/controls/Backface.vue?7e2a","webpack:///./src/components/menu/controls/InputLabel.vue","webpack:///./src/components/menu/controls/InputLabel.vue?c56b","webpack:///./src/components/Creation.vue?45ad","webpack:///./src/components/menu/Settings.vue","webpack:///./src/components/menu/Settings.vue?7a84","webpack:///./src/components/menu/TopBar.vue?e64b","webpack:///./src/components/menu/PropertyPanel.vue","webpack:///./src/components/menu/PropertyPanel.vue?093d","webpack:///./src/components/menu/TreeView.vue","webpack:///./src/components/menu/TreeItem.vue","webpack:///./src/components/menu/controls/ClickToEdit.vue","webpack:///./src/components/menu/controls/ClickToEdit.vue?589c","webpack:///./src/components/menu/TreeItem.vue?3ae9","webpack:///./src/components/menu/TreeView.vue?9399","webpack:///./src/components/Canvas.vue","webpack:///./src/components/Canvas.vue?4dee","webpack:///./src/App.vue?8ecf","webpack:///./src/main.js","webpack:///./src/components/Modal.vue?8979","webpack:///./src/components/menu/controls/InputLabel.vue?f410","webpack:///./src/zdogger/ztree.js","webpack:///./src/components/menu/TreeView.vue?3804","webpack:///./src/components/Creation.vue?5c9e","webpack:///./src/zdogger/scene.js","webpack:///./src/components/menu/TopBar.vue?bfa3","webpack:///./src/components/menu/TreeItem.vue?6a3e","webpack:///./src/App.vue?8045","webpack:///./src/zdogger/index.js","webpack:///./src/testmodel.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","getDefaultState","list","blockIds","selectedListNode","embed","state","getters","actions","changeList","commit","ztree","trimmedView","sortItem","payload","dispatch","root","startDrag","stopDrag","saveSelected","treeNode","clearSelected","changeDisplayName","newName","createEmbed","e","generateEmbed","selector","mini","resetView","mutations","setList","setDragging","setSelectedList","setEmbed","resetState","assign","namespaced","VECTOR_PROPS","BOOL_PROPS","COLOR_PROPS","NUM_PROPS","keys","ZdogJSONSchema","optionValidator","filter","prop","type","CREATE_PROPS","anchor","ellipse","box","polygon","illustration","vector","rect","roundedrect","shape","hemisphere","group","cylinder","cone","invalidFields","incomingOptions","incorrectFields","k","v","values","index","field","validType","Array","isArray","toNum","Number","isInteger","isNaN","colors","propList","includes","vectors","bools","nums","getDisplay","rootGetters","selectedNode","arr","constructor","optionKeys","node","justProps","props","forEach","canvasAxes","defaultState","validationSuccess","tooltip","displayProps","validationFailed","changeDisplay","reset","updateProps","options","validateFields","invalids","validationReset","VALIDATION_FAIL","VALIDATION_SUCCESS","VALIDATION_RESET","setTooltip","setDisplayProps","editDisplayProps","selectedAxes","UnitAxes","scaleZoom","showNeg","undoRedoHistory","settings","backgroundColor","scene","panInverse","zoomSpeed","panSpeed","ghostQuery","changeSetting","showCanvasAxes","illo","updateRenderGraph","showSelectedAxes","rootState","selected","si","stroke","depth","width","height","radius","diameter","size","Math","max","sfactor","scale","x","y","z","axes","a","addTo","clearSelectedAxes","remove","clearCanvasAxes","setSetting","setting","isCyclic","obj","seenObjects","detect","indexOf","console","log","UndoRedo","store","this","mstate","tree","toJSON","latestIndex","history","currentIndex","pop","rebuild","Zdogger","Reader","undoRedoPlugin","init","subscribe","mutation","addState","substring","newZdog","find","newO","deleteZdog","id","updateParent","updateSelectedName","Error","addNode","CanvasScene","setNodeProps","updateNode","removeNode","changeParent","newParentId","debug","process","Tree","newZtree","arg","initCanvasScene","destroy","Scene","canvas","handlers","keydown","ctrlKey","keyCode","shiftKey","redo","undo","keyup","registerEvents","h","addEventListener","unregisterEvents","removeEventListener","treeLoaded","paused","createZtree","newTree","rebuildZtree","unanimate","children","nodeMap","relationMap","ghostCanvas","pruneGhost","unitAxes","animate","newIllustration","on","detail","demoJSON","changeSelected","pause","bool","exportTree","download","importTree","load","setZtree","updateTree","setIllustration","setPause","setSelected","plugins","createLogger","createStore","treeview","properties","class","ref","_createElementBlock","onClick","$options","_createVNode","_component_TopBar","_createElementVNode","_component_TreeView","_component_Canvas","_component_PropertyPanel","aria-label","tabIndex","_ctx","_Fragment","_renderList","item","_toDisplayString","_hoisted_3","_createBlock","_Teleport","to","$data","_component_Modal","onClose","_component_Creation","itemtype","onClosePrompt","_hoisted_4","_component_Settings","onKeydown","_renderSlot","undefined","ClickOutsideTrigger","emits","isActive","methods","close","$emit","keydownHandler","mixins","mounted","$refs","figure","focus","$store","unmounted","__exports__","$props","_hoisted_1","_hoisted_2","f","$event","placeholder","_component_InputLabel","for","element","step","onInput","target","_component_ColorPicker","onUpdate","_component_InputVector","degrees","checked","default","_component_Backface","threeD","_component_InputVectorTooltip","label","onChangev","autocomplete","onChange","_component_Tooltip","min","components","Tooltip","String","editing","computed","changeV","open","InputVectorTooltip","euler","defaultVal","editx","edity","editz","JSON","parse","temp","map","coord","trun","toDeg","sendCoords","newVal","emitCoords","toRad","PI","radians","raw","round","editDegrees","stopEditDegrees","closeTooltip","inputChange","evt","tooltipChange","style","onBlur","color","colorPicker","wipColor","$nextTick","mountPicker","toggle","stopPropagation","preventDefault","colorEnter","set","rgbaString","cxt","iro","ColorPicker","picker","layout","component","ui","Box","Slider","sliderType","Boolean","bChecked","chooseColor","update","newColor","change","_resolveDynamicComponent","autocorrect","StringMixin","inheritAttrs","InputVector","Backface","InputLabel","wipOptions","wipAssignedName","appendTo","mapActions","newZdogObject","submit","createNew","optionDefault","updateColor","numProps","u","boolProps","vectorProps","colorProps","mapState","mapGetters","mainProps","miscProps","propsFor","validSchema","bWarning","isThreeD","watch","wipSettings","currentSettings","saveSetting","defaultSettings","Modal","Creation","Settings","bImporting","creationItemType","bSettings","hasIllustration","creatables","ZCLASS","NAMES","promptCreate","event","ItemType","getAttribute","confirmNewIllustration","cancelPrompt","closeWarning","importing","demo","testmodel","require","saveSettings","onSendCoords","backface","READ_ONLY","wipTooltip","selectedName","selectedTypeName","hasColor","selectedAllProps","hasBackfaceColor","bf","saveProps","editProp","option","editOption","updateName","ne","deleteSelected","_component_TreeItem","_hoisted_5","onDragover","onDragleave","onDrop","draggable","onDragstart","onDragend","_component_ClickToEdit","dbl","autofocus","onEditFinish","child","parent-id","onSelectUncollapse","onDblclick","finish","edit","inp","ClickToEdit","parentId","dragOverIndicate","editingName","collapsed","isSelected","hasChildren","validDropzone","nid","truncName","text","substr","changeSelectedName","dragStart","childId","dataTransfer","setData","stringify","dragEnd","dragOver","dropEffect","drop","getData","finishEditAssignedName","highlight","toggleCollapse","uncollapseBubble","TreeItem","ghost","rerender","draggingObject","dragId","bEmbed","treeView","nVal","getPanelWidth","$parent","clientWidth","embedGen","embedCopy","embedText","select","setSelectionRange","document","execCommand","hideGhost","windowWidth","innerWidth","windowHeight","innerHeight","oVal","clickHandler","getMousePos","camera","zoom","clientX","clientY","TopBar","PropertyPanel","TreeView","Canvas","setup","gutter1","gutter2","onMounted","split","Split","columnGutters","track","isClickInsideEvent","getRef","refName","deselect","isClickInside","contains","logSelected","app","createApp","App","use","Vuex","mount","ZDOG_CLASS_TYPE","Zdog","Anchor","Shape","Cone","Cylinder","Dragger","Ellipse","Group","Hemisphere","Illustration","Polygon","Rect","RoundedRect","Vector","ZDOG_CLASS","ZDOG_CLASS_NAME","CYCLIC_PROPS","nocyclic","seed","Date","now","generateUid","xorShift","floor","random","toString","make","int","construct","assignUID","assignName","assignType","itemName","ZdogItem","writable","configurable","isClass","zdog","toLowerCase","assignExisting","importExisting","copy","copyGraph","deep","reviveZdog","plainObject","ZdogO","toObject","canvasQuery","classType","recordProps","strin","validProps","ZtreeReader","Ztree","reviveTree","JSONstring","objecT","revivePlain","nodes","plain","maP","Map","relations","parent","Set","addChild","content","Download","Promise","resolve","reject","import","then","fileList","fileReader","FileReader","onloadend","ev","readAsText","catch","fileName","contentType","createElement","file","Blob","href","URL","createObjectURL","click","input","setAttribute","files","optionsDefault","Z","is","flatten","mainID","_nodeID","pID","add","visible","trimNode","entries","entry","valset","from","StringUtils","childIds","newSet","childs","_addRelation","delete","childSet","childnode","oldParentNode","pnode","removeChild","some","ID","relation","cid","anchors","bgColor","combined","canvasTagGenerate","scriptTagGenerate","findRoot","attribute","omitSelector","str","replace","nl","getFlat","properNames","capitalize","order","declaration","dragRotate","defaults","jjj","json_beautifier","dropQuotesOnKeys","minify","string","charAt","toUpperCase","TYPES","ENUMS","revive","CLASS","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","cancelAnimationFrame","mozCancelAnimationFrame","getPixel","context","imageData","getImageData","colorKey","rgbString","GhostCanvas","ghostIllo","ghostPrerender","ctx","setTransform","transformMatrix","rotate","translate","updateGraph","onPrerender","clone","ghostNodes","colorMap","nodeColors","isCanvas","getRandomRgb","setUniformColor","_setMaps","toDelete","has","parentid","parentGhost","toRem","original","nodeProps","gn","canvasX","canvasY","renderGraph","colorData","previous","dependents","_flatGraph","eventDeselect","Event","animReq","eye","worldPosition","phi","theta","rho","defaultRho","events","wheel","down","up","move","dragger","startElement","onDragStart","pointer","cursordown","onDragMove","dX","dY","cursormove","onDragEnd","cursorup","onwheel","_dispatch","zooming","cos","sin","canvasHeight","x0","pageX","y0","pageY","totaldelta","isMouseDown","buttons","button","canPan","dragPan","_screendelta","dx","dy","speed","y2","x2","radRatio","abs","selection","deltaX","deltaY","z0","innerText","getShape","offsetX","offsetY","selectActive","selectShape","CustomEvent","dispatchEvent","eventName","callback","fn","delta","canvasWidth","listeners","opts","form","front","makeAxis","opacity","flag","Axis","num","g","b","TAU","gold","garnet","eggplant","hipX","hips","path","leg","foot","cornerRadius","fill","standLeg","spine","chest","head","quarters","closed","armSize","upperArm","forearm"],"mappings":"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","file":"js/app.1084e906.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/zdog-scope/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./ColorPicker.vue?vue&type=style&index=0&id=5f665e48&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./PropertyPanel.vue?vue&type=style&index=0&id=4de71eaf&lang=scss\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Tooltip.vue?vue&type=style&index=0&id=658c95b6&lang=css\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./InputVectorTooltip.vue?vue&type=style&index=0&id=926bbd34&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Canvas.vue?vue&type=style&index=0&id=e193dd20&lang=css\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./InputVector.vue?vue&type=style&index=0&id=26e33402&lang=css\"","import {ztree} from '../index'\n\n/* Module1.store.js */\n// State object\nconst getDefaultState = () => ({\n  list: [],\n  blockIds:[],\n  selectedListNode:null,\n  embed:null\n})\n\nconst state = getDefaultState();\n// Getter functions\nconst getters = {\n}\n// Actions \nconst actions = {\n\n  changeList({commit}){\n    commit('setList', ztree.trimmedView())\n  },\n\n  sortItem({dispatch}, payload){\n    dispatch('history/updateParent', payload, {root: true})\n    dispatch('changeList')\n  },\n\n  startDrag({commit}, {blockIds}){\n    commit('setDragging', blockIds);\n  },\n\n  stopDrag({commit}){\n    commit('setDragging', [])\n  },\n\n  saveSelected({commit}, treeNode){\n    commit('setSelectedList', treeNode)\n  },\n\n  clearSelected({commit}){\n    commit('setSelectedList', null)\n  },\n\n  changeDisplayName({state}, newName){\n    state.selectedListNode.name = newName\n  },\n\n  createEmbed({commit}){\n    let e = ztree.generateEmbed({selector:'.zdog-canvas', mini:true});\n    commit('setEmbed', e)\n  },\n\n  resetView({commit}){\n    commit('resetState')\n  }\n  \n}\n\n// Mutations  \nconst mutations = {\n  setList(state, payload){\n    state.list = payload;\n  },\n\n  setDragging(state, blockIds){\n    state.blockIds = blockIds;\n  },\n\n  setSelectedList(state, payload){\n    state.selectedListNode = payload\n  },\n\n  setEmbed(state, payload){\n    state.embed = payload\n  },\n\n  resetState(state) {\n    Object.assign(state, getDefaultState())\n  }\n\n}\n\nexport default {\n  namespaced: true,\n  state,\n  getters,\n  actions,\n  mutations\n}","//import {ztree} from '../index'\nimport {justProps} from '../../zdogger/ztree'\n\nimport ZdogJSONSchema from '../../zdogobjects.json'\n\n\nconst VECTOR_PROPS = [\n  'rotate','translate','scale','front'\n]\nconst BOOL_PROPS = [\n  'fill','visible','closed','updateSort','dragRotate', 'centered', 'resize', 'backface'\n]\n\nconst COLOR_PROPS = [\n  'color', 'rearFace', 'frontFace', 'leftFace', 'rightFace', 'topFace', 'bottomFace', 'backface'\n]\n\nconst NUM_PROPS = Object.keys(ZdogJSONSchema.optionValidator)\n  .filter(prop=>{\n    return ZdogJSONSchema.optionValidator[prop].type == 'number'\n  })\n\n/**\n * User settable props for when calling 'new Zdog.Item', taken from documentation @ https://zzz.dog/api\n */\nconst CREATE_PROPS = {\n  anchor:[\n    'rotate',\n    'translate',\n    'scale',\n  ],\n  ellipse: [\n    \"diameter\",\n    \"width\",\"height\",\"quarters\"\n  ],\n  box:[\n    'depth',\n    'frontFace',\n    'rearFace',\n    'leftFace',\n    'rightFace',\n    'topFace',\n    'bottomFace',\n  ],\n  polygon:[\n    \"sides\",\n    \"radius\"\n  ],\n  illustration:[\n  \"centered\",\"zoom\",\"dragRotate\",\"resize\"\n    // onPrerender: noop,\n    // onDragStart: noop,\n    // onDragMove: noop,\n    // onDragEnd: noop,\n    // onResize: noop,\n  ],\n  vector:[\n    \"x\",\"y\",\"z\"\n  ],\n  rect:[\n    \"width\",\"height\"\n  ],\n  roundedrect:[\n    \"width\",\"height\",\"cornerRadius\"\n  ],\n  shape:[\n    \"path\",\"stroke\",\"fill\",\"color\",\"closed\",\"visible\",\"path\",\"front\",\"backface\"\n  ],\n  hemisphere:[\"diameter\",\"backface\"],\n  group:[\"updateSort\",\"visible\"],\n  cylinder:[\"diameter\",\"length\",\"backface\",\"frontFace\"],\n  cone:[\"diameter\",\"length\",\"backface\"]\n}\n\n/**\n * Checks the proposed options and returns an array of invalid fields (empty if fields are valid)\n * @param {Object} incomingOptions \n */\nfunction invalidFields(incomingOptions){\n  let incorrectFields = [];\n  let k = Object.keys(incomingOptions);\n  let v = Object.values(incomingOptions);\n  for (let index = 0; index < k.length; index++){\n    let field = k[index];\n    let value = v[index];\n    let validType = ZdogJSONSchema.optionValidator[field].type;\n\n    //backface can be a string\n    if (field == 'backface' && typeof value == 'string'){\n      continue;\n    }\n    if (typeof value != validType){\n      if (validType == 'Array') { // needs to be array\n        if (Array.isArray(value)){\n          continue;\n        }\n      } else if (validType == 'integer') {\n        let toNum = Number(value);\n        if (Number.isInteger(toNum)){\n          continue;\n        }\n      } else if (validType == 'number'){\n        let toNum = Number(value);\n        if (!isNaN(toNum)){\n          continue;\n        }\n      }\n    incorrectFields.push(field);\n    }\n  }\n  return incorrectFields;\n}\n\n\nlet list = {\n  colors(propList){\n    return propList.filter((prop)=>{\n      return COLOR_PROPS.includes(prop);\n    })\n  },\n  vectors(propList){\n    return propList.filter((prop)=>{\n      return VECTOR_PROPS.includes(prop);\n    })\n  },\n  bools(propList){\n    return propList.filter(prop=>{\n      return BOOL_PROPS.includes(prop) && prop != 'backface'\n    })\n  },\n  nums(propList){\n    return propList.filter(prop=>{\n      return NUM_PROPS.includes(prop);\n    })\n  },\n}\n\n/**\n * This is not a Vuex getter because the getter seems to cache it? Resulting in inaccurrate display\n * @param {*} rootState \n */\nfunction getDisplay(rootGetters){\n  // if (!rootState.selected) return\n  // let n = ztree.find(rootState.selected)\n  let n = rootGetters.selectedNode\n  let arr = n.constructor.optionKeys\n  let node = justProps(n)\n  let p = ['colors', 'vectors', 'bools', 'nums']\n  let props = {};\n  p.forEach(type=>{\n    props[type] = list[type](arr)\n  })\n  return {node, props}\n}\n\n/* Module1.store.js */\n// State object\nconst defaultState = () => ({\n  invalidFields:null,\n  validationSuccess:false,\n  tooltip:null,\n  displayProps:{\n    node:null,\n    props:null\n  }\n})\n\nconst state = defaultState();\n// Getter functions\nconst getters = {\n  validationFailed(state){\n    return (state.validationSuccess == false && state.invalidFields);\n  },\n  BOOL_PROPS(){\n    return BOOL_PROPS\n  },\n  VECTOR_PROPS(){\n    return VECTOR_PROPS\n  },\n  COLOR_PROPS(){\n    return COLOR_PROPS\n  },\n  CREATE_PROPS(){\n    return CREATE_PROPS\n  },\n  NUM_PROPS(){\n    return NUM_PROPS\n  },\n}\n// Actions \nconst actions = {\n\n  changeDisplay({commit, rootGetters}){\n    commit('setDisplayProps', getDisplay(rootGetters))\n  },\n\n  reset({commit}){\n    commit('resetState')\n  },\n\n\n  updateProps({dispatch, rootGetters}, incomingOptions){\n    \n    let node = rootGetters.selectedNode, options = Object.assign({}, incomingOptions)\n    \n    delete options['type']\n    delete options['id']\n\n    let props = Object.keys(options)\n    for(let prop of props) {\n      if (NUM_PROPS.includes(prop)){\n        options[prop] = Number(options[prop]);\n      }\n    }\n    dispatch('history/updateProps', {node,options}, {root: true})\n  },\n\n  validateFields({commit}, incomingOptions){\n    let invalids = invalidFields(incomingOptions);\n    if (invalids.length > 0) {\n      commit('VALIDATION_FAIL', invalids);\n    } else {\n      commit('VALIDATION_SUCCESS');\n     // TODO? warning system?\n    }\n  },\n\n  validationReset({commit}){\n    commit('VALIDATION_RESET')\n\n  },\n  \n}\n\nconst mutations = {\n\n  VALIDATION_FAIL(state, invalids){\n    state.validationSuccess = false;\n    state.invalidFields = invalids;\n  },\n\n  VALIDATION_SUCCESS(state){\n    state.validationSuccess = true;\n    state.invalidFields = null;\n  },\n\n  VALIDATION_RESET(state){\n    state.validationSuccess = false;\n    state.invalidFields = null;\n  },\n\n  setTooltip(state, payload){\n    state.tooltip = payload;\n  },\n\n  setDisplayProps(state, payload){\n    if (!payload){\n      state.displayProps = {node:null, props:null}\n      return\n    }\n    state.displayProps = payload\n  },\n\n  editDisplayProps(state, options){\n    Object.assign(state.displayProps.node, options)\n  },\n\n  resetState(state){\n    Object.assign(state, defaultState())\n  }\n\n}\n\nexport{COLOR_PROPS}\n\nexport default {\n  namespaced: true,\n  state,\n  getters,\n  actions,\n  mutations\n}","/* eslint-disable no-unused-vars */\nimport {ztree} from '../index'\nimport {UnitAxes} from '../../zdogger/scene'\n\nvar selectedAxes = new UnitAxes({t:100,scaleZoom:true}), canvasAxes\nselectedAxes.showNeg(false)\n\nconst getDefaultState = () => ({\n  settings:{\n    backgroundColor: \"#808080\",\n    scene:{\n      panInverse:false,\n      zoomSpeed:3,\n      panSpeed:30,\n      ghostQuery:'#ghost'\n    }\n  },\n})\n\nconst state = getDefaultState()\n\n// Getter functions\nconst getters = {\n}\n// Actions \nconst actions = {\n\n  changeSetting({commit}, payload){\n    commit('setSetting', payload)\n  },\n\n  async showCanvasAxes({dispatch, state}){\n    await dispatch('clearCanvasAxes')\n    let illo = ztree.illustration;\n   // let size = illo.canvasHeight / 2;\n   // canvasAxes = axesHelper({addTo: illo, size:size, stroke:1, head:10})\n    illo.updateRenderGraph()\n  },\n\n  showSelectedAxes({rootState, rootGetters}){\n    let n = rootGetters.selectedNode;\n    if (rootState.selected == rootState.illustration) return;\n\n    let si = [n.stroke, n.length, n.depth, n.width, n.height, n.radius, n.diameter].filter(e=>e)\n    let size = Math.max(...si)\n    let sfactor = n.scale.x * n.scale.y * n.scale.z;\n    size = (size * sfactor) * + 3;\n    \n\n    // let he = (si < 11)? 2 : si / 10; // minimum head 2\n    // let a = axesHelper({\n    //   size: si,\n    //   head: he\n    // })\n    selectedAxes.axes.forEach(a=>{\n      a.t = size;\n    })\n    selectedAxes.addTo(n);\n  },\n\n  clearSelectedAxes(){\n    selectedAxes.remove();\n  },\n\n  clearCanvasAxes(){\n    if (canvasAxes){\n      canvasAxes.remove();\n      // document.querySelector('#zoom-control').removeChild(scene.label)\n      // scene.destroy();\n    }\n    canvasAxes = null;\n  },\n\n  reset({commit,dispatch}){\n    dispatch('clearSelectedAxes')\n    dispatch('clearCanvasAxes')\n    commit('resetState')\n  }\n}\n\n// Mutations  \nconst mutations = {\n  setSetting(state, {name, value}){\n    state.setting[name] = value;\n  },\n\n  resetState(){\n    Object.assign(state, getDefaultState())\n  }\n}\n\nexport default {\n  namespaced: true,\n  state,\n  getters,\n  actions,\n  mutations\n}","\nimport Zdogger from '../../zdogger'\nimport {ztree, CanvasScene} from '../index'\n\n//All history actions and mutations go here\n//https://stackoverflow.com/questions/42878329/going-back-to-states-like-undo-redo-on-vue-js-vuex/44865208#44865208\n\n/* eslint-disable no-unused-vars */\nvar undoRedoHistory\n\nfunction deepCopy(obj){\n  return JSON.parse(JSON.stringify(obj));\n}\n\n//https://stackoverflow.com/questions/14962018/detecting-and-fixing-circular-references-in-javascript\nfunction isCyclic(obj) {\n  var seenObjects = [];\n\n  function detect (obj) {\n    if (obj && typeof obj === 'object') {\n      if (seenObjects.indexOf(obj) !== -1) {\n        return true;\n      }\n      seenObjects.push(obj);\n      for (var key in obj) {\n        /* eslint-disable no-prototype-builtins */\n        if (obj.hasOwnProperty(key) && detect(obj[key])) { \n          console.log(obj, 'cycle at ' + key);\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  return detect(obj);\n}\n\nclass UndoRedo {\n  store\n  history = [];\n  currentIndex = -1;\n  limit = -1;\n\n  init(store){\n    this.store = store;\n  }\n\n  addState(mstate) {\n    let tree = ztree.toJSON();\n    let latestIndex = this.history.length - 1;\n    for (let i = this.currentIndex; i < latestIndex; i++) {\n      this.history.pop();\n    }\n    try{\n      this.history.push(tree);\n    } catch (e) {\n      console.log(e)\n      console.log(isCyclic(tree))\n    }\n\n    // if (this.limit > 0 && this.history.length >= this.limit){\n    //   this.history.shift();\n    // }\n    this.currentIndex = this.history.length - 1\n  }\n\n  undo() {\n    if (this.currentIndex <= 0) return;\n    this.currentIndex--;\n    this.rebuild();\n  }\n\n  redo() {\n    if (this.currentIndex >= this.history.length - 1) return;\n    //const nextState = this.history[this.currentIndex + 1];\n    this.currentIndex++;\n    this.rebuild();\n  }\n\n  rebuild(){\n    let tree = this.history[this.currentIndex]\n   // this.store.replaceState(state);\n    this.store.dispatch('rebuildZtree', new Zdogger.Reader(tree).tree)\n  }\n\n  reset(){\n    this.history = null\n    this.history = []\n    this.currentIndex = -1;\n  }\n}\n\nconst undoRedoPlugin = (store) => {\n  // initialize and save the starting stage\n  undoRedoHistory = new UndoRedo(store)\n  undoRedoHistory.init(store);\n\n  store.subscribe((mutation, mstate) => {\n    if (mutation.type == 'setIllustration'){\n      undoRedoHistory.reset()\n      undoRedoHistory.addState(mstate)\n      return;\n    }\n    let history = mutation.type.substring(0,7)\n    if (history == 'history') {\n      // is called AFTER every mutation\n      undoRedoHistory.addState(mstate);\n    }\n  });\n}\n\n// Actions \nconst actions = {\n\n  newZdog({commit, dispatch}, {type, options, name}){\n    if(options.addTo){\n      options.addTo = ztree.find(options.addTo);\n    } else {\n      options.addTo = ztree.illustration\n    }\n    let newO = Zdogger(type)(options);\n    if (name) {newO.name = name}\n    commit('addNode', newO);\n    dispatch('treeview/changeList', null, {root:true});\n  },\n\n  deleteZdog({commit, dispatch}, id){\n    commit('removeNode', id)\n    dispatch('changeSelected', null, {root:true})\n  },\n\n  updateProps({commit, dispatch}, payload){\n    commit('setNodeProps', payload)\n    dispatch('properties/changeDisplay', null, {root:true})\n  },\n\n  updateParent({commit}, payload){\n    commit('changeParent', payload)\n  },\n\n  updateSelectedName({ commit, rootState, rootGetters, dispatch}, newName){\n    if (!rootState.selected) throw new Error('Cannot assign name to null selected node');\n    commit('setNodeProps', {\n        node: rootGetters.selectedNode,\n        options: {\n          name: newName\n        }\n      })\n\n    dispatch('treeview/changeList', null, {root:true})\n    },\n}\n\nfunction render(node){\n  node.updateGraph();\n  ztree.illustration.renderGraph(node)\n}\n\n// Mutations  \nconst mutations = {\n\n  addNode(state, node){\n    if (!ztree) throw new Error('Cannot add node to nonexistent tree');\n    CanvasScene.addNode(node)\n  },\n\n  setNodeProps(state, {node, options}){\n    CanvasScene.updateNode({node, options})\n  },\n\n  removeNode(state, id){\n    CanvasScene.removeNode(id)\n  },\n\n  changeParent(state, {id, newParentId}){\n    CanvasScene.changeParent(id, newParentId)\n  }\n}\n\nexport {undoRedoPlugin, undoRedoHistory}\n\nexport default {\n  namespaced: true,\n  actions,\n  mutations\n}","/* eslint-disable no-unused-vars */\nimport { createStore, createLogger } from 'vuex'\nimport Zdogger from '../zdogger'\n\nconst debug = process.env.NODE_ENV !== 'production'\n\nvar ztree = new Zdogger.Tree();\nvar Reader = new Zdogger.Reader();\nvar CanvasScene = null;\n\nfunction newZtree(arg){\n  if (arg instanceof Zdogger.Tree) {\n    ztree = arg\n  } else if (arg.options) {\n    ztree = new Zdogger.Tree(arg.options)\n    if (arg.name) {\n      ztree.illustration.name = arg.name;\n    }\n  } else {\n    ztree = new Zdogger.Tree({});\n  }\n}\n\nfunction initCanvasScene(state){\n  if (CanvasScene || state == null) {\n    CanvasScene.destroy();\n    CanvasScene = null\n  }\n  CanvasScene = new Zdogger.Scene(ztree, state.canvas.settings.scene);\n}\n\nconst handlers = {\n  keydown: function(e){\n    if (e.ctrlKey){\n      if (e.keyCode == 90){ // ctrl+Z\n        e.shiftKey? undoRedoHistory.redo():undoRedoHistory.undo();\n      } else if (e.keyCode == 89){// ctrl+y\n        undoRedoHistory.redo();\n      }\n    }\n    if (CanvasScene) CanvasScene.keydown(e);\n    \n  },\n  keyup:function(e){\n    if (CanvasScene) CanvasScene.keyup(e);\n  }\n}\n\nfunction registerEvents(){\n  for (let h in handlers) {\n    window.addEventListener(h,  handlers[h])\n  }\n}\n\nfunction unregisterEvents(){\n  for (let h in handlers) {\n    window.removeEventListener(h,  handlers[h])\n  }\n}\n\n/**\n *  GLOBALS\n */\nconst getDefaultState = () => ({\n  selected:null,\n  illustration:null,\n  treeLoaded:false,\n  paused:false\n})\n\nconst state = getDefaultState()\n\n// getters\nconst getters = {\n  selectedNode(state){\n    if (!ztree) return\n    return ztree.find(state.selected)\n  }\n}\n\n// actions\nconst actions = {\n\n  createZtree({commit, dispatch}, newTree){\n    newZtree(newTree)\n    commit('setZtree', newTree);\n    dispatch('canvas/showCanvasAxes')\n  },\n\n  rebuildZtree({commit, dispatch}, newTree){\n    CanvasScene.unanimate()\n    ztree.illustration.children = newTree.illustration.children\n    ztree.nodeMap = newTree.nodeMap\n    ztree.relationMap = newTree.relationMap\n    ztree.illustration.updateRenderGraph();\n\n    CanvasScene.ghostCanvas.pruneGhost();\n    CanvasScene.unitAxes.addTo(CanvasScene.illustration);\n    CanvasScene.animate()\n\n    commit('setZtree', true);\n    //dispatch('canvas/showCanvasAxes')\n    dispatch('treeview/changeList')\n    dispatch('properties/changeDisplay')\n  },\n\n  newIllustration({dispatch, commit, state}, payload){\n    if (!payload) { payload = {}}\n    unregisterEvents()\n    dispatch('createZtree', payload)\n    commit('setIllustration', true)\n    initCanvasScene(state)\n    \n    CanvasScene.on('selectshape', (e)=>{\n      dispatch('changeSelected', e.detail.id)\n    })\n    CanvasScene.on('deselect', ()=>{\n      dispatch('changeSelected', null)\n    })\n    registerEvents()\n  },\n\n  demoJSON({dispatch}, payload){\n    Reader = new Zdogger.Reader(payload);\n    dispatch('newIllustration', Reader.tree)\n  },\n\n  changeSelected({commit, dispatch, state}, id){\n    if (state.selected == id) return;\n    //click handler here?\n    commit('setSelected', id);\n    if (!id) {\n      dispatch('treeview/clearSelected')\n      dispatch('properties/reset')\n      return;\n    }\n\n    dispatch('properties/changeDisplay')\n  },\n\n  pause({commit}, bool){\n    if (bool) {\n      CanvasScene.unanimate()\n    } else {\n      CanvasScene.animate()\n    }\n    commit('setPause', bool)\n  },\n\n  exportTree(){\n    //save current ztree TODO\n    new Zdogger.Reader(ztree).download();\n  },\n\n  async importTree({dispatch}){\n    //save current ztree TODO\n    let newTree = await new Zdogger.Reader().load();\n    dispatch('changeSelected', null)\n    dispatch('treeview/resetView')\n    //commit('resetState');\n\n    dispatch('newIllustration', newTree)\n  },\n}\n\n// mutations\nconst mutations = {\n\n  setZtree(state, arg){\n    if (!arg) {\n      state.treeLoaded = false;\n      initCanvasScene(null)\n      return}\n    state.updateTree = !state.updateTree;\n    state.treeLoaded = true;\n  },\n\n  setIllustration(state, arg){\n    if (!arg) state.illustration = null;\n    state.illustration = ztree.illustration.id\n  },\n\n  setPause(state, bool){\n    state.paused = bool;\n  },\n\n  setSelected(state, id){\n    state.selected = id;\n  },\n\n  resetState(state) {\n    // Merge rather than replace so we don't lose observers\n    // https://github.com/vuejs/vuex/issues/1118\n    Object.assign(state, getDefaultState())\n  }\n}\n\n//Export the ztree and import in other modules that will need to access its properties\nexport{ztree, CanvasScene}\n\nimport treeview from './modules/treeview'\nimport properties from './modules/properties'\nimport canvas from './modules/canvas'\nimport history, {undoRedoPlugin, undoRedoHistory} from './modules/history'\nimport { ifStatement } from '@babel/types';\n\nlet plugins = [undoRedoPlugin]\n\ndebug ? plugins.push(createLogger()) : null;\n\nexport default createStore({\n  modules: {\n    treeview,\n    properties,\n    canvas,\n    history,\n  },\n  state,\n  getters,\n  mutations,\n  actions,\n  //strict: debug,\n  plugins: plugins\n})","<template>\n  <main @click=\"deselect\">\n    <TopBar\n      ref=\"menuTopbar\"\n    />\n    <div\n      class=\"split-grid overlay\"\n    >\n      <div\n        ref=\"treeview\"\n        class=\"split-column tree-view\n          no-select\"\n      >\n        <TreeView/>\n      </div>\n      <div\n        ref=\"gutter1\"\n        class=\"gutter-column-1\"\n      />\n      <div class=\"split-column\" ref=\"canvasWrapper\">\n        <Canvas />\n      </div>\n      <div\n        ref=\"gutter2\"\n        class=\"gutter-column-2\"\n      />\n      <div class=\"split-column properties\">\n        <PropertyPanel ref=\"menuPropertyPanel\" />\n      </div>\n    </div>\n  </main>\n</template>\n\n<script>\nimport {ref, onMounted, } from 'vue' // onUpdated, onUnmounted\nimport { mapState, mapActions} from 'vuex'// mapActions \n\nimport TopBar from './components/menu/TopBar.vue'\nimport PropertyPanel from './components/menu/PropertyPanel.vue'\nimport TreeView from './components/menu/TreeView.vue'\nimport Canvas from './components/Canvas.vue'\n\nimport Split from 'split-grid'\n\nexport default {\n  name: 'App',\n  components: {\n    TopBar,\n    PropertyPanel,\n    TreeView,\n //   TreeTest,\n    Canvas,\n  },\n  setup(){\n    const gutter1 = ref(null);\n    const gutter2 = ref(null);\n\n    onMounted(()=>{\n        window.split = Split({\n        columnGutters: [{\n          track: 1,//index of element to resize\n          element: gutter1.value,\n        }, {\n          track: 3,\n          element: gutter2.value,\n        }],\n        // onDragEnd: (direction, track) => {\n        //   if (track == 1){\n        //     Treeview.value.clientWidth\n        //     //truncEllipse(text, max)\n        //   }\n        // }\n      /**Horizontal gutters */\n        // rowGutters: [{\n        //   track: 1,\n        //   element: this.$refs.menuPropertyPanel,\n        // }]\n      })\n\n    })\n\n    return {\n        gutter1,\n        gutter2,\n      }\n  },\n  data(){\n    return {\n      bWarning:false,\n      isClickInsideEvent:null,\n    }\n  },\n  computed:{\n    ...mapState([\n      'selected'\n    ]),\n  },\n  methods:{\n    ...mapActions([\n      'changeSelected'\n    ]),\n    getRef(refName){\n      return this.$refs[refName];\n    },\n    deselect(event){\n      if (!this.selected) return;\n        var isClickInside = this.$refs.treeview.contains(event.target);\n        \n        if (isClickInside) {\n          //the click inside the element\n          this.changeSelected(null);\n        }\n    },\n    logSelected(){\n      console.log(this.$store.getters['selectedNode'])\n    }\n  },\n}\n</script>\n\n<style>\n@import './assets/root.css';\n\nh1,h2,h3,h4,h5{\n  margin:0.5rem 0.5rem 0.7rem 0.5rem\n}\n\n#app {\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  overflow:hidden;\n}\n\n.split-grid{\n  display:grid;\n  grid-template-columns: 1fr 6px 2fr 6px 1fr; /*define column and gutter widths here*/\n  border-collapse:collapse;\n  z-index:var(--zCanvas);\n}.split-grid.overlay{\n  position:relative;\n  top:0;\n  width:100vw;\n  height:var(--canvasHeight);\n}\n\n.split-column {\n  overflow: auto;\n  width: 100%;\n}.split-column.tree-view, .split-column.properties{\n  background-color:rgb(255,255,255);\n  position:relative;\n  z-index:var(--zPanel)\n}\n\n[class^='gutter'] {\n  position:relative;\n  background-color:#616161;\n  background-repeat: no-repeat;\n  background-position: 50%;\n  cursor: col-resize;\n  z-index:var(--zPanel)\n}\n\n[class^='gutter']:before {\n  content:'...';\n  color:#ebebeb;\n  line-height:0;\n  font-size: 20px;\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  font-family:Arial, sans-serif;\n}\n\n[class^='gutter-column']:before{\n  top:0;\n  right:-2.5px;\n  width:3px;\n  height:calc(100% - 3ch);\n  writing-mode: vertical-rl;\n}\n\nul{\n  margin:0;\n  padding:0;\n  list-style-type:none;\n}\n\n.row{\n  display:flex;\n  flex-direction:row;\n  flex-wrap:wrap;\n  justify-content:center;\n}\n\n.col{\n  display:flex;\n  flex-direction:column;\n  flex-wrap:wrap;\n  justify-content:center;\n}\n\n[class*=\"between-\"]{\n  justify-content:space-between;\n}\n\n.text-display-type{\n  font-variant: small-caps;\n  color: var(--colorMain);\n  font-size: 0.9em;\n}\n\n.no-select{\n  user-select: none;\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  -ms-user-select: none;\n}\n\n.hidden{\n  visibility:hidden;\n  display:none;\n}\n</style>\n","<template>\n  <div class=\"toolbar row\">\n    <button @click=\"settings\">\n      Settings\n    </button>\n    <button v-if=\"hasIllustration\"\n      @click=\"exportTree\">\n      Export\n    </button>\n    <button @click=\"importing\">\n      Import\n    </button>\n    <button @click=\"demo\">\n      Demo\n    </button>\n    <div\n      :aria-label=\"`Create new`\"\n      tabIndex=\"0\"\n    >\n      <button\n        v-for=\"(item,index) in creatables\"\n        :key=\"`${item}_${index}`\"\n        :aria-label=\"item\"\n        :class=\"{\n          'hidden': (item != 'illustration' && !hasIllustration)\n        }\"\n        @click=\"promptCreate\"\n      >\n        +{{ item }}\n      </button>\n    </div>\n  </div>\n  <teleport to=\"body\">\n    <Modal\n      v-if=\"!bWarning && hasIllustration && creationItemType\"\n      @close=\"cancelPrompt\"\n    >\n      <Creation\n        :itemtype=\"creationItemType\"\n        @close-prompt=\"cancelPrompt\"\n      />\n    </Modal>\n    <Modal\n      v-if=\"bWarning && hasIllustration\"\n      @close=\"cancelPrompt\"\n    >\n      <p>WARNING: Are you sure you want to replace the current illustration?</p>\n      <button @click=\"closeWarning\">\n        Yes\n      </button>\n      <button @click=\"cancelPrompt\">\n        Cancel\n      </button>\n    </Modal>\n    <Modal\n      v-if=\"bSettings\"\n      @close=\"cancelPrompt\"\n    >\n    <Settings\n      @close-prompt=\"cancelPrompt\"\n    />\n    </Modal>\n  </teleport>\n</template>\n\n<script>\n//import Zdog from 'zdog'\nimport {mapActions} from 'vuex'// mapActions \nimport {ZCLASS} from '../../zdogger/ztree'\n\nimport Modal from '../Modal.vue'\nimport Creation from '../Creation.vue'\nimport Settings from './Settings.vue'\n\nexport default {\n  name: 'TopBar',\n  components:{\n  Modal,\n  Creation,\n  Settings\n  },\n  emits: ['create-new'],\n\n  data(){\n    return {\n      bImporting:false,\n      creationItemType: null,\n      bWarning:false,\n      bSettings:false\n    }\n  },\n  computed:{\n    illustration(){\n      return this.$store.state.illustration\n    },\n    hasIllustration() {\n      return (!!this.illustration)\n    },\n    creatables(){\n      let c = [...ZCLASS.NAMES];\n      return c.filter(name=>{\n        return (name != \"dragger\" && name != \"vector\")\n      })\n    },\n    currentSettings(){\n      return this.$store.state.canvas.settings\n    }\n  },\n  methods:{\n    ...mapActions([\n      'newIllustration',\n      'demoJSON',\n      'exportTree',\n      'importTree'\n    ]),\n    promptCreate(event){\n      let ItemType = event.target.getAttribute('aria-label');\n      if(!this.hasIllustration){\n        this.newIllustration();\n        return;\n      } else if (ItemType == \"illustration\") {\n        this.bWarning = true;\n      }\n      this.creationItemType = ItemType;\n    },\n    confirmNewIllustration(){\n      this.newIllustration();\n      this.bWarning = false;\n    },\n    cancelPrompt(){\n      this.creationItemType = null;\n      this.bWarning = false;\n      this.bSettings = false;\n    },\n    closeWarning(){\n      this.bWarning = false;\n      if (this.bImporting){\n        this.importTree();\n      }\n    },\n    importing(){\n      this.bImporting = true;\n      if (this.hasIllustration){\n        this.bWarning = true;\n      } else {\n        this.importTree();\n        this.bImporting = false;\n      }\n    },\n    demo(){\n    let testmodel = require('../../testmodel').default;\n    this.demoJSON(testmodel);\n    },\n    settings(){\n      this.bSettings = true;\n    },\n    saveSettings(){\n      this.$store.state.canvas\n    },\n    defaultSettings(){\n\n    }\n  },\n}\n</script>\n\n<style>\n.toolbar{\n  position:relative;\n  border:1px solid black;\n  height:var(--menuTopBarHeight);\n  z-index:var(--zTopBar);\n}\n\n.toolbar button{\n  text-transform:capitalize;\n}\n</style>\n","<template>\n  <div class=\"modal\"\n    @keydown=\"keydownHandler\">\n    <div\n      class=\"dimmer\"\n      @click=\"close\"\n    />\n    <button\n      class=\"close\"\n      @click=\"close\"\n    >\n      X\n    </button>\n    <figure ref=\"figure\" tabIndex=\"0\">\n      <slot />\n    </figure>\n  </div>\n</template>\n\n<script>\nimport ClickOutsideTrigger from './ClickOutsideTriggerMixin'\n\nexport default {\n  name: 'Modal',\n  mixins:[ClickOutsideTrigger],\n\n  mounted(){\n    this.$refs.figure.focus();\n    this.$store.dispatch('pause', true)\n  },\n  unmounted(){\n    this.$store.dispatch('pause', false)\n  }\n}\n</script>\n\n<style scoped>\n.modal{\n  position:fixed;\n  top:0;\n  left:0;\n  width:100vw;\n  height:100vh;\n  justify-content:center;\n  align-items:center;\n  z-index:var(--zModal);\n  display:flex;\n}\n.modal.active{\n\n  visibility:visible;\n  opacity:1;\n}\n\n\n.dimmer{\n  position:absolute;\n  top:0;\n  left:0;\n  width:100%;\n  height:100%;\n  background-color:rgba(0,0,0,0.5);\n  transition:all 300ms linear;\n  z-index:1;\n}\n\n.close{\n  position:absolute;\n  top:0;\n  right:0rem;\n  background-color:rgba(255,255,255,0.7);\n  z-index:3;\n}\n\nfigure{\n  margin:0 auto;\n  position:relative;\n  min-height:50vh;\n  width:98vw;\n  max-width:var(--paragraph);\n  padding:1rem;\n  background-color:var(--modalBGColor);\n  border-radius:3px;\n  z-index:2;\n}\n</style>","const ClickOutsideTrigger = {\n\n  emits:['close'],\n  data(){\n    return{\n      isActive:false\n    }\n  },\n  methods:{\n    close(){\n      this.$emit('close')\n    },\n    keydownHandler(e){\n      if (e.key == \"Escape\"){\n        this.close();\n      }\n    }\n  }\n}\n\nexport default ClickOutsideTrigger","import { render } from \"./Modal.vue?vue&type=template&id=37953d71&scoped=true\"\nimport script from \"./Modal.vue?vue&type=script&lang=js\"\nexport * from \"./Modal.vue?vue&type=script&lang=js\"\n\nimport \"./Modal.vue?vue&type=style&index=0&id=37953d71&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/kibble/repos/zdog-scope/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-37953d71\"]])\n\nexport default __exports__","<template>\n  <div v-if=\"itemtype\">\n    <h2>Create new {{ itemtype }}</h2>\n    <div v-if=\"bWarning\">\n      Warning: fields that failed validation:\n      <p\n        v-for=\"f in invalidFields\"\n        :key=\"f\"\n      >\n        {{ f }} needs a\n        {{ validSchema[f].type }}\n      </p>\n      <p>Please fix them before proceeding.</p>\n    </div>\n    <form class=\"field-list\">\n      <div class=\"row\">\n        <label class=\"input-name\">\n          <input\n            v-model=\"wipAssignedName\"\n            type=\"text\"\n            placeholder=\"untitled\"\n          >\n        </label>\n      </div>\n      <div class=\"row between-\">\n        <!-- <div\n          v-if=\"!bBlank\"\n          class=\"field-list radio\"\n        >\n          Append to:\n          <label\n            v-if=\"selected.id\"\n            for=\"append_selected\"\n          >\n            <input\n              id=\"append_selected\"\n              v-model=\"appendTo\"\n              type=\"radio\"\n              name=\"appendto\"\n              value=\"selected\"\n              checked\n            >\n            Selected\n            <br>(id: {{ selected.id }})\n          </label>\n          <label for=\"append_choose\">\n            <input\n              id=\"append_choose\"\n              v-model=\"appendTo\"\n              type=\"radio\"\n              name=\"appendto\"\n              value=\"choose\"\n            >\n            Choose<br>\n            <select />\n          </label>\n          <label for=\"append_none\">\n            <input\n              id=\"append_none\"\n              v-model=\"appendTo\"\n              type=\"radio\"\n              name=\"appendto\"\n              value=\"nothing\"\n            >\n            None\n          </label>\n        </div> -->\n\n\n        <div class=\"field-list col\" v-if=\"numProps(mainProps).length > 0\">\n          <InputLabel v-for=\"(field) in numProps(mainProps)\"\n            :key=\"`${field}_creation`\"\n            :for=\"`${field}_creation`\"\n            :id=\"`${field}_creation`\"\n            element=\"input\"\n            v-model=\"wipOptions[field]\"\n            type=\"number\"\n            step=0.1\n            :placeholder=\"optionDefault(field)\"\n            :name=\"field\"\n            @input=\"wipOptions[field] = $event.target.value\"\n          >\n            {{ capitalize(field) }}:\n          </InputLabel>\n        </div>\n        <div class=\"col\" v-if=\"colorProps(mainProps).length > 0\">\n          <span v-for=\"field in colorProps(mainProps)\" :key=\"field\">\n            {{ capitalize(field) }}\n            <ColorPicker \n            @update=\"updateColor(field, $event)\"\n            />\n          </span>\n        </div>\n      <div class=\"row\" v-if=\"vectorProps(mainProps).length > 0\">\n        <InputVector\n          v-for=\"field in vectorProps(mainProps)\"\n          :id=\"`${field}_creation`\"\n          :key=\"`${field}_creation`\"\n          :value=\"optionDefault(field)\"\n          :degrees=\"(field == 'rotate')\"\n        >\n          {{ capitalize(field) }}\n        </InputVector>\n        <div class=\"field-list col\">\n          <label\n            v-for=\"(field) in boolProps(mainProps)\"\n            :key=\"`${field}_creation`\"\n            :for=\"`${field}_creation`\"\n          >\n            {{ capitalize(field) }}\n            <input\n              :id=\"`${field}_creation`\"\n              v-model=\"wipOptions[field]\"\n              type=\"checkbox\"\n              :checked=\"optionDefault(field)\"\n            >\n          </label>\n        </div>\n      </div>\n\n\n        <div class=\"field-list col\" v-if=\"numProps(miscProps).length > 0\">\n          <InputLabel v-for=\"(field) in numProps(miscProps)\"\n            :key=\"`${field}_creation`\"\n            :for=\"`${field}_creation`\"\n            :id=\"`${field}_creation`\"\n            element=\"input\"\n            v-model=\"wipOptions[field]\"\n            type=\"number\"\n            step=0.1\n            :placeholder=\"optionDefault(field)\"\n            :name=\"field\"\n            @input=\"wipOptions[field] = $event.target.value\"\n          >\n              {{ capitalize(field) }}:\n          </InputLabel>\n        </div>\n        <div class=\"col\" v-if=\"colorProps(miscProps).length > 0\">\n          <span v-for=\"field in colorProps(miscProps)\" :key=\"field\">\n            {{ capitalize(field) }}\n            <ColorPicker \n            @update=\"updateColor(field, $event)\"\n            />\n          </span>\n        </div>\n      <div class=\"row\" v-if=\"vectorProps(miscProps).length > 0\">\n        <InputVector\n          v-for=\"field in vectorProps(miscProps)\"\n          :id=\"`${field}_creation`\"\n          :key=\"`${field}_creation`\"\n          :default=\"optionDefault(field)\"\n          :degrees=\"(field == 'rotate')\"\n        >\n          {{ capitalize(field) }}\n        </InputVector>\n        <div class=\"field-list col\" v-if=\"boolProps(miscProps).length > 0\">\n          <label\n            v-for=\"(field) in boolProps(miscProps)\"\n            :key=\"`${field}_creation`\"\n            :for=\"`${field}_creation`\"\n          >\n            {{ capitalize(field) }}\n            <input\n              :id=\"`${field}_creation`\"\n              v-model=\"wipOptions[field]\"\n              type=\"checkbox\"\n              :checked=\"optionDefault(field)\"\n            >\n          </label>\n\n          <Backface\n            id=\"backface_create\"\n            :threeD=\"isThreeD\"\n            :checked=\"optionDefault('backface')\"\n            @update=\"updateColor('backface', $event)\"\n            />\n        </div>\n      </div>\n\n\n\n\n      </div>\n\n\n    </form>\n    <button @click=\"submit\">\n      Create\n    </button>\n  </div>\n</template>\n\n<script>\nimport {mapActions, mapState, mapGetters} from 'vuex'\nimport ZdogJSONSchema from '../zdogobjects.json'\n\nimport InputVector from './menu/controls/InputVector'\nimport ColorPicker from './menu/controls/ColorPicker'\nimport Backface from './menu/controls/Backface'\nimport InputLabel from './menu/controls/InputLabel'\n\nimport {StringMixin, propsFor} from '../zdogger'\n\nexport default {\n  name: 'Creation',\n  components:{\n    InputVector,\n    ColorPicker,\n    Backface,\n    InputLabel\n  },\n  mixins:[StringMixin],\n  props: {\n    itemtype:{\n      type:String,\n      default:null\n    }\n  },\n  emits:['close-prompt'],\n\n  data(){\n    return{\n      wipOptions:{},\n      wipAssignedName: null,\n      appendTo:'selected',\n    }\n  },\n  methods:{\n    ...mapActions({\n        newZdogObject:'history/newZdog', //argument should be in format {type:int, options:{}}\n        validateFields:'properties/validateFields',\n        newIllustration:'newIllustration',\n        validationReset:'properties/validationReset'\n    }),\n    async submit(){\n      await this.validateFields(this.wipOptions);\n      if (this.validationSuccess){\n        this.createNew();\n      }\n    },\n    createNew(){\n      let options = Object.assign({},this.wipOptions);\n      let temp = {\n        type: this.itemtype,\n        options:options,\n        name:this.wipAssignedName\n        }\n      if (this.itemtype == 'illustration') {\n        this.newIllustration(temp)\n      } else {\n        if (this.selected) {\n          temp.options.addTo = this.selected;\n        }\n        this.newZdogObject(temp)\n      }\n      this.$emit('close-prompt');\n    },\n    optionDefault(field){\n      return ZdogJSONSchema.optionValidator[field].default;\n    },\n    updateColor(field, newColor){\n      this.wipOptions[field] = newColor;\n    },\n    numProps(arr){\n      let u = arr.filter(prop=>{\n        return this.NUM_PROPS.includes(prop)\n      })\n      return u\n    },\n    boolProps(arr){\n      return arr.filter(prop=>{\n        return (this.BOOL_PROPS.includes(prop) && prop != 'backface')\n      })\n    },\n    vectorProps(arr){\n      return arr.filter(prop=>{\n        return this.VECTOR_PROPS.includes(prop)\n      })\n    },\n    colorProps(arr){\n      return arr.filter(prop=>{\n        return this.COLOR_PROPS.includes(prop)\n      })\n    },\n    log(e){\n      console.log(e.target.value)\n      console.log(this.wipOptions)\n    }\n  },\n  computed:{\n    ...mapState({\n        invalidFields: state => state.properties.invalidFields,\n        validationSuccess:state => state.properties.validationSuccess,\n        selected:state => state.selected,\n    }),\n    ...mapGetters('properties',[\n        'BOOL_PROPS',\n        'VECTOR_PROPS',\n        'COLOR_PROPS',\n        'NUM_PROPS',\n        'CREATE_PROPS',\n        'validationFailed'\n    ]),\n    mainProps(){\n      return this.CREATE_PROPS[this.itemtype];\n    },\n    miscProps(){\n      return propsFor(this.itemtype).filter(prop=>{\n        return !this.mainProps.includes(prop)\n      })\n    },\n    validSchema(){\n      return ZdogJSONSchema.optionValidator;\n    },\n    bWarning:{\n      get(){\n        return this.validationFailed;\n        },\n      set(newVal){\n        if (newVal == false) {\n          this.validationReset();\n        }\n      }\n    },\n    isThreeD(){\n      return this.itemtype == 'cylinder' || this.itemtype == 'hemisphere'\n      || this.itemtype == 'cone'\n    }\n  },\n  watch:{\n    itemtype(){\n      this.wipOptions = {};\n    }\n  },\n}\n</script>\n\n<style scoped>\n@import '../assets/fieldinput.css';\n\n.field-list .radio{\n  align-items:flex-start;\n  text-align:left;\n}\n</style>","<template>\n  <div\n    v-if=\"degrees\"\n    class=\"input-vector degrees\"\n  >\n    <div class=\"title\">\n      <slot />\n    </div>\n\n    <InputVectorTooltip\n      id=\"degrees\"\n      label=\"x\"\n      :value=\"toDeg(value.x)\"\n      :placeholder=\"defaultVal.x\"\n      @changev=\"tooltipChange('x', $event)\"\n      />\n\n    <InputVectorTooltip\n      id=\"degrees\"\n      label=\"y\"\n      :value=\"toDeg(value.y)\"\n      :placeholder=\"defaultVal.y\"\n      @changev=\"tooltipChange('y', $event)\"\n      />\n\n    <InputVectorTooltip\n      id=\"degrees\"\n      label=\"z\"\n      :value=\"toDeg(value.z)\"\n      :placeholder=\"defaultVal.z\"\n      @changev=\"tooltipChange('z', $event)\"\n      />\n  </div>\n  <div v-else\n    class=\"input-vector\"\n  >\n    <div class=\"title\">\n      <slot />\n    </div>\n    <label :for=\"`${id}x`\">\n      x:\n      <input\n        :id=\"`${id}z`\"\n        :value=\"value.x\"\n        type=\"number\"\n        name=\"x\"\n        autocomplete=\"off\"\n        :placeholder=\"defaultVal.x\"\n        :step=\"step\"\n        @change=\"inputChange('x', $event)\"\n      >\n    </label>\n\n    <label :for=\"`${id}y`\">\n      y:\n      <input\n        :id=\"`${id}y`\"\n        :value=\"value.y\"\n        type=\"number\"\n        name=\"y\"\n        autocomplete=\"off\"\n        :placeholder=\"defaultVal.y\"\n        :step=\"step\"\n        @change=\"inputChange('y', $event)\"\n      >\n    </label>\n    <label :for=\"`${id}z`\">\n      z:\n      <input\n        :id=\"`${id}z`\"\n        :value=\"value.z\"\n        type=\"number\"\n        name=\"z\"\n        autocomplete=\"off\"\n        :placeholder=\"defaultVal.z\"\n        :step=\"step\"\n        @change=\"inputChange('z', $event)\"\n      >\n    </label>\n  </div>\n</template>\n\n<script>\nimport InputVectorTooltip from './InputVectorTooltip'\n\nexport default {\n  name: 'InputVector',\n  components:{InputVectorTooltip},\n  props: {\n    id:{\n      type:String,\n      default:null\n    },\n    type:{\n      type:String,\n      default:'translate'\n    },\n    value:{\n      type:Object,\n      default:()=>({x:0,y:0,z:0})\n    },\n  },\n  emits:['send-coords', 'open-tooltip'],\n  mounted(){\n    this.euler = this.defaultVal;\n  },\n  data(){\n    return{\n      euler:{\n        x:null,\n        y:null,\n        z:null\n      },\n      editx:false,\n      edity:false,\n      editz:false\n    }\n  },\n  computed:{\n    defaultVal(){\n      let d = this.value\n      if (typeof d == 'string') {\n        d = JSON.parse(d)\n      }\n      if (this.degrees){\n        let temp = Object.assign({}, d);\n        Object.keys(temp).map(coord=>{\n          Math.trun\n          temp[coord] = this.toDeg(temp[coord]);\n          this.euler[coord] = temp[coord];\n        })\n        return temp\n      }\n      return d\n    },\n    degrees(){\n      return this.type == 'rotate'\n    },\n    step(){\n      if (this.type == 'scale') {\n        return 0.01\n      }\n      return 0.1\n    }\n  },\n\n  methods:{\n    sendCoords(e){\n      let newVal = e.target.value;\n      if (newVal == e.target.placeholder || newVal == \"\") return;\n\n      this.emitCoords();\n    },\n    toRad(degrees){\n      return (Math.PI * degrees) / 180;\n    },\n    toDeg(radians){\n      let raw = (180 * radians) / Math.PI;\n       // round to 3 decimal places\n       //let d = Math.round(raw * 1000) / 1000;\n      return Math.round(raw)\n    },\n    emitCoords(){\n      let temp = Object.assign({}, this.euler);\n      Object.keys(temp).forEach((key) => {\n        if (temp[key] == null) {\n           delete temp[key]\n        } else {\n          if(this.degrees) {\n            let d = Number(temp[key]) % 360;\n            temp[key] = this.toRad(d);\n          } else {\n            temp[key] = Number(temp[key]);\n          }\n        }\n      });\n     this.$emit('send-coords', temp);\n    },\n    editDegrees(coord){\n      this.stopEditDegrees();\n      this.$emit('open-tooltip');\n      if (coord == 'x'){\n        this.editx = true;\n      } else if (coord == 'y'){\n        this.edity = true;\n      } else if (coord == 'z'){\n        this.editz = true;\n      }\n    },\n    stopEditDegrees(){\n        this.editx = false;\n        this.edity = false;\n        this.editz = false;\n    },\n    closeTooltip(){\n      this.stopEditDegrees();\n    },\n    inputChange(p, evt){\n      this.euler[p] = evt.target.value;\n      this.emitCoords();\n    },\n    tooltipChange(p, e){\n      this.euler[p] = e;\n      this.emitCoords();\n    }\n  }\n}\n</script>\n\n<style>\n.input-vector{\n  position:relative;\n  display:flex;\n  flex-flow:column nowrap;\n  margin:0.4rem 0.5rem 0.6rem 0.5rem;\n  align-items:flex-end;\n  padding-bottom:0.5rem;\n}\n\n.input-vector .title{\n  width:100%;\n}\n\n.input-vector label{\n  position:relative;\n}\n\n.input-vector input{\n  max-width:7ch;\n}\n\n\n.input-coord:hover .degree-range, .degrees input[type=\"text\"]:focus + .degree-range,\n.degree-range.editing{\n  display:flex;\n}\n</style>","<template>\n  <div class=\"input-coord\">\n   <label\n      :for=\"`${id}${label}`\"\n      :class=\"{'z100':editing}\"\n    >\n      {{label}}:\n      <input\n        :id=\"`${id}${label}`\"\n        class=\"input-degrees\"\n        :value=\"value\"\n        type=\"number\"\n        :name=\"label\"\n        autocomplete=\"off\"\n        :placeholder=\"placeholder\"\n        @change=\"changeV\"\n        @click=\"open\"\n      >\n      &#176;\n      </label>\n      <Tooltip v-if=\"editing\"\n        @close=\"close\">\n        <div\n          class=\"degree-range\"\n        >\n          <label>{{ `${min}&#176;` }}</label>\n          <input\n            :value=\"value\"\n            type=\"range\"\n            :min=\"min\"\n            :max=\"max\"\n            @change=\"changeV\"\n          >\n          <label>{{ `${max}&#176;` }}</label>\n        </div>\n      </Tooltip>\n  </div>\n</template>\n\n<script>\nimport Tooltip from './Tooltip'\nimport ClickOutsideTrigger from '../../ClickOutsideTriggerMixin'\n\nexport default {\n  name: 'InputVectorTooltip',\n  components:{Tooltip},\n  mixins:[ClickOutsideTrigger],\n  emits:['changev'],\n  props:{\n    id:String,\n    label:String,\n    value:Number,\n    placeholder:Number\n  },\n\n  data(){\n    return{\n      editing:false\n    }\n  },\n  computed:{\n    min(){\n      return 0;\n    },\n    max(){\n      return 360;\n    }\n  },\n\n  methods:{\n    changeV(e){\n      this.$emit('changev', e.target.value)\n    },\n    close(){\n      this.editing = false;\n    },\n    open(){\n      this.editing = true;\n    }\n  }\n}\n</script>\n\n<style>\n.input-coord{\n  position:relative;\n}\n\n.z100{\n  z-index:100;\n}\n\n.degree-range{\n  display:flex;\n  flex-flow:row nowrap;\n  background-color:var(--colorPri);\n  padding:0.1rem;\n  font-size:0.5rem;\n  border-radius:var(--borderRadius);\n  bottom:-1.9rem;\n  left:0;\n}\n\n.input-degrees{\n  max-width:6ch;\n}\n\n.degree-range input[type=\"range\"]{\n  max-width:13ch;\n}\n</style>","<template>\n  <div class=\"tooltip-wrapper\">\n    <div class=\"closer\"\n      @click=\"close\" />\n    <div class=\"tooltip-popover\">\n      <slot/>\n    </div>\n  </div>\n</template>\n\n<script>\nimport ClickOutsideTrigger from '../../ClickOutsideTriggerMixin'\n\nexport default {\n  name: 'Tooltip',\n  mixins:[ClickOutsideTrigger],\n}\n</script>\n\n<style>\n.tooltip-wrapper{\n  position:absolute;\n}\n\n.tooltip-wrapper .closer{\n  position:fixed;\n  top:0;\n  left:0;\n  width:100%;\n  height:100%;\n  background-color:transparent;\n  transition:all 300ms linear;\n  z-index:1;\n}\n\n.tooltip-wrapper .tooltip-popover{\n  position:relative;\n  z-index:var(--zTooltip);\n  background-color:white;\n}\n\n</style>","import { render } from \"./Tooltip.vue?vue&type=template&id=658c95b6\"\nimport script from \"./Tooltip.vue?vue&type=script&lang=js\"\nexport * from \"./Tooltip.vue?vue&type=script&lang=js\"\n\nimport \"./Tooltip.vue?vue&type=style&index=0&id=658c95b6&lang=css\"\n\nimport exportComponent from \"/home/kibble/repos/zdog-scope/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./InputVectorTooltip.vue?vue&type=template&id=926bbd34\"\nimport script from \"./InputVectorTooltip.vue?vue&type=script&lang=js\"\nexport * from \"./InputVectorTooltip.vue?vue&type=script&lang=js\"\n\nimport \"./InputVectorTooltip.vue?vue&type=style&index=0&id=926bbd34&lang=css\"\n\nimport exportComponent from \"/home/kibble/repos/zdog-scope/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./InputVector.vue?vue&type=template&id=26e33402\"\nimport script from \"./InputVector.vue?vue&type=script&lang=js\"\nexport * from \"./InputVector.vue?vue&type=script&lang=js\"\n\nimport \"./InputVector.vue?vue&type=style&index=0&id=26e33402&lang=css\"\n\nimport exportComponent from \"/home/kibble/repos/zdog-scope/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div class=\"picker-wrapper\">\n    <a class=\"picker-button\"\n      @click=\"open\">\n      <div class=\"patch\" :style=\"{'backgroundColor': wipColor}\"\n        @click=\"toggle\">\n      </div>\n      <input type=\"text\"\n        aria-label=\"colorpicker\"\n        v-model=\"wipColor\"\n        @change=\"colorEnter\"\n        @blur=\"close\"/>\n    </a>\n    <figure v-if=\"isActive\" class=\"picker\" ref=\"picker\" />\n  </div>\n</template>\n\n<script>\n//import {ref, onMounted} from 'vue' // onUpdated, onUnmounted\nimport iro from '@jaames/iro';\n\n\nexport default {\n  name: 'ColorPicker',\n  props: {\n    color:{\n      type:String,\n      default:'#333'\n    }\n  },\n  emits:['close', 'update'],\n\n  data(){\n    return{\n      colorPicker:null,\n      isActive:false,\n      wipColor:this.color\n    }\n  },\n  methods:{\n    open(){\n      if (this.isActive) return;\n      this.isActive = true;\n      this.$nextTick(()=>{\n        this.wipColor = this.color;\n        this.mountPicker();\n      })\n    },\n    close(){\n      this.isActive = false;\n    },\n    toggle(e){\n      e.stopPropagation();\n      e.preventDefault()\n      if (!this.isActive) {\n        this.open()\n      } else {\n        this.close();\n      }\n    },\n    colorEnter(e){\n      this.colorPicker.color.set(e.target.value);\n      this.wipColor = this.colorPicker.color.rgbaString\n      this.$emit('update', this.wipColor);\n    },\n    mountPicker(){\n      let cxt = this;\n      cxt.colorPicker = new iro.ColorPicker(cxt.$refs.picker, {\n        color: cxt.color,\n        width:200,\n        layout: [\n            { \n              component: iro.ui.Box,\n            // options: {}\n            },\n            { \n              component: iro.ui.Slider,\n              options: {\n                // can also be 'saturation', 'value', 'red', 'green', 'blue', 'alpha' or 'kelvin'\n                sliderType: 'hue'\n              }\n            },\n            { \n              component: iro.ui.Slider,\n              options: {\n                // can also be 'saturation', 'value', 'red', 'green', 'blue', 'alpha' or 'kelvin'\n                sliderType: 'alpha'\n              }\n            },\n          ]\n      })\n      \n      cxt.colorPicker.on('color:change', function(color) {\n            cxt.wipColor = color.rgbaString\n        });\n\n      cxt.colorPicker.on('input:end', function(color){\n        cxt.$emit('update', color.rgbaString)\n      })\n    },\n  },\n}\n</script>\n\n<style>\n\n.picker-wrapper{\n  position:relative;\n}\n\n.picker{\n  position:absolute;\n  margin:0;\n  top:2rem;\n  left:50%;\n  transform:translateX(-50%);\n  background-color:rgba(255,255,255,0.9);\n  padding:0.5rem;\n  z-index:var(--zPanel)\n}\n\na.picker-button{\n  display:flex;\n  flex-flow:row nowrap;\n  line-height:1rem;\n  background-color:transparent;\n  border:none;\n  align-items:center;\n}\n\n.picker-wrapper input{\n  height:1.3rem;\n}\n\n.patch{\n  border-radius:50% 50%;\n  width:1.5rem;\n  height:1.5rem;\n  margin:0.1rem 0.3rem;\n}\n</style>","import { render } from \"./ColorPicker.vue?vue&type=template&id=5f665e48\"\nimport script from \"./ColorPicker.vue?vue&type=script&lang=js\"\nexport * from \"./ColorPicker.vue?vue&type=script&lang=js\"\n\nimport \"./ColorPicker.vue?vue&type=style&index=0&id=5f665e48&lang=css\"\n\nimport exportComponent from \"/home/kibble/repos/zdog-scope/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n<div class=\"col\">\n  <label\n    :for=\"id\"\n  >\n    Backface\n    <input\n      :id=\"id\"\n      type=\"checkbox\"\n      v-model=\"bChecked\"\n      @change=\"change\"\n    >\n    </label>\n    <ColorPicker v-if=\"bChecked && threeD\"\n    :color=\"color\"\n    @update=\"update\"\n    />\n</div>\n</template>\n\n<script>\nimport ColorPicker from './ColorPicker.vue'\n\nexport default {\n  name: 'Backface',\n  components:{ColorPicker},\n  props: {\n    id:{\n      type:String,\n      default:'backface'\n    },\n    color:{\n      type:String,\n      default:'#333'\n    },\n    threeD:{\n      type:Boolean,\n      default:false\n    },\n    checked:{\n      type:Boolean,\n      default:false\n    }\n  },\n  emits:['update'],\n\n  data(){\n    return{\n      bChecked:this.checked,\n      chooseColor:null\n    }\n  },\n\n  methods:{\n    update(newColor){\n      this.chooseColor = newColor;\n      this.$emit('update', newColor)\n    },\n    change(){\n      if (this.bChecked == false){\n        this.chooseColor = null\n        this.$emit('update', false)\n      } else if (this.bChecked == true && this.chooseColor == null){\n        this.$emit('update', true)\n      }\n    }\n  },\n}\n</script>","import { render } from \"./Backface.vue?vue&type=template&id=09e4c18d\"\nimport script from \"./Backface.vue?vue&type=script&lang=js\"\nexport * from \"./Backface.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/kibble/repos/zdog-scope/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n    <label\n      class=\"input\"\n      :for=\"name\"\n    >\n      <slot/>\n      <component\n        :is=\"element\"\n        v-bind=\"$attrs\"\n        autocomplete=\"off\"\n        autocorrect=\"off\"\n      />\n      <!-- <div v-if=\"$attrs.type == 'number'\"\n        class=\"numberarrows no-select\">\n        <div class=\"incr\">+</div>\n        <div class=\"decr\">-</div>\n      </div> -->\n    </label>\n</template>\n\n<script>\nimport StringMixin from '../../../zdogger'\n\n// import InputVector from './InputVector'\n import ColorPicker from './ColorPicker'\n// import Backface from './Backface'\n\n\nexport default {\n  name: 'InputLabel',\n  mixins:[StringMixin],\n  inheritAttrs: false,\n  components:{\n    ColorPicker\n  },\n  props: {\n    name:{\n      type:String,\n      default:null\n    },\n    element:{\n      type:String,\n      default:'input'\n    }\n  },\n  emits:['model-value'],\n  computed:{\n    // compType(){\n    //   if (this.type == 'color'){\n    //     return 'ColorPicker' \n    //   } else if (this.type == 'vector'){\n    //     return 'InputVector'\n    //   } else if (this.type =='backface'){\n    //     return 'Backface'\n    //   }\n    // }\n  },\n\n  methods:{\n  },\n}\n</script>\n\n<style>\n\n/* .input input[type=number]::-webkit-inner-spin-button,\n.input input[type=number]::-webkit-outer-spin-button\n{\n  -webkit-appearance: none;\n  margin: 0;\n}\n\n.input input[type=number]\n{\n  -moz-appearance: textfield;\n} */\n\n.input .numberarrows{\n  position:absolute;\n  top:0;\n  right:0;\n  height:100%;\n  display:flex;\n  flex-flow:column nowrap;\n  background-color:var(--colorPri);\n  z-index: 1;\n  cursor:pointer;\n}\n.input .numberarrows .incr{\n  height:50%;\n}\n\n.input .numberarrows .decr{\n  height:50%;\n}\n\n</style>","import { render } from \"./InputLabel.vue?vue&type=template&id=bffb4bdc\"\nimport script from \"./InputLabel.vue?vue&type=script&lang=js\"\nexport * from \"./InputLabel.vue?vue&type=script&lang=js\"\n\nimport \"./InputLabel.vue?vue&type=style&index=0&id=bffb4bdc&lang=css\"\n\nimport exportComponent from \"/home/kibble/repos/zdog-scope/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Creation.vue?vue&type=template&id=2ffd653c&scoped=true\"\nimport script from \"./Creation.vue?vue&type=script&lang=js\"\nexport * from \"./Creation.vue?vue&type=script&lang=js\"\n\nimport \"./Creation.vue?vue&type=style&index=0&id=2ffd653c&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/kibble/repos/zdog-scope/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2ffd653c\"]])\n\nexport default __exports__","<template>\n  <div>\n    <InputLabel\n      v-model=\"wipSettings['backgroundColor']\"\n      element=\"ColorPicker\"\n      :color=\"currentSettings.backgroundColor\"\n    >\n    Background Color:\n    </InputLabel>\n    <button @click=\"saveSettings\">\n      Save\n    </button>\n    <button @click=\"defaultSettings\">\n      Default\n    </button>\n  </div>\n</template>\n\n<script>\nimport InputLabel from './controls/InputLabel'\n\nexport default {\n  name: 'Settings',\n  components:{\n    InputLabel,\n  },\n  emits:['close-prompt'],\n  \n  data(){\n    return{\n      wipSettings:{},\n    }\n  },\n  mounted(){\n    this.wipSettings = this.currentSettings\n  },\n  computed:{\n    currentSettings(){\n      return this.$store.state.canvas.settings\n    }\n  },\n  methods:{\n    saveSetting(name){\n      let payload = {\n        name: name,\n        value: this.wipSettings[name]\n      }\n      this.$store.dispatch('canvas/changeSetting', payload)\n    },\n    defaultSettings(){\n\n    }\n  }\n}\n</script>\n\n<style scoped>\n</style>","import { render } from \"./Settings.vue?vue&type=template&id=4e6ca260\"\nimport script from \"./Settings.vue?vue&type=script&lang=js\"\nexport * from \"./Settings.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/kibble/repos/zdog-scope/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./TopBar.vue?vue&type=template&id=29920c32\"\nimport script from \"./TopBar.vue?vue&type=script&lang=js\"\nexport * from \"./TopBar.vue?vue&type=script&lang=js\"\n\nimport \"./TopBar.vue?vue&type=style&index=0&id=29920c32&lang=css\"\n\nimport exportComponent from \"/home/kibble/repos/zdog-scope/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n    <h2>Properties</h2>\n  <div class=\"property-panel\"\n    @click=\"closeTooltip\"\n    v-if=\"selectedNode && treeLoaded\"\n    >\n      <div class=\"row info\" >\n        <div class=\"word-break\">\n          id: {{ selected }}\n        </div>\n        <div class=\"text-display-type\">\n          {{ selectedTypeName }}\n        </div>\n        <label class=\"input-name\">\n          <input\n            :value=\"selectedNode['name']\"\n            class=\"input-name\"\n            type=\"text\"\n            autocomplete=\"off\"\n            autocorrect=\"off\"\n            :placeholder=\"selectedName\"\n            @change=\"updateName\"\n          >\n        </label>\n      </div>\n\n    <form\n      v-if=\"selectedNode && treeLoaded\"\n      class=\"field-list\"\n    >\n      <div class=\"row\">\n        <InputVector\n          v-for=\"prop in propList('vectors')\"\n          :id=\"`v_${prop}`\"\n          :key=\"prop\"\n          :value=\"selectedNode[prop]\"\n          :type=\"prop\"\n          @send-coords=\"inputChange(prop, $event)\"\n        >\n          {{ capitalize(prop) }}\n        </InputVector>\n      </div>\n      <div class=\"row\">\n        <InputLabel v-for=\"prop in propList('nums')\"\n          :key=\"prop\"\n          class=\"field\"\n          :for=\"prop\"\n          element=\"input\"\n          :value=\"selectedNode[prop]\"\n          type=\"number\"\n          step=0.1\n          :placeholder=\"selectedNode[prop]\"\n          :name=\"prop\"\n          @change=\"inputChange(prop, $event.target.value)\"\n          >\n        {{ capitalize(prop) }}:\n        </InputLabel>\n        <label v-for=\"prop in propList('colors')\"\n          class=\"field\"\n          :for=\"prop\"\n          :key=\"prop\"\n        >\n          {{capitalize(prop)}}:\n          <ColorPicker\n          :color=\"selectedNode[prop]\"\n          @update=\"inputChange(prop, $event)\"\n          />\n        </label>\n      </div>\n      <div class=\"row\">\n        <InputLabel v-for=\"prop in propList('bools')\"\n          :key=\"prop\"\n          class=\"field\"\n          :for=\"prop\"\n          element=\"input\"\n          :value=\"selectedNode[prop]\"\n          type=\"checkbox\"\n          :checked=\"selectedNode[prop]\"\n          :name=\"prop\"\n          @change=\"inputChange(prop, $event.target.value)\"\n          >\n        {{ capitalize(prop) }}:\n        </InputLabel>\n\n        <Backface v-if=\"hasBackfaceColor\"\n            :color=\"selectedNode.backface\"\n            :threeD=\"isThreeD\"\n            :checked=\"true\"\n            @update=\"inputChange('backface', $event)\"\n            />\n        <Backface v-else\n            :threeD=\"isThreeD\"\n            :checked=\"selectedNode.backface\"\n            @update=\"inputChange('backface', $event)\"\n            />\n      </div>\n      <button @click=\"saveProps\">\n        Apply Changes\n      </button>\n    </form>\n\n    <button @click=\"bWarning = true\">Delete</button>\n</div>\n<teleport to=\"body\">\n  <Modal\n    v-if=\"bWarning\"\n    @close=\"bWarning = false\"\n  >\n  Are you sure you want to delete?\n    <button @click=\"deleteSelected\">\n      Yes\n    </button>\n    <button @click=\"bWarning = false\">\n      Cancel\n    </button>\n  </Modal>\n</teleport>\n</template>\n\n<script>\nimport { mapState, mapActions} from 'vuex'// mapActions  mapGetters,\nimport {ZCLASS} from '../../zdogger/ztree'\n\nimport {StringMixin} from '../../zdogger'\n\nimport Modal from '../Modal'\n\nimport InputVector from './controls/InputVector'\nimport ColorPicker from './controls/ColorPicker'\nimport Backface from './controls/Backface'\nimport InputLabel from './controls/InputLabel'\n\nexport default {\n  name: 'PropertyPanel',\n  components:{\n    InputVector,\n    ColorPicker,\n    Backface,\n    InputLabel,\n    Modal\n  },\n  mixins:[StringMixin],\n\n  data(){\n    return{\n      READ_ONLY: [\n        'type', 'id'\n      ],\n      wipTooltip:null,\n      bWarning:false\n    }\n  },\n  computed:{\n    ...mapState({\n      selected:state=>state.selected,\n      treeLoaded:state=>state.treeLoaded,\n      displayProps:state=>state.properties.displayProps,\n      selectedNode:state=>state.properties.displayProps.node\n    }),\n    selectedName(){\n      if (!this.$store.state.treeview.selectedListNode) return;\n      return this.$store.state.treeview.selectedListNode.name\n    },\n    selectedTypeName(){\n      return ZCLASS.NAMES[this.selectedNode.type];\n    },\n    hasColor(){\n      return this.selectedAllProps.includes('color');\n    },\n    hasBackfaceColor(){\n      let bf = this.selectedNode.backface;\n      return (typeof bf == 'string')\n    },\n    isThreeD(){\n      return this.selectedTypeName == 'cylinder' || this.selectedTypeName == 'hemisphere'\n      || this.selectedTypeName == 'cone'\n    }\n  },\n  methods:{\n    ...mapActions('properties',[\n      'changeDisplay',\n      'updateProps',\n      'editDisplay'\n    ]),\n    propList(type){\n      let t = this.displayProps.props[type];\n      if (type == 'colors') t = t.filter(prop=>prop != 'backface')\n      return t\n    },\n    saveProps(e){\n      e.preventDefault();\n    },\n    editProp(prop, value){\n      let p = {option: prop, value: value};\n      this.editOption(p)\n    },\n    inputChange(prop, newVal){\n      //this.editOption({option: prop, value: newVal})\n      let o = {};\n      o[prop] = newVal\n      this.updateProps(o)\n    },\n    updateName(e){\n      let ne = e.target.value;\n      let o = {name:ne}\n      this.updateProps(o)\n      this.$store.dispatch('history/updateSelectedName', ne);\n    },\n    closeTooltip(){\n      //this.$emit('close-tooltip');\n    },\n    deleteSelected(){\n      this.$store.dispatch('history/deleteZdog', this.selected)\n      this.bWarning = false;\n    }\n  },\n}\n</script>\n\n<style lang=\"scss\">\n@import '../../assets/fieldinput.css';\n\n.property-panel {\n  ::placeholder{\n    color:rgba(0,0,0,1);\n    opacity:1;\n  }\n\n  input{\n    &:placeholder-shown {\n      color:rgba(0,0,0,1);\n      opacity:1;\n    }\n    &.input-name{\n      max-width:100%;\n    }\n  }\n\n  .info{\n    justify-content:space-between;\n\n    div{\n      color:rgba(0,0,0,0.6);\n      font-size:0.9em;\n      padding:0 0.2rem;\n    }\n  }\n\n  .field{\n    font-size:1.05rem;\n    margin:3px 2px;\n    text-transform:capitalize;\n    user-select:none;\n  }\n\n}\n</style>\n","import { render } from \"./PropertyPanel.vue?vue&type=template&id=4de71eaf\"\nimport script from \"./PropertyPanel.vue?vue&type=script&lang=js\"\nexport * from \"./PropertyPanel.vue?vue&type=script&lang=js\"\n\nimport \"./PropertyPanel.vue?vue&type=style&index=0&id=4de71eaf&lang=scss\"\n\nimport exportComponent from \"/home/kibble/repos/zdog-scope/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <h2>Tree View</h2>\n    TODO: filter anchors, add icon, searchbar\n  <header class=\"row between text-display-type\">\n    <div class=\"col index\">\n      Index\n    </div>\n    <div class=\"col name\">\n      Name\n    </div>\n    <div class=\"col type\">\n      Type\n    </div>\n  </header>\n  <ul\n    v-if=\"treeView && treeLoaded\"\n    class=\"tree-bg\"\n  >\n    <TreeItem\n      v-for=\"(node) in treeView\"\n      :key=\"node.id\"\n      :node=\"node\"\n      :depth=\"0\"\n    />\n    <button @click=\"embedGen\">\n      Embed Dream\n    </button>\n    <br>\n  </ul>\n<teleport to=\"body\">\n  <Modal\n    v-if=\"bEmbed\"\n    @close=\"bEmbed = false\"\n  >\n    <textarea ref=\"embedText\"\n      :value=\"embed\"/>\n    <button @click=\"embedCopy\">\n      Copy\n    </button>\n  </Modal>\n</teleport>\n</template>\n\n<script>\nimport { mapState} from 'vuex'// mapActions mapGetters\n\nimport TreeItem from './TreeItem.vue'\nimport Modal from '../Modal'\n\n\nexport default {\n  name: 'TreeView',\n  components:{\n    TreeItem,\n    Modal\n    },\n\n  data(){\n    return{\n      ghost:false,\n      rerender:false,\n      draggingObject:null,\n      dragId:null,\n      bEmbed:false,\n    }\n  },\n  computed:{\n    ...mapState({\n      illustration:'illustration',\n      treeLoaded:'treeLoaded',\n      embed:state=>state.treeview.embed,\n      treeView:state=>state.treeview.list\n    }),\n  },\n  watch:{\n    illustration(nVal){\n      if (nVal){\n        this.$store.dispatch('treeview/changeList')\n      }\n    },\n  },\n  methods:{\n    getPanelWidth(){\n      return this.$parent.$refs.treeview.clientWidth\n    },\n    log(){\n      console.log(this.treeView)\n    },\n    embedGen(){\n      this.bEmbed = true;\n      this.$store.dispatch('treeview/createEmbed')\n    },\n    embedCopy(){\n      let r = this.$refs.embedText\n      r.select();\n      r.setSelectionRange(0, 99999);\n      document.execCommand(\"copy\");\n    }\n  },\n}\n</script>\n\n<style lang=\"scss\">\n.tree-view {\n  ul.tree-bg{\n    background-image: linear-gradient(0deg,\n      var(--colorShade) 25%,\n      transparent 25%, transparent 50%,\n      var(--colorShade) 50%, var(--colorShade) 75%,\n      transparent 75%, transparent 100%)\n    ;\n    background-size: 5.2rem 5.2rem;\n  }\n  ul ul {\n    padding-left:1.1rem;\n  }\n  header{\n    background-color:rgba(0,0,0,0.7);\n    color:rgba(255,255,255,1);\n  }\n  .row{\n    flex-wrap:nowrap;\n    \n    .index{\n      padding:0 0.2rem 0 0.2rem;\n      background-color:rgba(255,255,255,0.2);\n    }\n  }\n  .name{\n    flex-grow:4;\n    padding:0 0.2rem;\n  }  \n  .type{\n    padding:0 0.2rem 0 0.1rem;\n    width:6rem;\n    background-color:rgba(255,255,255,0.2);\n  }\n}\n</style>\n","<template>\n  <li\n    v-if=\"node\"\n    class=\"tree-item\"\n    @dragover=\"dragOver\"\n    @dragleave=\"dragOverIndicate = false\"\n    @drop=\"drop\"\n  >\n      <div\n        ref=\"selectitem\"\n        :class=\"{'data-set':true, 'row':true, 'highlight':(selected == node.id)}\"\n        draggable=\"true\"\n        @click.stop=\"highlight\"\n        @dragstart=\"dragStart\"\n        @dragend=\"dragEnd\"\n      >\n        <div class=\"index\">\n          <button\n            v-if=\"hasChildren\"\n            @click=\"toggleCollapse\"\n          >\n            {{ collapsed? '+' : '-' }}\n          </button>\n          <p>{{ node.index }}</p>\n        </div>\n\n        <div class=\"name\">\n          <ClickToEdit element=\"input\"\n            :dbl=\"true\"\n            autofocus\n            type=\"text\"\n            :placeholder=\"node.name\"\n            :label=\"node.name\"\n            @edit-finish=\"finishEditAssignedName\"\n            />\n        </div>\n\n\n        <div class=\"text-display-type type\">\n          {{ node.type }}\n        </div>\n      </div>\n      <div\n        v-if=\"dragOverIndicate\"\n        class=\"drag-over-ghost\"\n      />\n      <!--\n    <teleport to=\"[data-teleport]\">\n      <div v-if=\"editingName\" class=\"editing-blocker\"\n        @click=\"editBlocker\"\n        ></div>\n    </teleport>-->\n      <ul v-if=\"hasChildren\">\n        <TreeItem\n          v-for=\"(child) in node.children\"\n          :key=\"child.id\"\n          :class=\"{'collapsed':collapsed}\"\n          :node=\"child\"\n          :parent-id=\"node.id\"\n          @select-uncollapse=\"uncollapseBubble\"\n        />\n      </ul>\n  </li>\n</template>\n\n<script>\n//import {ref} from 'vue' // onUpdated, onUnmounted\nimport { mapState, mapActions} from 'vuex'// mapGetters\n\nimport ClickToEdit from './controls/ClickToEdit'\n\nexport default {\n  name: 'TreeItem',\n  components:{ClickToEdit},\n  props: {\n    node:{\n      type:Object,\n      default:null\n    },\n    parentId:{\n      type:String,\n      default:null\n    },\n  },\n  emits:['drag-started', 'drag-stop','select-uncollapse'],\n\n  data(){\n    return{\n      dragOverIndicate:false,\n      editingName:false,\n      collapsed:true,\n    }\n  },\n  computed:{\n    ...mapState({\n      selected:'selected',\n      updateTree:'updateTree'\n    }),\n    isSelected(){\n      return (this.selected == this.node.id)\n    },\n    hasChildren(){\n      return (this.node.children && this.node.children.length > 0)\n    },\n    validDropzone(){\n      let nid = this.node.id;\n      if (this.$store.state.treeview.blockIds.includes(nid)) return false \n      return true\n    },\n    truncName(){\n      let max = 20\n      let text = this.node.name\n      return text.substr(0,max-1)+(text.length>max?'&hellip;':''); \n    }\n  },\n  methods:{\n    ...mapActions({\n      changeSelectedName:'history/updateSelectedName', //newName\n      changeSelected:'changeSelected',\n      saveSelected:'treeview/saveSelected',\n      startDrag:'treeview/startDrag',\n      stopDrag:'treeview/stopDrag'\n    }),\n    dragStart(e){\n      let payload = {childId: this.node.id}\n      this.startDrag({blockIds:[this.node.id, this.parentId]})\n      e.dataTransfer.setData(\"text/plain\", JSON.stringify(payload));\n    },\n    dragEnd(){\n      this.dragOverIndicate = false;\n      this.stopDrag()\n    },\n    dragOver(e){\n      e.preventDefault();\n      e.stopPropagation();\n      if (!this.validDropzone) return;\n      this.dragOverIndicate = true;\n      e.dataTransfer.dropEffect = \"move\";\n    },\n    drop(e){\n      e.preventDefault();\n      e.stopPropagation();\n      if (!this.validDropzone) return;\n      let data = JSON.parse(e.dataTransfer.getData(\"text/plain\"));\n      let payload = {\n        id: data.childId,\n        newParentId: this.node.id,\n      }\n      this.$store.dispatch('treeview/sortItem', payload)\n      //this.$emit('sort-tree', payload)\n      this.dragEnd();\n    },\n    finishEditAssignedName(newVal){\n      if (!newVal || (newVal == this.node.name)) return\n      this.changeSelectedName(newVal)\n    },\n    highlight(){\n      if (this.selected == this.node.id) {return}\n      this.changeSelected(this.node.id)\n      this.saveSelected(this.node)\n    },\n    toggleCollapse(e){\n      e.preventDefault();\n      e.stopPropagation();\n      this.collapsed = !this.collapsed;\n    },\n    log(event) {\n      console.log(event)\n    },\n    uncollapseBubble(){\n      this.collapsed = false\n      this.$emit('select-uncollapse')\n    }\n  },\n  watch:{\n    isSelected(newVal){\n      if (this.collapsed && newVal == true){\n        this.$emit('select-uncollapse')\n      }\n    }\n  }\n}\n</script>\n\n<style lang='scss'>\n.tree-item{\n  display:flex;\n  justify-content:space-between;\n  flex-direction:column;\n  position:relative;\n  cursor:pointer;\n\n/*States*/\n  .highlight{\n    background-color:var(--colorLight);\n  }\n  .collapsed{\n    display:none;\n  }\n/*Dom Elements*/\n  ul{\n    position:relative;\n  }\n  button{\n    position:relative;\n    line-height:0.3rem;\n    padding:0.2rem 0.1rem;\n    width:2.5ch;\n  }\n  li:before{\n    position:absolute;\n    top:0;\n    left:0.6rem;\n    content:'';\n    width:1px;\n    background-color:var(--colorMain);\n    height:100%;\n  }\n/*inner Styling*/\n  .row{\n    border-bottom: 1px solid rgba(0,0,0,0.3);\n  }\n  .data-set{\n    width: 100%;\n    height:1.3rem;\n  }\n  .index{\n    text-align:right;\n    border-right:1px solid rgba(92, 85, 85, 0.2);\n    display:flex;\n    flex-flow:row nowrap;\n\n    p{\n      margin:0;\n      padding:0;\n      padding-left:1ch;\n      max-width:5ch;\n      font-size:0.9rem;\n      color:var(--colorMain);\n    }\n  }\n  .name{\n    width:99%;\n    text-align:left;\n    max-width:initial;\n\n    input{\n      width:100%;\n    }\n  }\n/*Drag N Drop*/\n  .empty-list-dropzone{\n    padding:0.5rem 0 0 0;\n  }\n  .drag-over-ghost{\n    border:1px dashed var(--colorPri);\n    background-color:var(--colorLight);\n    opacity:0.5;\n    height:1.3rem;\n    margin-left:1rem;\n    /*needs arrow to indicate child?*/\n  }\n}\n\n\n</style>\n","<template>\n  <component\n    :is=\"element\"\n    v-if=\"editing\"\n    v-bind=\"$attrs\"\n    ref=\"inp\"\n    @keydown=\"keydownHandler\"\n    @blur=\"finish\"\n    @change=\"finish\"\n  >\n    <slot />\n  </component>\n  <label\n    v-if=\"dbl && !editing\"\n    @dblclick=\"edit\"\n  >\n    {{ label }}\n  </label>\n  <label\n    v-if=\"!dbl && !editing\"\n    @click=\"edit\"\n  >\n    {{ label }}\n  </label>\n</template>\n\n<script>\nexport default {\n  name: 'ClickToEdit',\n  inheritAttrs: false,\n  props: {\n    dbl:{\n      type:Boolean,\n      default:false\n    },\n    label:{\n      type:String,\n      default:null     \n    },\n    element:{\n      type:String,\n      default:\"input\"  \n    }\n  },\n  emits:['edit-start','edit-change', 'edit-finish'],\n\n  data(){\n    return{\n      editing:false,\n    }\n  },\n\n  methods:{\n    keydownHandler(event){\n      if (event.keyCode == 13) { //'Enter' pressed\n        this.finish();\n      }\n    },\n    edit(){\n      this.editing = true;\n      this.$emit('edit-start')\n    },\n    finish(){\n      this.editing = false;\n      this.$emit('edit-finish', this.$refs.inp.value)\n    }\n  },\n}\n</script>","import { render } from \"./ClickToEdit.vue?vue&type=template&id=07364723\"\nimport script from \"./ClickToEdit.vue?vue&type=script&lang=js\"\nexport * from \"./ClickToEdit.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/kibble/repos/zdog-scope/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./TreeItem.vue?vue&type=template&id=3c4a7a78\"\nimport script from \"./TreeItem.vue?vue&type=script&lang=js\"\nexport * from \"./TreeItem.vue?vue&type=script&lang=js\"\n\nimport \"./TreeItem.vue?vue&type=style&index=0&id=3c4a7a78&lang=scss\"\n\nimport exportComponent from \"/home/kibble/repos/zdog-scope/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./TreeView.vue?vue&type=template&id=51da5719\"\nimport script from \"./TreeView.vue?vue&type=script&lang=js\"\nexport * from \"./TreeView.vue?vue&type=script&lang=js\"\n\nimport \"./TreeView.vue?vue&type=style&index=0&id=51da5719&lang=scss\"\n\nimport exportComponent from \"/home/kibble/repos/zdog-scope/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <canvas\n    id=\"canvas\"\n    ref=\"workingCanvas\"\n    class=\"zdog-canvas\"\n    :width=\"windowWidth\"\n    :height=\"windowHeight\"\n    :style=\"{backgroundColor:settings.backgroundColor}\"\n  />\n\n  <canvas\n    id=\"ghost\"\n    :class=\"{'hidden':hideGhost}\"\n    :width=\"windowWidth\"\n    :height=\"windowHeight\"\n  />\n\n  <div class=\"canvas developer\">\n    <button style=\"z-index:200\" @click=\"hideGhost = !hideGhost\">Toggle</button>\n  </div>\n  <div id=\"zoom-control\">\n\n  </div>\n</template>\n\n<script>\nimport {mapState, mapActions, mapGetters} from 'vuex'\n// import { useWindowSize } from 'vue-window-size';\n\n/**\n * NOTES\n * https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/globalCompositeOperation\n * I want the shape to glow when it's selected...? 'destination-out' option\n * Need to extend Zdog to have Path2D\n *\n */\n\nexport default {\n  name: 'Canvas',\n  // data(){\n  //   return{\n  //     zoomDisplay:null\n  //   }\n  // },\n  // setup(){\n  //   const { width, height } = useWindowSize();\n\n  //   return{\n  //     windowWidth: width,\n  //     windowHeight: height,\n  //   }\n  // },\n  data(){\n    return{\n      hideGhost:true\n    }\n  },\n  computed:{\n    ...mapState({\n      settings:state=>state.canvas.settings,\n      selected:state=>state.selected,\n      illustration:state=>state.illustration,\n    }),\n    ...mapGetters({\n        selectedNode: 'selectedNode',\n    }),\n    windowWidth(){\n      return window.innerWidth;\n    },\n    windowHeight(){\n      return window.innerHeight;\n    },\n  },\n  watch:{\n    selectedNode(nVal, oVal){\n      if (nVal && nVal != oVal){\n        this.showSelectedAxes()\n      } else {\n        this.clearSelectedAxes()\n      }\n    },\n  },\n  methods:{\n    ...mapActions('canvas',[\n      'showSelectedAxes',\n      'clearSelectedAxes',\n      'clearCanvasAxes'\n    ]),\n    clickHandler(event){\n      console.log(this.getMousePos(event));\n    },\n    getMousePos(event){\n      console.log(this.camera.zoom);\n      return {\n        x: event.clientX,\n        y: event.clientY\n      };\n    },\n  }\n}\n</script>\n\n<style>\n\n#canvas, #ghost{\n  position:absolute;\n  top:0;\n  left:0;\n  width:100vw;\n  height:100vh;\n}\n#canvas{\n  z-index:var(--zCanvas);\n}\n\n#ghost{\n  /* z-index:var(--zGhost); */\n  z-index:1;\n}\n\ncanvas.developer{\n  z-index:3;\n  position:absolute;\n  bottom:0;\n}\n\n#zoom-control{\n  position:absolute;\n  bottom:0;\n  z-index:var(--zPanel)\n}\n\n#zoom-control figure{\n  padding:0.1rem 0.2rem;\n  margin:0;\n\n}\n</style>\n","import { render } from \"./Canvas.vue?vue&type=template&id=e193dd20\"\nimport script from \"./Canvas.vue?vue&type=script&lang=js\"\nexport * from \"./Canvas.vue?vue&type=script&lang=js\"\n\nimport \"./Canvas.vue?vue&type=style&index=0&id=e193dd20&lang=css\"\n\nimport exportComponent from \"/home/kibble/repos/zdog-scope/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=f93fb03c\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=f93fb03c&lang=css\"\n\nimport exportComponent from \"/home/kibble/repos/zdog-scope/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import {createApp } from 'vue'\nimport Vuex from './store'\nimport App from './App.vue'\n//import { VueResponsiveComponents } from 'vue-responsive-components'\n\n\nvar app = createApp(App)\napp.use(Vuex)\n//app.use(VueResponsiveComponents)\napp.mount('#app')","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Modal.vue?vue&type=style&index=0&id=37953d71&scoped=true&lang=css\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./InputLabel.vue?vue&type=style&index=0&id=bffb4bdc&lang=css\"","import Zdog from 'zdog'\n\nimport json_beautifier from 'csvjson-json_beautifier';\n\n/**\n * Zdog properties that are derived, or do esoteric things\n  const ADVANCED_PROPERTIES  = ['origin','sortValue','pixelRatio',\n  'renderOrigin','renderFront','renderNormal','pathCommands',\n  'canvasHeight','canvasWidth']   */\n\n/**\n * classType only accepts 0-13 (corresponding to ZDog types)\n */\n\nconst ZDOG_CLASS_TYPE = [\n  Zdog.Anchor,\n  Zdog.Shape,\n  Zdog.Cone,\n  Zdog.Cylinder,\n  Zdog.Dragger,\n  Zdog.Ellipse,\n  Zdog.Group,\n  Zdog.Hemisphere,\n  Zdog.Illustration,\n  Zdog.Polygon,\n  Zdog.Rect,\n  Zdog.RoundedRect,\n  Zdog.Box,\n  Zdog.Vector\n]\n  \n/**\n * Treated like an enum\n */\nconst ZDOG_CLASS = {\n  'anchor':0,\n  'shape':1,\n  'cone':2,\n  'cylinder':3,\n  'dragger':4,\n  'ellipse':5,\n  'group':6,\n  'hemisphere':7,\n  'illustration':8,\n  'polygon':9,\n  'rect':10,\n  'roundedrect':11,\n  'box':12,\n  'vector':13\n}\n\n/**\n * Treated like an enum, convert an integer to the Zdog class/type/object name\n */\nconst ZDOG_CLASS_NAME = Object.keys(ZDOG_CLASS);\n  \nconst CYCLIC_PROPS = [\n  'addTo', 'dragRotate', 'onPrerender', 'onDragStart', 'onDragMove',\n  'onDragEnd','onResize', 'element'\n]\n\nlet nocyclic = (options) => {return options.filter(option=>{\n  return !CYCLIC_PROPS.includes(option)\n})}\n\n/**\n * Generates a basic random ID\n * https://stackoverflow.com/questions/3231459/create-unique-id-with-javascript\n * https://svijaykoushik.github.io/blog/2019/10/04/three-awesome-ways-to-generate-random-number-in-javascript/\n */\nvar seed = Date.now();\nfunction generateUid() {\n  let xorShift = () =>{\n    seed ^= seed << 13;\n    seed ^= seed >> 17;\n    seed ^= seed << 5;\n    return seed;\n  }\n// always start with a letter -- base 36 makes for a nice shortcut\n  let r  = (Math.floor((Math.random() * 25)) + 10).toString(36)\n  let u = xorShift(seed);\n  r += (u < 0 ? -u : u).toString(36);\n  return r\n}\n\n/**\n * Creates Zdog objects with name, uid and type (see ZDOG_CLASS, an 'enum')\n * @param {Number} int \n */\nfunction make(int){\n  let construct = ZDOG_CLASS_TYPE[int];\n  return function(options){\n    let newZdog = new construct(options);\n    assignUID(newZdog);\n    assignName(newZdog);\n    assignType(newZdog, int);\n    return newZdog;\n  }\n}\n  \n/**\n * Instead of new Zdog.Anchor(options), can call\n * create('anchor') and defer object creation until you receive all options\n * \n * e.g.\n * let makeAnchor = (options) => create('anchor')(options)\n * \n * makeAnchor({translate:{x:0,y:0}}) returns new Zdog.Anchor\n * @param {String} itemName \n */\nconst create = (itemName) => {\n  return make(ZDOG_CLASS[itemName])\n}\n  \n/**\n * Adds an \"name\" property to the Zdog item for human covenience (and open up for search/filter options in the future?)\n * @param {*} ZdogItem \n */\nfunction assignName(ZdogItem, name){\n  if (!name) name = \"untitled\";\n  Object.defineProperty(ZdogItem, \"name\", {\n    enumerable: true,\n    writable: true,\n    configurable:false,\n    value: name\n  })\n}\n  \n/**\n * Adds a unique identifier \"id\" immutable property to the Zdog item.\n * @param {*} ZdogItem \n */\nfunction assignUID(ZdogItem){\n  ZdogItem.id = generateUid();\n  // freeze the id\n  Object.defineProperty(ZdogItem, \"id\", {enumerable:true, configurable: false, writable: false });\n}\n/**\n * Adds the property \"type\" as an integer for class checking\n * @param {*} ZdogItem \n */\nfunction assignType(ZdogItem, int){\n  Object.defineProperty(ZdogItem, \"type\", {\n    enumerable: true,\n    writable: false,\n    configurable:false,\n    value: int\n  })\n}\n  \n/**\n * Checks if the Zdog item is a certain type of instance ('Shape,' 'Vector,' etc.) Will return true for super classes (like Illustration is an Anchor)\n * @param {*} ZdogItem the Zdog item\n * @param {*} type can be String or Number (e.g. 'anchor' or 0 or '0')\n */\nfunction isClass(zdog, type){\n  //string argument\n  let int = 0;\n  if (typeof type == 'string') {\n    type = type.toLowerCase();\n    int = ZDOG_CLASS[type];\n  } else if (Number.isInteger(type)) {\n    int = type\n  } else {\n    return false\n  }\n  return (zdog instanceof ZDOG_CLASS_TYPE[int]);\n}\n  \n/**\n * Add properties to native Zdog objects that don't have ids or type assigned to them yet\n * @param {*} ZdogItem \n * @param {*} options {id,name, type}\n */\nfunction assignExisting(ZdogItem){\n  //start backwards because anchor is 0 and is the parent of almost all objects\n  let type = -1;\n  for(let n = ZDOG_CLASS_NAME.length - 1; n >= 0; n--){\n    if (isClass(ZdogItem, n)){\n      type = n;\n      break;\n    }\n  }\n  if (type < 0) return ZdogItem; // return the original because can only do certain objects\n\n  if (!ZdogItem.name) assignName(ZdogItem, 'untitled');\n  if (!ZdogItem.id) assignUID(ZdogItem);\n  if (!ZdogItem.type) assignType(ZdogItem, type);\n\n  for (let c of ZdogItem.children){\n    assignExisting(c);\n  }\n  return ZdogItem\n}\n  \n/**\n * Add 'id', 'type' and 'name' properties to an illustration and returns a copy\n * @param {Zdog.Illustration} illustration\n */\nfunction importExisting(illustration){\n  let copy = illustration.copyGraph();\n  assignExisting(copy);\n  return copy;\n}\n\n/**\n * Creates a copy of a Zdog object with different ids\n * @param {*} zdog A Zdog object\n * @param {Boolean} deep whether to copy the descendents\n */\nfunction copy(zdog, deep=false){\n  if (!deep){\n    return assignExisting(zdog.copy())\n  }\n  return assignExisting(zdog.copyGraph())\n}\n  \n/**\n * Revives the plain Object or a stringified JSON into a Zdog object\n * @param {*} plainObject \n */\nfunction reviveZdog(plainObject){\n  if (typeof plainObject === \"string\"){\n    plainObject = JSON.parse(plainObject);\n  }\n  let {id, name, type, ...options} = plainObject;\n  let ZdogO = new ZDOG_CLASS_TYPE[type](options);\n  \n  assignName(ZdogO, name);\n  assignType(ZdogO, type)\n  ZdogO.id = id;\n  Object.defineProperty(ZdogO, \"id\", {enumerable:true, configurable: false, writable: false });\n  return ZdogO\n}\n  \n/**\n * Zerialises Zdog object and returns a JS object with bare minimum properties\n * @param {*} ZdogItem Zdog Item\n * @param {String} canvasQuery A query selector string if the node is an illustration\n */\nfunction toObject(ZdogItem, canvasQuery=\".zdog-canvas\"){\n  if(!ZdogItem || (isNaN(ZdogItem.type)) ) return;\n  let type = ZdogItem.type;\n  if (type == 4) return //we're not serializing dragger type\n  let classType = ZDOG_CLASS_TYPE[type];\n  let recordProps = classType.optionKeys.filter(option=>{\n    return !CYCLIC_PROPS.includes(option)\n  });\n  if (!recordProps) return\n\n  let result = {\n    type: type,\n    name: ZdogItem.name,\n    id: ZdogItem.id\n  }\n\n  let strin = (prop) =>{\n    if (prop == 'dragRotate') {\n      if (typeof ZdogItem[prop] != 'boolean'){\n        return true;\n      }\n    } else if(prop == 'element') {\n      return canvasQuery\n    }\n    return ZdogItem[prop]\n  }\n\n  //Assing props\n  recordProps.forEach(prop=>{\n    result[prop] = strin(prop);\n  })\n\n  if (type == 8){\n      //illustration element prop set to a selector\n      result.element = canvasQuery;\n  }\n  return result;\n}\n\n/**\n * Returns an {option:value} object of a Zdog pruned of cyclic values\n * @param {*} zdog Zdog object\n */\n// function getProps(node){\nfunction justProps(zdog){\n  let options;\n  options = zdog.constructor.optionKeys\n  let o = {}\n  for (let p of nocyclic(options)){\n    o[p] = zdog[p]\n  }\n  Object.assign(o, {\n    name: zdog.name,\n    type: zdog.type,\n    id: zdog.id\n  })\n  return o;\n}\n  \n/**\n * Gets the valid instantiation options of the Zdog Class\n * \n * validProps('Anchor') // returns [\"rotate\", \"translate\", \"scale\"]\n * @param {*} arg can be String or Integer\n */\nfunction validProps(arg){\n  let options;\n  try{\n    if (typeof arg == 'number'){\n      options = ZDOG_CLASS_TYPE[arg].optionKeys\n    } else if (typeof arg == 'string'){\n      options = ZDOG_CLASS_TYPE[ZDOG_CLASS[arg.toLowerCase()]].optionKeys\n    } else if (arg.optionKeys){\n      options = arg.optionKeys\n    } else {\n      options = arg.constructor.optionKeys\n    }\n    return nocyclic(options)\n  } catch(e){\n    throw new Error(e)\n  }\n}\n\n\n/**\n * JSON converter for Ztree\n */\nclass ZtreeReader{\n  /**\n   * Accepts a Ztree instance a JSON string. Can be null.\n   * @param {Ztree} arg \n   */\n  constructor(arg){\n    this.tree = null\n    if (!arg) {\n      return\n    } else if (arg instanceof Ztree) {\n      this.tree = arg\n    } else {\n      this.reviveTree(arg);\n    }\n  }\n\n  /**\n   * Zdog reviver function for JSON.parse second argument\n   */\n  static revivePlain(key, value){\n    if (key == 'nodes'){\n      let temp = value.map(plain=>{\n        return reviveZdog(plain);\n      })\n      return temp;\n    } else {\n      return value;\n    }\n  }\n\n  /**\n   * Revives a JSON file to a Ztree and returns a new Ztree\n   * @param {*} JSONstring \n   */\n  reviveTree(JSONstring){\n    //parse arg into a Ztree\n    let objecT = JSONstring\n    if (typeof JSONstring == 'string'){\n      objecT = JSON.parse(JSONstring, ZtreeReader.revivePlain);\n    } else {\n      objecT.nodes = objecT.nodes.map(plain=>{\n        return reviveZdog(plain)\n      })\n    }\n    let maP = new Map()\n    objecT.nodes.forEach(node=>{\n      maP.set(node.id, node);\n      if(node.id == objecT.illustration){\n        this.tree = new Ztree(node, objecT.canvasQuery);\n      }\n    })\n    this.tree.nodeMap = maP;\n    //set relations, each relation is {parent:'parentid', children:[array of childids]}\n    this.tree.relationMap = new Map();\n    for(var r of objecT.relations){\n      let parent = maP.get(r.parent);\n      let set = new Set(r.children.map(id=>{\n        let child = maP.get(id)\n        parent.addChild(child)\n        return id;\n      }));\n      this.tree.relationMap.set(r.parent, set);\n    }\n\n    return this.tree;\n  }\n\n  /**\n   * Sends a download prompt\n   */\n  static Download(content, fileName, contentType){\n    const a = document.createElement(\"a\");\n    var file = new Blob([content], {type: contentType});\n    a.href = URL.createObjectURL(file);\n    a.download = fileName;\n    a.click();\n    //window.URL.revokeObjectURL(file);\n  }\n\n  /**\n   * Method to download the Ztree as JSON\n   */\n  download(){\n    if (!this.tree) throw new Error('Cannot download if there is no tree')\n    let content = this.tree.toJSON();\n    ZtreeReader.Download(content, `${this.tree.illustration.name}.json`, 'text/json');\n  }\n\n  /**\n   * Opens the client's File Explorer to only accept .JSON, and returns a Promise that resolves to FileList, otherwise rejects\n   */\n  static async import(){\n    const input = document.createElement('input')\n    input.setAttribute('type','file');\n    input.setAttribute('accept','.json');\n    return new Promise((resolve, reject)=>{\n      input.addEventListener('change', (event) => {\n        let file = event.target.files;\n        if (file !== null && file !== undefined) {\n          resolve(event.target.files);\n        } else {\n          reject('No file chosen');\n        }\n      });\n      input.click()\n    })\n  }\n\n  /**\n   * Parses selected JSON file, returns Promise with the Ztree on success\n   */\n  async load(){\n    return new Promise((resolve, reject) => {\n      ZtreeReader.import().then(fileList=>{\n        var fileReader = new FileReader();\n        fileReader.onloadend = (ev) => {\n          this.reviveTree(ev.target.result);\n          resolve(this.tree);\n        }\n        for (let f of fileList){\n          fileReader.readAsText(f);\n        }\n      }).catch(e=>{\n        reject(e);\n      })\n    })\n  }\n}\n\n/**\n * Make easy tree viewing of Zdog objects\n * https://chrissmith.xyz/super-fast-tree-view-in-javascript/\n */\nclass Ztree{\n  /**\n   * Illustration can be null\n   * @param {Zdog.Illustration} illustration \n   */\n  constructor(illustration, canvasQuery=\".zdog-canvas\"){\n    let optionsDefault = {\n      element: canvasQuery,\n      width: window.innerWidth,\n      height: window.innerHeight,\n     // rotate: {x:-.5+Math.PI, z: 0, y:.5+Math.PI}, //default Zdog rotation is weird\n      //dragRotate:true\n      }\n\n    this.canvasQuery = canvasQuery;\n    this.nodeMap = new Map();\n    this.relationMap = new Map(); //{key: id, value: Set() of child ids}\n    if (!illustration){\n      this.illustration = null;\n      return;\n    }else if (!illustration.element || typeof illustration.element == 'string'){\n      // the illustration is just a plain object\n      if (illustration.element){\n        this.canvasQuery = illustration.element;\n      }\n      let options = Object.assign(optionsDefault, illustration)\n      this.illustration = create('illustration')(options);\n    } else if (Z.is(illustration, 'illustration')) {\n      if (illustration.id){\n        this.illustration = illustration\n      } else {\n        this.illustration = importExisting(illustration)\n        this.flatten(this.illustration)\n        this.illustration.name = 'root'\n      }\n    }\n    this.addNode(this.illustration);\n  }\n\n  //flatten existing zdog object into Map and Set to record relations\n  flatten(ZdogItem){\n    let mainID = Ztree._nodeID(ZdogItem)\n    if (!ZdogItem.id){\n      assignExisting(ZdogItem)\n    }\n    this.nodeMap.set(mainID, ZdogItem);\n    if (ZdogItem.addTo){\n      let pID = ZdogItem.addTo.id;\n      let set = this.relationMap.get(pID);\n      if (!set) {\n        this.relationMap.set(pID, new Set([mainID]))\n        return\n      }\n      set.add(mainID);\n    }\n    if (ZdogItem.children.length > 0) {\n      let set = this.relationMap.get(mainID);\n      if (!set) {\n        set = new Set();\n        this.relationMap.set(mainID, set);\n      }\n      for (let child of ZdogItem.children){\n        if (\n          !isNaN(child.type)\n          // (child.type !== undefined)\n          // && (child.type !== null)\n          // && child.id\n          ){ \n\n          set.add(child.id);\n          this.flatten(child);\n        }\n      }\n    }\n    return ZdogItem.id;\n  }\n\n  /**\n   * Returns an object with the bare minimum display properties of the Zdog item\n   * @param {*} node a Zdog object within the tree\n   */\n  trimNode(node){\n    let {id,name,type,visible,children} = node;\n    let o = Object.assign({}, {id,name,type,visible,children})\n    if (!id || isNaN(type)) return null;\n    o.index = this.indexOf(node);\n    o.type = ZDOG_CLASS_NAME[type];\n    if (visible === undefined) visible = true\n\n    if (children && children.length > 0) {\n      o.children = children.map(child=>{\n        return this.trimNode(child);\n      }).filter(x=>x);\n    } else {\n      children = null\n    }\n    return o\n  }\n\n  /**\n   * Returns a stripped down tree with nesting, for UI tree display\n   */\n  trimmedView(){\n    return [this.trimNode(this.illustration)]\n  }\n\n  /**\n   * Find root of composite objects\n   * @param {*} node \n   */\n  static findRoot(node){\n    if ((node.id && node.type) || !node.addTo) {\n      return node\n    }\n    return Ztree.findRoot(node.addTo);\n  }\n\n  /**\n   * Returns a plain of the tree object\n   */\n  plain(){\n    let {illustration, canvasQuery, nodeMap, relationMap} = this;\n\n    let result = {\n      illustration: illustration.id,\n      nodes: [...nodeMap.values()].map(node=>{\n        return toObject(node, canvasQuery)\n      }),\n      relations: [...relationMap.entries()].map(entry=>{\n        let key = entry[0]\n        let valset = entry[1]\n        return {parent: key, children: Array.from(valset)}\n      })\n    }\n\n    return result\n  }\n/**\n * Returns a clone of the Ztree\n */\n  clone(){\n    return new ZtreeReader(this.plain()).tree;\n  }\n\n  /**\n   * Returns a JSON string of the tree\n   */\n  toJSON(){\n    return StringUtils.toString(this.plain())\n  }\n\n  addNode(ZdogItem){\n    this.flatten(ZdogItem);\n  }\n\n  _addRelation(parentId, childIds){\n    let newSet = this.relationMap.get(parentId)\n    if (!newSet) {\n      newSet = new Set()\n    } \n    for (let id of childIds){\n      newSet.add(id);\n    }\n    this.relationMap.set(parentId, newSet);\n  }\n/**\n * Removes node from Ztree, returns the removed node\n * @param {String} id of Zdog node to remove\n */\n  removeNode(id){\n    if (id == this.illustration.id) throw new Error('Cannot delete root')\n    let node = this.nodeMap.get(id)\n\n    if (node.children){\n      //put children to parent node\n      let parent = node.addTo\n      node.children.map(child=>{\n        child.remove();\n        parent.addChild(child);\n      })\n      //update Map\n      let childs = this.relationMap.get(id);\n      if (childs){\n        childs = [...childs]\n        this._addRelation(this.relationMap.get(parent.id), childs)\n      }\n    }\n\n    //remove record of relations\n    this.relationMap.delete(id);\n    this.relationMap.forEach(childSet=>{\n      childSet.delete(id);\n    })\n    //update Map\n    this.nodeMap.delete(id);\n    node.remove()\n\n    return node;\n  }\n//id of the node to be adopted\n  changeParent(id, newParentId){\n    let childnode = this.nodeMap.get(id)\n    let oldParentNode = childnode.addTo\n    let pnode = this.nodeMap.get(newParentId);\n    //remove child from set record\n    this.relationMap.get(oldParentNode.id).delete(id)\n    this._addRelation(newParentId, [id])\n\n    if (oldParentNode){\n      oldParentNode.removeChild(childnode);\n    }\n\n    pnode.addChild(childnode);\n    return pnode;\n  }\n\n  /**\n   * Returns an array of all Zdog items in the tree\n   */\n  get nodes(){\n    return [...this.nodeMap.values()];\n  }\n\n  /**\n   * Returns insertion order index of the Zdog object (insertion order accoridng to Map API is not reliable)\n   * @param {*} node String id or Zdog object\n   */\n  indexOf(node){\n    let id = Ztree._nodeID(node);\n    return [...this.nodeMap.keys()].indexOf(id);\n  }\n\n  hasChildren(node){\n    let id = Ztree._nodeID(node);\n    let set = [...this.relationMap.get(id).values()];\n    return (set.children.some(child=>{\n      return !isNaN(child.type)\n    }));\n  }\n\n  hasParent(node){\n    let id = Ztree._nodeID(node);\n    let set = this.relationMap.get(id);\n    return (set && set.size() > 0);\n  }\n\n  find(id){\n    return this.nodeMap.get(id);\n  }\n\n  /**\n   * Internal helper function meant for retrieving the ID incase someone passes the Zdog object instead. Returns String\n   * @param {*} arg String id or Zdog object\n   */\n  static _nodeID(arg){\n    let ID = arg\n    if (typeof node === \"string\") {\n      ID = arg;\n    } else {\n      ID = arg.id;\n    }\n    // else {\n    //   throw new Error('Invalid argument, must be string or zdog Object')\n    // }\n    return ID\n  }\n\n  getChildNodes(node){\n    let ID = Ztree._nodeID(node);\n    let childIds = [];\n    this.relationMap.forEach((relation)=>{\n      if (relation.from == ID){\n        childIds.push(relation.to);\n      }\n    })\n    return childIds.map((cid)=>{\n      this.nodeMap.get(cid);\n    })\n  }\n\n  // get leaves(){\n  //   return this.nodes.filter((node)=>{\n  //     return node.children.length == 0\n  //   })\n  // }\n\n  get groups(){\n    return this.anchors.filter(node=>{\n      return isClass(node, 6)\n    })\n  }\n\n  get anchors(){\n    return this.nodes.filter(node=>{\n      return isClass(node, 0)\n    })\n  }\n\n  generateEmbed({selector, width, height, bgColor, mini}){\n    let combined = ''\n   combined += canvasTagGenerate(selector, width, height, bgColor) + '\\n'\n   combined += scriptTagGenerate(this, selector, mini)\n   return combined\n  }\n}\n\n/** EMBED GENERATORS\n */\n\n function canvasTagGenerate(selector='.zdog-canvas', width=300, height=300, bgColor='transparent'){\n   let attribute = '';\n   let omitSelector = (str) => {\n    return str.substr(1, str.length - 1)\n   }\n   switch (selector[0]) {\n    case '.':\n      attribute = `class=\"${omitSelector(selector)}\"`\n      break;\n    case '#':\n      attribute = `id=\"${omitSelector(selector)}`\n      break;\n    case '[':\n      attribute = selector.replace(/\\[\\]\\^\\*\\$/g, '')\n      break;\n    default:\n      attribute = `class=\"${selector}\"`\n   }\n   return `<canvas ${attribute} width=\"${width}\" height=\"${height}\" style=\"background-color:${bgColor}\"></canvas>`\n }\n\n //https://javascript.info/string\n/**\n * Creates a JavaScript <script> string of the Ztree (for embed copy-paste)\n * @param {Ztree} ztree \n * @param {Boolean} mini \n */\n function scriptTagGenerate(ztree, selector=\".zdog-canvas\", mini=false){\n   let result = '<script>'\n   let nl = mini?'':'\\n'\n   let plain = ztree.trimmedView()\n   //return an array with [base, children, nestedChilds]\n   let getFlat = (node) => {\n     let arr = [node];\n     if (node.children && node.children.length > 0) {\n      node.children.forEach(child=>{\n        child.addTo = node.id\n        arr = [...arr, ...getFlat(child)]\n      })\n     }\n     return arr\n   }\n   let properNames = ZDOG_CLASS_NAME.map(name=>{\n    return capitalize(name)\n   })\n   properNames[11] = \"RoundedRect\"\n   let order = getFlat(plain[0])\n\n   for (let i = 0; i < order.length; i++){\n     let id = order[i].id\n     let type = properNames[ZDOG_CLASS[order[i].type]]\n     let node = ztree.find(id)\n     let options = justProps(node)\n\n     let declaration = `${nl}var ${id} = new Zdog.${type}(`\n     if (type == \"Illustration\"){\n       options.dragRotate = true\n       options.element = selector;\n      }\n\n     //prune options to save filesize\n     delete options.id\n     delete options.type\n     delete options.name\n\n     let defaults = node.constructor.defaults;\n     for (let d in defaults){\n      if (defaults[d] == options[d]){\n        delete options[d]\n      }\n     }\n\n     for (let d in options){\n      if (d == 'translate' || d == 'rotate'){\n        if (options[d].x == 0){\n          delete options[d].x\n        }\n        if (options[d].y == 0){\n          delete options[d].y\n        }\n        if (options[d].z == 0){\n          delete options[d].z\n        }\n        if (options[d] == {}){\n          delete options[d]\n        }\n      }\n      if (d == 'scale'){\n        if (options[d].x == 1){\n          delete options[d].x\n        }\n        if (options[d].y == 1){\n          delete options[d].y\n        }\n        if (options[d].z == 1){\n          delete options[d].z\n        }\n        if (options[d] == {}){\n          delete options[d]\n        }\n      }\n     }\n\n     //use plugin to avoid double quotes from JSON.stringify\n     let jjj = json_beautifier(options, {\n      dropQuotesOnKeys:true,\n      minify:mini\n     })\n\n     if (order[i].addTo){\n      declaration += jjj.slice(0, jjj.length-1)\n      declaration += `,${nl}addTo: ${order[i].addTo}${nl}}`\n     } else {\n      declaration += jjj\n     }\n     declaration += ');'+nl;\n     result += declaration\n   }\n\n   result += `${nl}function animate(){${ztree.illustration.id}.updateRenderGraph();${nl}requestAnimationFrame(animate);}${nl}animate();${nl}</script>`\n   return result\n }\n\nfunction capitalize(string){\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\n\nconst  ZCLASS = {\n  TYPES: ZDOG_CLASS_TYPE,\n  ENUMS: ZDOG_CLASS,\n  NAMES: ZDOG_CLASS_NAME\n}\n\nconst zCopy = copy;\n\n//** EXPORTS */\n\n /**\n * To create a Zdog object with id: Zdogger('anchor')\n * \n * To create a Ztree: new Z.Tree(illustration)\n * \n * To create a file reader: new Z.Reader(Ztree)\n * \n * To create a copy: Z.copy(ZdogItem, deep?)\n * \n  * @param {String} type \n  */\n const Z = {\n   make:(type) => {\n    if (typeof type == 'string') return create(type);\n    if (typeof type == 'number') return make(type);\n    if (type.id) return reviveZdog(type)\n    return null;\n  },\n  copy: copy,\n  is: isClass,\n  import: importExisting,\n  revive: reviveZdog,\n  toObject: toObject,\n  justProps: justProps,\n  propsFor: validProps,\n  CLASS: ZCLASS,\n  Tree: Ztree,\n  Reader: ZtreeReader,\n }\n\n\nconst StringUtils = {\n  capitalize: capitalize,\n  toString: (o) => {return JSON.stringify(o)}\n}\n\n\nexport {Z, Ztree, ZtreeReader,\n  ZCLASS, zCopy, justProps, StringUtils }\n\n\nexport default Z;","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./TreeView.vue?vue&type=style&index=0&id=51da5719&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Creation.vue?vue&type=style&index=0&id=2ffd653c&scoped=true&lang=css\"","\n/* eslint-disable no-unused-vars */\n//import Zdog from 'zdog' // ../../zdog\nimport Zdog from 'zdog'\nimport {Z} from './ztree';\n\n//import versor from 'versor'\n\nvar requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame ||\n                            window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;\n\nvar cancelAnimationFrame = window.cancelAnimationFrame || window.mozCancelAnimationFrame;\n\n/**\n * Returns an array with [ r g b ] values\n * @param {*} context CanvasRendering2DContext\n * @param {*} x \n * @param {*} y \n */\nfunction getPixel(context, x, y) {\n  let imageData = context.getImageData( x, y, 1, 1 );\n  let data = imageData.data;\n  return [data[0],data[1],data[2]];\n}\n\nfunction colorKey(data){\n  return  `${data[0]}${data[1]}${data[2]}`\n}\n\nfunction rgbString(data){\n  return `rgb(${data[0]},${data[1]},${data[2]})`\n}\n\nclass GhostCanvas{\n  constructor(ztree, ghostIllo){\n    this.ztree = ztree;\n    this.ghost = ghostIllo\n    this.init()\n    let ghostPrerender = (ctx) => {\n      ctx.setTransform(...this.transformMatrix)\n      this.ghost.rotate = this.ztree.illustration.rotate;\n      this.ghost.translate = this.ztree.illustration.translate;\n      this.ghost.updateGraph();\n    }\n    this.ghost.onPrerender = ghostPrerender\n  }\n\n\n  init(){\n    let clone = this.ztree.clone()\n    this.ghostNodes = clone.nodeMap;\n    this.ghost.children = clone.illustration.children\n\n    this.colorMap = new Map(); //<rgba:[3], id: string>\n    this.nodeColors = new Map(); //<id: string, rgba:[3]>\n    let nodes = this.ghostNodes.values();\n    for(let node of nodes){\n      if (node.isCanvas) {\n        continue\n      }\n        let color = getRandomRgb();\n        GhostCanvas.setUniformColor(node, color)\n        this._setMaps(node, color)\n    }\n  }\n\n  get nodeMap(){\n    return this.ztree.nodeMap;\n  }\n  get transformMatrix(){\n    return this.ztree.illustration.transformMatrix\n  }\n  /**\n   * Updates nodes and deletes those that are not present in the live canvas.\n   */\n  pruneGhost(){\n    let toDelete = {};\n    this.ghostNodes.forEach(node=>{\n      if (node.id && node.type && !node.isCanvas){\n        toDelete[node.id] = true;\n      }\n    })\n    this.nodeMap.forEach((node,id)=>{\n      //id still exists, update and do not delete\n      if (this.nodeColors.has(id)){\n        toDelete[id] = false;\n        this.updateNode(id)\n      } else if (!node.isCanvas){\n        // id not registered, add it\n        this.addNode(node)\n      }\n    })\n    for (let id in toDelete){\n      if(toDelete[id]){\n        this.removeNode(id)\n      }\n    }\n  }\n/**\n * Takes the live Zdog and creates a ghost copy\n * @param {*} zdog Zdog from live canvas\n */\n  addNode(zdog){\n    if (!zdog.id) throw new Error('Invalid zdog object (must have \"id\" property ')\n    let color = getRandomRgb()\n    let clone = zdog.copy();\n    Object.assign(clone, Z.justProps(zdog))\n    //\n    let parentid = zdog.addTo.id\n    if (this.ghostNodes.has(parentid)){\n      let parentGhost = this.ghostNodes.get(parentid)\n      parentGhost.addChild(clone)\n    }\n    GhostCanvas.setUniformColor(clone, color)\n    this._setMaps(clone, color)\n    return clone\n  }\n/**\n * Removes the specified node from the ghost canvas\n * @param {String} id of Zdog object\n */\n  removeNode(id){\n    let toRem = this.ghostNodes.get(id)\n    toRem.remove()\n    let k = this.nodeColors.get(id)\n    this.colorMap.delete(k)\n    this.nodeColors.delete(id)\n    this.ghostNodes.delete(id)\n  }\n\n  _setMaps(node, color){\n    if (node.id && node.type !== undefined){\n      let str = colorKey(color)\n      this.colorMap.set(str, node.id)\n      this.nodeColors.set(node.id, str)\n      this.ghostNodes.set(node.id, node)\n    }\n  }\n\n/**\n * Sync the ghost node's noncolor properties with the live node\n * @param {String} id of Zdog node\n */\n  updateNode(id){\n     let original = this.nodeMap.get(id);\n    // if (!original) {\n    //   this.pruneGhost()\n    //   return\n    // }\n    let o = {}\n    let nodeProps = Z.propsFor(original).filter(prop=>{\n      return !COLOR_PROPS.includes(prop)\n    })\n    nodeProps.forEach(prop=>{\n      o[prop] = original[prop]\n    })\n    let gn = this.ghostNodes.get(id)\n    Object.assign(gn, o)\n  }\n\n  //id of the node to be adopted\n  changeParent(id, newParentId){\n    let childnode = this.ghostNodes.get(id)\n    childnode.remove();\n    this.ghostNodes.get(newParentId).addChild(childnode);\n  }\n\n/**\n * Returns the node id that is under the coordinates\n * (pass in transformed coordinates if the <canvas> is offset from live)\n * @param {Number} canvasX \n * @param {Number} canvasY\n */\n  getShape(canvasX, canvasY){\n    this.ghost.renderGraph()\n    let color = getPixel(this.ghost.ctx, canvasX, canvasY)\n    return this.colorMap.get(colorKey(color))\n  }\n\n    /**\n   * Sets a Zdog node to a single color and returns the original Zdog object\n   * @param {*} node the Zdog object\n   * @param {*} colorData the array of [ r g b]\n   */\n  static setUniformColor(zdog, colorData){\n    //Set all color props to same\n    let string = rgbString(colorData);\n    let previous = Z.justProps(zdog)\n\n    let f = (zdog) => {\n      COLOR_PROPS.forEach(prop=>\n      {if (zdog[prop]) zdog[prop] = string})}\n\n      f(zdog)\n\n    //same with cildren\n    zdog.children.forEach(child=>{\n      //make sure it is not a separate entity (has an id)\n      if (!child.id){\n        GhostCanvas.setUniformColor(child, colorData)\n        let dependents = child._flatGraph; //some composite shapes have flatgraph\n        if (dependents){\n          dependents.forEach(d=>{\n            GhostCanvas.setUniformColor(d, colorData)\n          })\n        }\n      }\n\n    })\n   return previous\n  }\n}\n\nconst eventDeselect = new Event('deselect')\n/**\n * Zdog Scene\n */\nclass Scene{\n  animReq = null\n  dragging = false\n  canPan = false;\n  isMouseDown = 0;\n  totaldelta = 0;\n/**\n * Creates a Scene object that allows panning/zooming.\n * @param {Ztree} ztree\n * @param {*} options \n */\n  constructor(ztree, options={ghostQuery:'.zdog-ghost', zoomSpeed:1, panInverse:false, panSpeed:30}){\n    for(let o in options){\n      this[o] = options[o]\n    }\n    //theta is azimuthal angle (along zx plane)\n    //phi is polar angle (along xy plane)\n    /**\n            | -y\n            |\n            | __________ +x\n           /|\n          / |\n      +z /  | +y\n        /\n     */\n\n    this.ztree = ztree\n    this.illustration = ztree.illustration;\n\n    this.ghostIllo = new Zdog.Illustration({\n      element: this.ghostQuery,\n      dragRotate:false\n    })\n\n    this.ghostCanvas = new GhostCanvas(ztree, this.ghostIllo)\n    this.unitAxes = new UnitAxes({addTo:ztree.illustration})\n\n    //this.illustration.addChild(makeAxis({t:800}))\n\n    this.eye = {}\n    this.worldPosition = new Zdog.Vector();\n\n    this.phi = this.illustration.rotate.x\n    this.theta = this.illustration.rotate.y\n    this.rho = this.defaultRho\n\n    /**EVENTS***************/\n    this.events = {\n      wheel:[],\n      down:[],\n      up:[],\n      move:[],\n    }\n\n    let ctx = this;\n    this.dragger = new Zdog.Dragger({\n      startElement: ctx.illustration.element,\n      onDragStart: function(event, pointer) {\n        ctx.cursordown(event, pointer)\n      },\n      onDragMove: function( event, pointer, dX, dY ) {\n        ctx.cursormove( event, pointer, dX, dY)\n      },\n      onDragEnd: function(event) {\n        ctx.cursorup(event)\n      },\n    });\n\n    this.onwheel = (e) => this._dispatch('wheel', e)\n    ctx.illustration.element.addEventListener('wheel', this.onwheel)\n    this.on('wheel', this.zooming.bind(this))\n\n    this.label = document.createElement('span')\n    // this.label.innerText = `${Math.round(this.zoom * 100)}%`\n    this.animate();\n  }\n\n  static ORIGIN = {x:0,y:0,z:0}\n\n  get x(){\n    return this.rho * Math.cos(this.phi) * Math.sin(this.theta)\n  }\n  get y(){\n    return this.rho * Math.sin(this.phi)\n  }\n  get z(){\n    return this.rho * Math.cos(this.phi) * Math.cos(this.theta)\n  }\n  // starting  value (distance from origin)\n  get defaultRho(){\n    return (this.illustration.canvasHeight / 2)\n  }\n\n  // get zoom(){\n  //   return 1 / (this.rho  / this.defaultRho)\n  // }\n\n  // set zoom(newZoom){\n  //   this.rho = this.defaultRho / newZoom;\n  //   this.illustration.zoom = newZoom\n  // }\n\n  /**\n   * Cursor events handle touch/mouse/pointer\n   */\n  cursordown(event, pointer) {\n    this.x0 = pointer.pageX;\n    this.y0 = pointer.pageY;\n    this.totaldelta = 0;\n\n    this.isMouseDown = event.buttons;\n    if (event.button == 1){    //MMB pressed\n      this.canPan = true;\n      }\n      this._dispatch('down', event)\n    }\n\n  cursormove(event, pointer, dX, dY ){\n    if (this.canPan){\n      this.dragPan(pointer)\n    } else {\n      this.dragRotate(pointer, dX,dY)\n    }\n    this._dispatch('move', event)\n  }\n\n  dragPan(pointer){\n    let [dx, dy] = this._screendelta(pointer)\n\n    if (!this.panInverse){\n      dx = dx * -1\n      dy = dy * -1\n    }\n\n    let speed = (this.panSpeed / 100)\n    let y2 = this.illustration.translate.y + (dy*speed)\n    let x2 = this.illustration.translate.x + (dx*speed)\n    let o = {x:x2, y:y2, z:this.z}\n    this.illustration.translate = o;\n  }\n\n  dragRotate(pointer) {\n    let [dx, dy] = this._screendelta(pointer)\n    this.theta = (this.theta + this.radRatio( dx));\n    this.phi = (this.phi + this.radRatio( dy ));\n    let o = {x:this.phi, y:this.theta, z:this.illustration.rotate.z}\n    this.illustration.rotate = o;\n  }\n\n  cursorup(event){\n    this.isMouseDown = event.buttons\n    if (event.button == 1){     //MMB released\n      this.canPan = false;\n    }\n    //detect if drag or click\n    if (Math.abs(this.totaldelta) < 5 ) {    //might need a threshold depending on mobile/web... maybe later\n      this.selection(event)\n    }\n    this._dispatch('up', event)\n      //console.log(`(,,):(${ctx.rho},${ctx.theta},${ctx.phi})`)\n  }\n\n  _screendelta(pointer){\n    let deltaX = this.x0 - pointer.pageX;\n    let deltaY = this.y0 - pointer.pageY;\n    this.x0 = pointer.pageX;\n    this.y0 = pointer.pageY;\n    this.totaldelta += (deltaX + deltaY)\n    return [deltaX, deltaY]\n  }\n\n  zooming(event){\n    event.preventDefault();\n    let z0 = this.illustration.zoom, z = z0 + event.deltaY * this.zoomSpeed;\n    console.log(z0)\n    console.log(`(,,):(${this.rho},${this.theta},${this.phi})`)\n    // this.rho = Math.max(0.1, z);\n    console.log(this.defaultRho)\n    this.illustration.zoom -= z / this.defaultRho\n    if (this.illustration.zoom < 0) { this.illustration.zoom = 0.1 }\n    // z = vertical screen pixels scrolled (on a normal webpage)\n    this.rho -= this.rho + z\n    this.label.innerText = `${Math.round(this.illustration.zoom * 100)}%`\n  }\n\n  selection(event){\n    let id = this.ghostCanvas.getShape(event.offsetX, event.offsetY)\n    if (id && id != this.selectActive){\n      const selectShape = new CustomEvent('selectshape',{\n        detail:\n        {id: id}\n      });\n      this.illustration.element.dispatchEvent(selectShape)\n      this.selectActive = id;\n    } else if (this.selectActive && !id) {\n      this.illustration.element.dispatchEvent(eventDeselect)\n      this.selectActive = false;\n    }\n  }\n\n  keydown(e){\n    //Shift -> pan\n    if (e.keyCode == 16){\n      this.canPan = true;\n    }\n  }\n\n  keyup(e){\n    //Shift -> pan\n    if (e.keyCode == 16 && this.isMouseDown < 4){\n      this.canPan = false;\n    }\n  }\n\n /**\n  * Attach events to the canvas element.\n  * \n  * 'selectshape' is a custom event. event.detail.id returns the shape's id if the user clicks on the screen and a shape is underneath the point.\n  * \n  *  new Scene().on('selectshape', (e)=>{console.log(e.detail.id)})\n  * \n  * Other event names include 'down','up','move', which trigger on mouse/touch/pointer, and 'wheel'\n  * \n  * @param {*} eventName \n  * @param {*} callback function(event){...}\n  */\n  on(eventName, callback){\n    let dispatch = this.events[eventName]\n    if (dispatch === null || dispatch === undefined){\n      this.events[eventName] = callback\n      this.illustration.element.addEventListener(eventName, callback)\n    } else if (dispatch.length !== undefined) {\n      this.events[eventName].push(callback)\n    }\n  }\n\n  _dispatch(eventName, event){\n    this.events[eventName].forEach(fn=>{\n      fn(event)\n    })\n  }\n\n  /**\n   * Returns a radian value to correlate rotation with screen pixel projection\n   * @param {Number} delta in screen pixels\n   */\n  radRatio(delta){\n    return delta * (Math.PI * 2) / this.illustration.canvasWidth;\n  }\n\n  animate = () => {\n    this.illustration.updateRenderGraph()\n    this.animReq = requestAnimationFrame(this.animate)\n  }\n\n  unanimate(){\n    cancelAnimationFrame(this.animReq)\n  }\n\n  addNode(node){\n    this.ztree.addNode(node)\n    this.ghostCanvas.addNode(node)\n  }\n\n  removeNode(id){\n    this.ztree.removeNode(id)\n    this.ghostCanvas.removeNode(id)\n  }\n\n  updateNode({node, options}){\n    //let node = this.ztree.find(id)\n    console.log(node)\n    for (let o in options){\n      node[o] = options[o]\n    }\n    this.ghostCanvas.updateNode(node.id)\n  }\n\n  changeParent(id, newParentId){\n    this.ztree.changeParent(id, newParentId)\n    this.ghostCanvas.changeParent(id, newParentId)\n  }\n\n  destroy(){\n    cancelAnimationFrame(this.animReq)\n\n    let listeners = this.events;\n    for (let name in listeners){\n      if (name == 'wheel'){\n        this.illustration.element.removeEventListener(name, this.onwheel)\n      } else if (listeners[name].length == undefined || listeners[name].length == null ){\n        this.illustration.element.removeEventListener(name, listeners[name])\n        delete this.events[name]\n      } else {\n        this.events[name] = [];\n      }\n    }\n    this.dragger.destroy();\n    delete this.dragger\n  }\n\n}\n\n\nfunction drawAxis(illo, ZdogAxis){\n  let matrix = illo.transformMatrix\n  // //matrix( scaleX(), skewY(), skewX(), scaleY(), translateX(), translateY() )\n    let p = ZdogAxis.getPoints();\n    let u = new Zdog.Vector(p[0])\n    let v = new Zdog.Vector(p[1])\n\n    ZdogAxis.t = 100 / matrix[0]\n  //Transform the points to match the illo\n  u.multiply({x:matrix[0], y:matrix[3]})\n  v.multiply({x:matrix[0], y:matrix[3]})\n  u.add({x:matrix[4], y:matrix[5]})\n  v.add({x:matrix[4], y:matrix[5]})\n\n  drawRaw(illo, ctx => {\n    ctx.beginPath()\n    ctx.strokeStyle = ZdogAxis.color\n    ctx.lineWidth = ZdogAxis.stroke\n    ctx.moveTo(u.x, u.y)\n    ctx.lineTo(v.x, v.y)\n    ctx.stroke()\n  })\n}\n/**\n * A class to generate the 6 coordinate axes (XYZ and -XYZ)\n */\nclass UnitAxes{\n  flag = 0b111111;\n  axes = [];\n  constructor(options={addTo:null,scaleZoom:false}){\n    this.root = new Zdog.Anchor();\n    let opts = options;\n    if (!options) {\n      opts = {addTo:null,scaleZoom:false}\n    }\n    opts.t = opts.t || window.innerWidth || 100\n\n    let form = (front, color) => {\n      let o = {\n        front:front,\n        color:color,\n        visible:true,\n      }\n      Object.assign(o, opts)\n      let a = makeAxis(o);\n      this.root.addChild(a)\n      return a\n    }\n\n    let opacity = 0.6\n    this.axes = [\n      form({x:1}, 'x'),\n      form({y:1}, 'y'),\n      form({z:1}, 'z'),\n      form({x:-1}, `hsla(0,100%,30%,${opacity})`),\n      form({y:-1}, `hsla(120,100%,30%,${opacity})`),\n      form({z:-1}, `hsla(240,100%,30%,${opacity})`)\n    ]\n\n    if (options.addTo){\n      this.addTo(options.addTo)\n    }\n  }\n\n  addTo(zdog){\n    zdog.addChild(this.root)\n  }\n\n  remove(){\n    this.root.remove();\n  }\n\n  update(){\n    for (let i = 0; i < this.axes.length; i++) {\n      this.axes[i].visible = ((this.flag & (1 << i)) > 0)\n    }\n    this.root.updateGraph();\n  }\n\n  hideAll(){\n    this.flag = 0;\n    this.update();\n  }\n\n  showAll(){\n    this.flag = 63;\n    this.update();\n  }\n\n  //sets visible flag for the positive axes, pass true to show and false to hide\n  showPos(bool){\n    if (bool === false){\n      this.flag = (this.flag & (7 << 3))\n    } else {\n      this.flag = (this.flag | 7)\n    }\n    this.update();\n  }\n\n  //same for negative axes\n  showNeg(bool){\n    if (bool === false){\n      this.flag = (this.flag & 7)\n    } else {\n      this.flag = (this.flag | (7<<3))\n    }\n    this.update();\n   }\n}\n\n//Checks if a bit is set at the position\nfunction getBit(num, p){\n  return ((num & (1 << p)) > 0)\n}\n// Toggle bit at position and return new number\nfunction toggleBit(num, p){\n  return (num ^ (1<<p))\n}\n\n/** ZDOG HELPERS SAUCE by Mootari:\n * https://observablehq.com/@mootari/zdog-helpers\n */\n\n\n/**\n * Creates axes and returns an Anchor\n *\n * ---\n *\n * Options:\n *\n * {\n * size: Number, length of the axes; default 100\n *\n * head: Number, length of the arrow; default 10\n *\n * stroke: Number\n *\n * x: String, color of the x axis, null for insivible; default 'red'\n *\n * y: String, color of the y axis, null for insivible; default 'green'\n *\n * z: String, color of the z axis; default 'blue'\n *\n * }\n * @param {*} options\n */\nfunction axesHelper({size = 100, head = 10, stroke = 1, x = 'hsl(0, 100%, 50%)', y = 'hsl(120, 100%, 50%)', z = 'hsl(240, 100%, 50%)', ...options} = {}) {\n  const PIH = Math.PI / 2;\n  const line = (color, rotate) => {\n    const l = new Zdog.Shape({color, path: [{}, {x: size}], fill: false, stroke, rotate});\n    if(head) {\n      let colorHSL = parseHSL(color);\n      new Zdog.Cone({\n        addTo: l,\n        color, stroke: false, fill: true, length: head,\n        backface: `hsl(${colorHSL[0]},${colorHSL[1]}%,${colorHSL[2] - 15}%)`,\n        diameter: head * .66,\n        rotate: {y: -PIH},\n        translate: {x: size},\n      });\n    }\n    return l;\n  }\n\n  const a = new Zdog.Anchor(options);\n  if(x) a.addChild(line(x, {}));\n  if(y) a.addChild(line(y, {z: PIH}));\n  if(z) a.addChild(line(z, {y: PIH}));\n  return a;\n}\n\n\n\n/**\n * Creates a grid with even lines and returns an Anchor\n *\n * ---\n *\n * Options:{\n *\n * size: Number, default 100\n *\n * divisions: Number, default 10\n *\n * color: String, default '#888'\n *\n * stroke: Number, default 1\n *\n * front: Object, define the front plane, same as Zdog; default {z:1}\n * }\n * @param {Object} options\n */\nfunction gridHelper({size = 100, divisions = 10, color = '#888', stroke = 1, front = {z:1}, ...options} = {}) {\n  const sh = size/2;\n  const path = [];\n  for(let i = 0; i < divisions+1; i++) {\n    const o = size/divisions*i-sh;\n    path.push(\n      {move: {z: -sh, x: o}},\n      {line: {z: sh, x: o}},\n      {move: {x: -sh, z: o}},\n      {line: {x: sh, z: o}}\n    );\n  }\n  const a = new Zdog.Anchor(options);\n  new Zdog.Shape({path, front, stroke: stroke, fill: false, color, addTo: a});\n  return a;\n}\n\n/**\n * Returns a grid Anchor object\n *\n * ---\n *\n * Options:{\n *\n * size: Number, default 100\n *\n * divisions: default 10\n *\n * color: String, default '#888'\n *\n * stroke: Number, default 1\n *\n * ...native Zdog options as needed (front is default z)\n * }\n * @param {*} options\n */\nfunction gridRectHelper({size = 100, divisions = 10, color = '#888', stroke = 1, front = {z:1}, ...options} = {}) {\n  const sh = size/2, s = size/divisions;\n  const addTo = new Zdog.Anchor(options);\n\n  for(let z = 0; z < divisions; z++) {\n    const oz = s*z - sh;\n    for(let x = 0; x < divisions; x++) {\n       const ox = size/divisions * x - sh;\n        new Zdog.Shape({stroke, fill: false, color, closed: true, addTo, front, path: [\n          {move: {z: oz, x: ox}},\n          {line: {z: oz, x: ox + s}},\n          {line: {z: oz + s, x: ox + s}},\n          {line: {z: oz + s, x: ox}},\n        ]});\n    }\n  }\n\n  return addTo;\n}\n\n/**\n * Adds rotation guidemarks to an object's axes\n *\n * ---\n *\n * Options:\n *\n * {\n * size: Number, radius of the marker\n *\n * hole: Number from 0-1, radius of the inner hole as decimal percent, default: 0.5\n *\n * range: Number, ratio of trail tapering; 0 for no tapering. A number larger than 1 will go outside the original perimeter\n *\n * x: String, color of the x axis, null for insivible\n *\n * y: String, color of the y axis, null for insivible\n *\n * z: String, color of the z axis\n * }\n * @param {Object} options\n */\nfunction rotationHelper({size: r = 1, hole = .5, range = 1, x = 'red', y = 'green', z = 'blue', ...options} = {}) {\n  const mix = (a, b, t) => a + t * (b - a);\n  const root = new Zdog.Anchor(options), Q = Zdog.TAU*.25;\n  const r1 = r * hole, r2 = mix(r1, r, range);\n  const path = (r, r1, r2) => [\n    {move: {x: r, y: 0}},\n    {arc: [ {x: r, y: r}, {x: 0, y: r} ]},\n    {line: {x: 0, y: r1}},\n    {arc: [ {x: mix(r1,r2,.5), y: mix(r1,r2,.5)}, {x: r2, y: 0} ]},\n  ];\n\n // for(let {color, colorTop = color, rotate} of [\n  for(let {color, rotate} of [\n    x && {color: x, rotate: {y:Q}},\n    y && {color: y, rotate: {x:Q}},\n    z && {color: z, rotate: {z:Q}},\n  ].filter(v => v)) {\n    const ring = new Zdog.Anchor({addTo: root, rotate});\n    for(let i = 0; i < 4; i++) {\n      new Zdog.Shape({\n        addTo: ring,\n        path: path(r, mix(r1, r2, i/4), mix(r1, r2, (i+1)/4)),\n        rotate: {z: -Q*i},\n        closed: true,\n        fill: true,\n        stroke: false,\n        color,\n      });\n    }\n  }\n\n  return root;\n}\n\n// Fills the canvas with the specified color. Call in onPrerender.\nfunction clearColor(illo, color) {\n  const ctx = illo.ctx;\n  ctx.save();\n  ctx.resetTransform();\n  ctx.fillStyle = color;\n  ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n  ctx.restore();\n}\n\n/**\n * Attaches zoom event to the illustration, returns the illustration\n * @param {Zdog.Illustration} illo\n * @param {Object} options\n */\nfunction zoomable(illo, options = {}) {\n  Object.assign(illo, {\n    setZoomable(zoomable) {\n      zoomable\n        ? this.element.addEventListener('wheel', this)\n        : this.element.removeEventListener('wheel', this);\n    },\n    zoomSpeed: .001,\n    minZoom: .1,\n    onwheel(event) {\n      event.preventDefault();\n      const z0 = this.zoom, z = z0 - event.deltaY * this.zoomSpeed;\n      // Max boundary handled by Zdog.\n      this.zoom = z < this.minZoom ? this.minZoom : z;\n      if(this.onZoom) this.onZoom(this.zoom, this.zoom - z0);\n    }\n  }, options);\n  illo.setZoomable(illo.zoomSpeed != 0);\n  return illo;\n}\n\n/**\n * Creates an object that can add functionality to new Illustration instance\n *\n * e.g.\n *\n *  const perspective = perspectiveHelper({fov: 300});\n *\n *  const illo = new Zdog.Illustration({\n    element...\n*\n    onPrerender() {\n      perspective.onPrerender(this);\n    },\n  });\n *\n * ---\n * Options: {\n *\n * fov: Number, field of view, default 100\n *\n * zOffset: Number, height of camera, default 0,\n *\n * scaleStroke: Boolean; default true}\n *\n * @param {Object} options\n */\nfunction perspectiveHelper({fov = 100, zOffset = 0, scaleStroke = true} = {}) {\n\n  function walk(illo, callback) {\n    const top = new Set(illo.flatGraph);\n    for(const g of top) _walk(g);\n\n    function _walk(item) {\n      callback(item);\n      for(const c of item.children)\n        if(!top.has(c)) _walk(c);\n    }\n  }\n\n  return {\n    fov,\n    zOffset,\n    scaleStroke,\n\n    getScale(p) {\n      return this.fov / (this.fov - p.z + this.zOffset);\n    },\n\n    scalePoint(p) {\n      const s = this.getScale(p);\n      p.x *= s;\n      p.y *= s;\n    },\n\n    onPrerender(illo) {\n      walk(illo, e => {\n        this.scalePoint(e.renderOrigin);\n\n        if(e.pathCommands && e.pathCommands.length) {\n          if(this.scaleStroke && e.stroke) {\n            if(e._stroke == null) e._stroke = e.stroke;\n            e.stroke = e._stroke * this.getScale(e.pathCommands[0].endRenderPoint);\n          }\n\n          for(const c of e.pathCommands)\n            for(const p of c.renderPoints)\n              this.scalePoint(p);\n        }\n\n      });\n    },\n\n    resetStroke(illo) {\n      walk(illo, e => {\n        if(e._stroke !== undefined) {\n          e.stroke = e._stroke;\n          e._stroke = undefined;\n        }\n      });\n    }\n  };\n\n}\n\nfunction makeAxis(options){\n  return new Zdog.Axis(options)\n}\n\nconst COLOR_PROPS = [\n  'color', 'rearFace', 'frontFace', 'leftFace', 'rightFace', 'topFace', 'bottomFace', 'backface'\n]\n\n\n//https://stackoverflow.com/questions/23095637/how-do-you-get-random-rgb-in-javascript\nfunction getRandomRgb() {\n  var num = Math.round(0xffffff * Math.random());\n  var r = num >> 16;\n  var g = num >> 8 & 255;\n  var b = num & 255;\n  return [r,g,b]\n}\n\n/**\n * Takes an HSL string and returns an array of the HSL values.\n * https://stackoverflow.com/questions/19289537/javascript-match-and-parse-hsl-color-string-with-regex\n * @param {*} color hsl string in the format hsl(x, x%, x%)';\n */\nfunction parseHSL(color){\n  let regexp = /hsl\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%\\)/g;\n  return regexp.exec(color).slice(1).map(val=>{\n    return Number(val);\n  });\n  //array of [0]: Hue, [1]: Saturation, [2]:Lightness\n}\n\nfunction drawRaw(illo, draw) {\n  const ctx = illo.ctx;\n  ctx.save();\n  ctx.resetTransform();\n  draw(ctx);\n  ctx.restore();\n}\n\n\nconst Color = {\n  PROPS: COLOR_PROPS,\n  randomRgb: getRandomRgb,\n  parseHSL: parseHSL\n}\n\nexport {\n  Scene,\n  UnitAxes,\n  makeAxis,\n  Color,\n};\n\nexport default Scene;","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./TopBar.vue?vue&type=style&index=0&id=29920c32&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./TreeItem.vue?vue&type=style&index=0&id=3c4a7a78&lang=scss\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./App.vue?vue&type=style&index=0&id=f93fb03c&lang=css\"","/* eslint-disable no-unused-vars */\n\nimport Scene from './scene'\nimport {Z, StringUtils} from './ztree'\n\n\nconst ZCLASS = Z.CLASS\n\nlet Zdogger = (type) =>{\n  return Z.make(type)\n} \n\nObject.assign(Zdogger, {\n  Tree: Z.Tree,\n  Reader: Z.Reader,\n  Scene: Scene,\n  CLASS: ZCLASS,\n  is: Z.is,\n})\n\nconst StringMixin = {\n  methods: StringUtils\n}\n\nconst propsFor = Z.propsFor\n\nexport {StringMixin, propsFor}\n\nexport default Zdogger","import Zdog from 'zdog'\nimport Zdogger from './zdogger'\n\n// Made with Zdog\n\nconst TAU = Zdog.TAU;\n//const offWhite = '#FED';\nconst gold = '#EA0';\nconst garnet = '#C25';\nconst eggplant = '#636';\n\n\nconst illo = new Zdog.Illustration({\n  element: '.zdog-canvas',\n  zoom: 5,\n // rotate: { y: -TAU/8 },\n  dragRotate: true,\n});\n\n// ----- model ----- //\n\nvar hipX = 3;\n// hips\nvar hips = new Zdog.Shape({\n  addTo: illo,\n  path: [ { x: -hipX }, { x: hipX } ],\n  translate: { y: 2 },\n  stroke: 4,\n  color: eggplant,\n});\n\n// ----- legs ----- //\n\nvar leg = new Zdog.Shape({\n  addTo: hips,\n  path: [ { y: 0 }, { y: 12 } ],\n  translate: { x: -hipX },\n  rotate: { x: TAU/4 },\n  color: eggplant,\n  stroke: 4,\n});\n\n// foot\nvar foot = new Zdog.RoundedRect({\n  addTo: leg,\n  width: 2,\n  height: 4,\n  cornerRadius: 1,\n  translate: { y: 14, z: 2 },\n  rotate: { x: TAU/4 },\n  color: garnet,\n  fill: true,\n  stroke: 4,\n});\n\nvar standLeg = leg.copy({\n  translate: { x: hipX },\n  rotate: { x: -TAU/8 },\n});\n\nfoot.copy({\n  addTo: standLeg,\n  rotate: { x: -TAU/8 },\n});\n\n// ----- upper body ----- //\n\nvar spine = new Zdog.Anchor({\n  addTo: hips,\n  rotate: { x: TAU/8 },\n});\n\nvar chest = new Zdog.Shape({\n  addTo: spine,\n  path: [ { x: -1.5 }, { x: 1.5 } ],\n  translate: { y: -6.5 },\n  stroke: 9,\n  color: garnet,\n});\n\nvar head = new Zdog.Shape({\n  addTo: chest,\n  stroke: 12,\n  translate: { y: -9.5 },\n  color: gold,\n});\n\nvar eye = new Zdog.Ellipse({\n  addTo: head,\n  diameter: 2,\n  quarters: 2,\n  translate: { x: -2, y: 1, z: 4.5 },\n  rotate: { z: -TAU/4 },\n  color: eggplant,\n  stroke: 0.5,\n  backface: false,\n});\neye.copy({\n  translate: { x: 2, y: 1, z: 4.5 },\n});\n// smile\nnew Zdog.Ellipse({\n  addTo: head,\n  diameter: 3,\n  quarters: 2,\n  translate: { y: 2.5, z: 4.5 },\n  rotate: { z: TAU/4 },\n  closed: true,\n  color: '#FED',\n  stroke: 0.5,\n  fill: true,\n  backface: false,\n});\n\n// ----- arms ----- //\n\nvar armSize = 6;\n\n// arm on left\nvar upperArm = new Zdog.Shape({\n  addTo: chest,\n  path: [ { y: 0 }, { y: armSize } ],\n  translate: { x: -5, y: -2 },\n  rotate: { x: -TAU/4 },\n  color: eggplant,\n  stroke: 4,\n});\n\nvar forearm = new Zdog.Shape({\n  addTo: upperArm,\n  path: [ { y: 0 }, { y: armSize } ],\n  translate: { y: armSize },\n  rotate: { x: TAU/8 },\n  color: gold,\n  stroke: 4,\n});\n\n// hand\nnew Zdog.Shape({\n  addTo: forearm,\n  translate: { z: 1, y: armSize },\n  stroke: 6,\n  color: gold,\n});\n\n// arm on right\nupperArm.copyGraph({\n  translate: { x: 5, y: -2 },\n  rotate: { x: TAU/4 },\n});\n\n// function animate() {\n//   illo.updateRenderGraph();\n//   requestAnimationFrame( animate );\n// }\n\n// animate();\n\nlet tree = new Zdogger.Tree(illo)\nlet testmodel = tree.toJSON();\n\nexport default testmodel;"],"sourceRoot":""}